export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[]

export type Database = {
  // Allows to automatically instantiate createClient with right options
  // instead of createClient<Database, { PostgrestVersion: 'XX' }>(URL, KEY)
  __InternalSupabase: {
    PostgrestVersion: "14.1"
  }
  public: {
    Tables: {
      ad_spend_daily: {
        Row: {
          ad_id: string | null
          broad_conversions: number | null
          broad_order_amount: number | null
          campaign_id: string | null
          campaign_name: string | null
          channel: string
          clicks: number | null
          conversions: number | null
          cpc: number | null
          created_at: string | null
          ctr: number | null
          direct_conversions: number | null
          direct_order_amount: number | null
          expense: number | null
          id: string
          impressions: number | null
          spend_date: string
          tenant_id: string
        }
        Insert: {
          ad_id?: string | null
          broad_conversions?: number | null
          broad_order_amount?: number | null
          campaign_id?: string | null
          campaign_name?: string | null
          channel?: string
          clicks?: number | null
          conversions?: number | null
          cpc?: number | null
          created_at?: string | null
          ctr?: number | null
          direct_conversions?: number | null
          direct_order_amount?: number | null
          expense?: number | null
          id?: string
          impressions?: number | null
          spend_date: string
          tenant_id: string
        }
        Update: {
          ad_id?: string | null
          broad_conversions?: number | null
          broad_order_amount?: number | null
          campaign_id?: string | null
          campaign_name?: string | null
          channel?: string
          clicks?: number | null
          conversions?: number | null
          cpc?: number | null
          created_at?: string | null
          ctr?: number | null
          direct_conversions?: number | null
          direct_order_amount?: number | null
          expense?: number | null
          id?: string
          impressions?: number | null
          spend_date?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ad_spend_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ad_spend_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ad_spend_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ad_spend_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      adjustment_note_items: {
        Row: {
          adjustment_note_id: string
          amount: number | null
          created_at: string
          description: string
          external_product_id: string | null
          gl_account_id: string | null
          id: string
          metadata: Json | null
          product_id: string | null
          quantity: number | null
          sku: string | null
          tax_amount: number | null
          tax_rate: number | null
          tenant_id: string
          unit: string | null
          unit_price: number | null
        }
        Insert: {
          adjustment_note_id: string
          amount?: number | null
          created_at?: string
          description: string
          external_product_id?: string | null
          gl_account_id?: string | null
          id?: string
          metadata?: Json | null
          product_id?: string | null
          quantity?: number | null
          sku?: string | null
          tax_amount?: number | null
          tax_rate?: number | null
          tenant_id: string
          unit?: string | null
          unit_price?: number | null
        }
        Update: {
          adjustment_note_id?: string
          amount?: number | null
          created_at?: string
          description?: string
          external_product_id?: string | null
          gl_account_id?: string | null
          id?: string
          metadata?: Json | null
          product_id?: string | null
          quantity?: number | null
          sku?: string | null
          tax_amount?: number | null
          tax_rate?: number | null
          tenant_id?: string
          unit?: string | null
          unit_price?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "adjustment_note_items_adjustment_note_id_fkey"
            columns: ["adjustment_note_id"]
            isOneToOne: false
            referencedRelation: "adjustment_notes"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_note_items_adjustment_note_id_fkey"
            columns: ["adjustment_note_id"]
            isOneToOne: false
            referencedRelation: "credit_notes_view"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_note_items_adjustment_note_id_fkey"
            columns: ["adjustment_note_id"]
            isOneToOne: false
            referencedRelation: "debit_notes_view"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_note_items_adjustment_note_id_fkey"
            columns: ["adjustment_note_id"]
            isOneToOne: false
            referencedRelation: "vendor_credit_notes_view"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_note_items_external_product_id_fkey"
            columns: ["external_product_id"]
            isOneToOne: false
            referencedRelation: "external_products"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_note_items_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_note_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_note_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_note_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_note_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      adjustment_notes: {
        Row: {
          applied_amount: number | null
          approved_at: string | null
          approved_by: string | null
          created_at: string
          created_by: string | null
          currency: string | null
          description: string | null
          direction: string
          discount_amount: number | null
          due_date: string | null
          exchange_rate: number | null
          gl_account_id: string | null
          id: string
          metadata: Json | null
          note_date: string
          note_number: string
          note_type: string
          notes: string | null
          original_bill_id: string | null
          original_invoice_id: string | null
          original_order_id: string | null
          party_address: string | null
          party_email: string | null
          party_id: string | null
          party_name: string | null
          party_tax_code: string | null
          reason: string | null
          reference_number: string | null
          remaining_amount: number | null
          status: string | null
          subtotal: number | null
          tax_amount: number | null
          tenant_id: string
          terms: string | null
          total_amount: number | null
          updated_at: string
        }
        Insert: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction: string
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string
          metadata?: Json | null
          note_date?: string
          note_number: string
          note_type: string
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id: string
          terms?: string | null
          total_amount?: number | null
          updated_at?: string
        }
        Update: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction?: string
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string
          metadata?: Json | null
          note_date?: string
          note_number?: string
          note_type?: string
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id?: string
          terms?: string | null
          total_amount?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "adjustment_notes_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_advisor_config: {
        Row: {
          allow_multiple_options: boolean | null
          allow_questions: boolean | null
          created_at: string | null
          default_response: string | null
          id: string
          max_actions_per_response: number | null
          min_confidence_to_speak: number | null
          min_samples_to_speak: number | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          allow_multiple_options?: boolean | null
          allow_questions?: boolean | null
          created_at?: string | null
          default_response?: string | null
          id?: string
          max_actions_per_response?: number | null
          min_confidence_to_speak?: number | null
          min_samples_to_speak?: number | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          allow_multiple_options?: boolean | null
          allow_questions?: boolean | null
          created_at?: string | null
          default_response?: string | null
          id?: string
          max_actions_per_response?: number | null
          min_confidence_to_speak?: number | null
          min_samples_to_speak?: number | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "ai_advisor_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_advisor_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_advisor_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_advisor_responses: {
        Row: {
          action_target: string | null
          action_verb: string | null
          actioned_at: string | null
          alert_id: string | null
          based_on_pattern_id: string | null
          based_on_samples: number | null
          confidence_score: number
          created_at: string | null
          decision_type: string | null
          id: string
          is_silent: boolean | null
          metric_code: string | null
          outcome_measured: boolean | null
          recommendation: string | null
          surfaced_at: string | null
          tenant_id: string
        }
        Insert: {
          action_target?: string | null
          action_verb?: string | null
          actioned_at?: string | null
          alert_id?: string | null
          based_on_pattern_id?: string | null
          based_on_samples?: number | null
          confidence_score: number
          created_at?: string | null
          decision_type?: string | null
          id?: string
          is_silent?: boolean | null
          metric_code?: string | null
          outcome_measured?: boolean | null
          recommendation?: string | null
          surfaced_at?: string | null
          tenant_id: string
        }
        Update: {
          action_target?: string | null
          action_verb?: string | null
          actioned_at?: string | null
          alert_id?: string | null
          based_on_pattern_id?: string | null
          based_on_samples?: number | null
          confidence_score?: number
          created_at?: string | null
          decision_type?: string | null
          id?: string
          is_silent?: boolean | null
          metric_code?: string | null
          outcome_measured?: boolean | null
          recommendation?: string | null
          surfaced_at?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ai_advisor_responses_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "early_warning_alerts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_active_alerts_hierarchy"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_based_on_pattern_id_fkey"
            columns: ["based_on_pattern_id"]
            isOneToOne: false
            referencedRelation: "decision_learning_patterns"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_conversations: {
        Row: {
          created_at: string | null
          id: string
          metadata: Json | null
          status: string | null
          tenant_id: string
          title: string | null
          updated_at: string | null
          user_id: string
        }
        Insert: {
          created_at?: string | null
          id?: string
          metadata?: Json | null
          status?: string | null
          tenant_id: string
          title?: string | null
          updated_at?: string | null
          user_id: string
        }
        Update: {
          created_at?: string | null
          id?: string
          metadata?: Json | null
          status?: string | null
          tenant_id?: string
          title?: string | null
          updated_at?: string | null
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ai_conversations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_conversations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_conversations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_conversations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_dimension_catalog: {
        Row: {
          created_at: string | null
          description: string | null
          dimension_name: string
          dimension_type: string
          id: string
          possible_values: Json | null
          source_column: string | null
          source_table: string | null
        }
        Insert: {
          created_at?: string | null
          description?: string | null
          dimension_name: string
          dimension_type?: string
          id?: string
          possible_values?: Json | null
          source_column?: string | null
          source_table?: string | null
        }
        Update: {
          created_at?: string | null
          description?: string | null
          dimension_name?: string
          dimension_type?: string
          id?: string
          possible_values?: Json | null
          source_column?: string | null
          source_table?: string | null
        }
        Relationships: []
      }
      ai_favorites: {
        Row: {
          category: string | null
          created_at: string | null
          id: string
          is_pinned: boolean | null
          question: string
          sql_query: string | null
          tenant_id: string
          title: string
          updated_at: string | null
          user_id: string
        }
        Insert: {
          category?: string | null
          created_at?: string | null
          id?: string
          is_pinned?: boolean | null
          question: string
          sql_query?: string | null
          tenant_id: string
          title: string
          updated_at?: string | null
          user_id: string
        }
        Update: {
          category?: string | null
          created_at?: string | null
          id?: string
          is_pinned?: boolean | null
          question?: string
          sql_query?: string | null
          tenant_id?: string
          title?: string
          updated_at?: string | null
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ai_favorites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_favorites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_favorites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_favorites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_insights: {
        Row: {
          created_at: string | null
          data: Json | null
          description: string | null
          domain: string | null
          expires_at: string | null
          id: string
          insight_type: string
          is_actionable: boolean | null
          is_read: boolean | null
          metric_code: string | null
          severity: string | null
          tenant_id: string
          title: string
        }
        Insert: {
          created_at?: string | null
          data?: Json | null
          description?: string | null
          domain?: string | null
          expires_at?: string | null
          id?: string
          insight_type: string
          is_actionable?: boolean | null
          is_read?: boolean | null
          metric_code?: string | null
          severity?: string | null
          tenant_id: string
          title: string
        }
        Update: {
          created_at?: string | null
          data?: Json | null
          description?: string | null
          domain?: string | null
          expires_at?: string | null
          id?: string
          insight_type?: string
          is_actionable?: boolean | null
          is_read?: boolean | null
          metric_code?: string | null
          severity?: string | null
          tenant_id?: string
          title?: string
        }
        Relationships: [
          {
            foreignKeyName: "ai_insights_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_insights_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_insights_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_insights_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_messages: {
        Row: {
          content: string
          conversation_id: string
          created_at: string | null
          id: string
          metadata: Json | null
          model: string | null
          query_result: Json | null
          role: string
          sql_query: string | null
          tenant_id: string
          tokens_used: number | null
        }
        Insert: {
          content: string
          conversation_id: string
          created_at?: string | null
          id?: string
          metadata?: Json | null
          model?: string | null
          query_result?: Json | null
          role: string
          sql_query?: string | null
          tenant_id: string
          tokens_used?: number | null
        }
        Update: {
          content?: string
          conversation_id?: string
          created_at?: string | null
          id?: string
          metadata?: Json | null
          model?: string | null
          query_result?: Json | null
          role?: string
          sql_query?: string | null
          tenant_id?: string
          tokens_used?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "ai_messages_conversation_id_fkey"
            columns: ["conversation_id"]
            isOneToOne: false
            referencedRelation: "ai_conversations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_metric_definitions: {
        Row: {
          category: string
          code: string
          created_at: string | null
          description: string | null
          formula: string
          id: string
          is_system: boolean | null
          name: string
          unit: string | null
        }
        Insert: {
          category: string
          code: string
          created_at?: string | null
          description?: string | null
          formula: string
          id?: string
          is_system?: boolean | null
          name: string
          unit?: string | null
        }
        Update: {
          category?: string
          code?: string
          created_at?: string | null
          description?: string | null
          formula?: string
          id?: string
          is_system?: boolean | null
          name?: string
          unit?: string | null
        }
        Relationships: []
      }
      ai_predictions: {
        Row: {
          alert_id: string | null
          confidence_score: number | null
          created_at: string | null
          decision_card_id: string | null
          expires_at: string | null
          id: string
          input_context: Json
          model_used: string | null
          prediction_result: Json
          prediction_type: string
          processing_time_ms: number | null
          tenant_id: string
          tokens_used: number | null
        }
        Insert: {
          alert_id?: string | null
          confidence_score?: number | null
          created_at?: string | null
          decision_card_id?: string | null
          expires_at?: string | null
          id?: string
          input_context?: Json
          model_used?: string | null
          prediction_result?: Json
          prediction_type: string
          processing_time_ms?: number | null
          tenant_id: string
          tokens_used?: number | null
        }
        Update: {
          alert_id?: string | null
          confidence_score?: number | null
          created_at?: string | null
          decision_card_id?: string | null
          expires_at?: string | null
          id?: string
          input_context?: Json
          model_used?: string | null
          prediction_result?: Json
          prediction_type?: string
          processing_time_ms?: number | null
          tenant_id?: string
          tokens_used?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "ai_predictions_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_predictions_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_predictions_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_predictions_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_query_history: {
        Row: {
          created_at: string | null
          execution_time_ms: number | null
          id: string
          is_successful: boolean | null
          model: string | null
          question: string
          result_summary: string | null
          sql_generated: string | null
          tenant_id: string
          tokens_used: number | null
          user_id: string
        }
        Insert: {
          created_at?: string | null
          execution_time_ms?: number | null
          id?: string
          is_successful?: boolean | null
          model?: string | null
          question: string
          result_summary?: string | null
          sql_generated?: string | null
          tenant_id: string
          tokens_used?: number | null
          user_id: string
        }
        Update: {
          created_at?: string | null
          execution_time_ms?: number | null
          id?: string
          is_successful?: boolean | null
          model?: string | null
          question?: string
          result_summary?: string | null
          sql_generated?: string | null
          tenant_id?: string
          tokens_used?: number | null
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ai_query_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_query_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_query_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_query_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ai_query_templates: {
        Row: {
          category: string
          created_at: string | null
          id: string
          intent_pattern: string
          is_active: boolean | null
          parameters: Json | null
          required_tables: string[] | null
          sql_template: string
          success_count: number | null
        }
        Insert: {
          category: string
          created_at?: string | null
          id?: string
          intent_pattern: string
          is_active?: boolean | null
          parameters?: Json | null
          required_tables?: string[] | null
          sql_template: string
          success_count?: number | null
        }
        Update: {
          category?: string
          created_at?: string | null
          id?: string
          intent_pattern?: string
          is_active?: boolean | null
          parameters?: Json | null
          required_tables?: string[] | null
          sql_template?: string
          success_count?: number | null
        }
        Relationships: []
      }
      ai_semantic_models: {
        Row: {
          columns: Json
          created_at: string | null
          entity_type: string
          id: string
          is_active: boolean | null
          relationships: Json | null
          schema_version: string | null
        }
        Insert: {
          columns?: Json
          created_at?: string | null
          entity_type: string
          id?: string
          is_active?: boolean | null
          relationships?: Json | null
          schema_version?: string | null
        }
        Update: {
          columns?: Json
          created_at?: string | null
          entity_type?: string
          id?: string
          is_active?: boolean | null
          relationships?: Json | null
          schema_version?: string | null
        }
        Relationships: []
      }
      ai_usage_logs: {
        Row: {
          completion_tokens: number
          created_at: string
          estimated_cost: number | null
          function_name: string
          id: string
          model: string
          prompt_tokens: number
          tenant_id: string | null
          total_tokens: number
          user_id: string | null
        }
        Insert: {
          completion_tokens?: number
          created_at?: string
          estimated_cost?: number | null
          function_name: string
          id?: string
          model: string
          prompt_tokens?: number
          tenant_id?: string | null
          total_tokens?: number
          user_id?: string | null
        }
        Update: {
          completion_tokens?: number
          created_at?: string
          estimated_cost?: number | null
          function_name?: string
          id?: string
          model?: string
          prompt_tokens?: number
          tenant_id?: string | null
          total_tokens?: number
          user_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "ai_usage_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_usage_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_usage_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_usage_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_calculations_log: {
        Row: {
          calculated_at: string
          calculation_type: string
          id: string
          input_values: Json
          is_triggered: boolean | null
          object_id: string | null
          output_value: number | null
          rule_id: string | null
          tenant_id: string
          threshold_value: number | null
        }
        Insert: {
          calculated_at?: string
          calculation_type: string
          id?: string
          input_values: Json
          is_triggered?: boolean | null
          object_id?: string | null
          output_value?: number | null
          rule_id?: string | null
          tenant_id: string
          threshold_value?: number | null
        }
        Update: {
          calculated_at?: string
          calculation_type?: string
          id?: string
          input_values?: Json
          is_triggered?: boolean | null
          object_id?: string | null
          output_value?: number | null
          rule_id?: string | null
          tenant_id?: string
          threshold_value?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_calculations_log_object_id_fkey"
            columns: ["object_id"]
            isOneToOne: false
            referencedRelation: "alert_objects"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_calculations_log_rule_id_fkey"
            columns: ["rule_id"]
            isOneToOne: false
            referencedRelation: "intelligent_alert_rules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_calculations_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_calculations_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_calculations_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_calculations_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_cluster_members: {
        Row: {
          added_at: string | null
          alert_id: string
          cluster_id: string
          id: string
          is_root: boolean | null
        }
        Insert: {
          added_at?: string | null
          alert_id: string
          cluster_id: string
          id?: string
          is_root?: boolean | null
        }
        Update: {
          added_at?: string | null
          alert_id?: string
          cluster_id?: string
          id?: string
          is_root?: boolean | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_cluster_members_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_cluster_members_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_cluster_members_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_cluster_members_cluster_id_fkey"
            columns: ["cluster_id"]
            isOneToOne: false
            referencedRelation: "alert_clusters"
            referencedColumns: ["id"]
          },
        ]
      }
      alert_clusters: {
        Row: {
          alert_count: number | null
          cluster_key: string
          cluster_type: string
          created_at: string | null
          id: string
          resolved_at: string | null
          root_alert_id: string | null
          severity: string | null
          status: string | null
          tenant_id: string
          total_impact_amount: number | null
          updated_at: string | null
        }
        Insert: {
          alert_count?: number | null
          cluster_key: string
          cluster_type: string
          created_at?: string | null
          id?: string
          resolved_at?: string | null
          root_alert_id?: string | null
          severity?: string | null
          status?: string | null
          tenant_id: string
          total_impact_amount?: number | null
          updated_at?: string | null
        }
        Update: {
          alert_count?: number | null
          cluster_key?: string
          cluster_type?: string
          created_at?: string | null
          id?: string
          resolved_at?: string | null
          root_alert_id?: string | null
          severity?: string | null
          status?: string | null
          tenant_id?: string
          total_impact_amount?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_clusters_root_alert_id_fkey"
            columns: ["root_alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_clusters_root_alert_id_fkey"
            columns: ["root_alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_clusters_root_alert_id_fkey"
            columns: ["root_alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_data_sources: {
        Row: {
          connector_integration_id: string | null
          created_at: string
          error_message: string | null
          id: string
          is_active: boolean | null
          last_sync_at: string | null
          next_sync_at: string | null
          source_config: Json | null
          source_name: string
          source_type: string
          sync_frequency_minutes: number | null
          sync_status: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          connector_integration_id?: string | null
          created_at?: string
          error_message?: string | null
          id?: string
          is_active?: boolean | null
          last_sync_at?: string | null
          next_sync_at?: string | null
          source_config?: Json | null
          source_name: string
          source_type: string
          sync_frequency_minutes?: number | null
          sync_status?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          connector_integration_id?: string | null
          created_at?: string
          error_message?: string | null
          id?: string
          is_active?: boolean | null
          last_sync_at?: string | null
          next_sync_at?: string | null
          source_config?: Json | null
          source_name?: string
          source_type?: string
          sync_frequency_minutes?: number | null
          sync_status?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_data_sources_connector_integration_id_fkey"
            columns: ["connector_integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_data_sources_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_data_sources_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_data_sources_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_data_sources_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_digest_configs: {
        Row: {
          created_at: string
          daily_enabled: boolean
          daily_time: string
          id: string
          include_resolved: boolean
          include_summary: boolean
          tenant_id: string
          updated_at: string
          weekly_day: number
          weekly_enabled: boolean
          weekly_time: string
        }
        Insert: {
          created_at?: string
          daily_enabled?: boolean
          daily_time?: string
          id?: string
          include_resolved?: boolean
          include_summary?: boolean
          tenant_id: string
          updated_at?: string
          weekly_day?: number
          weekly_enabled?: boolean
          weekly_time?: string
        }
        Update: {
          created_at?: string
          daily_enabled?: boolean
          daily_time?: string
          id?: string
          include_resolved?: boolean
          include_summary?: boolean
          tenant_id?: string
          updated_at?: string
          weekly_day?: number
          weekly_enabled?: boolean
          weekly_time?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_digest_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_digest_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_digest_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_digest_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_escalation_rules: {
        Row: {
          created_at: string
          escalate_after_minutes: number
          escalate_to_role: string
          id: string
          is_active: boolean
          name: string
          notify_channels: Json
          severity: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          created_at?: string
          escalate_after_minutes?: number
          escalate_to_role?: string
          id?: string
          is_active?: boolean
          name: string
          notify_channels?: Json
          severity?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          created_at?: string
          escalate_after_minutes?: number
          escalate_to_role?: string
          id?: string
          is_active?: boolean
          name?: string
          notify_channels?: Json
          severity?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_escalations: {
        Row: {
          alert_id: string
          created_at: string | null
          escalated_at: string | null
          escalated_to_role: string
          escalation_reason: string | null
          id: string
          original_owner: string | null
          resolution_notes: string | null
          resolution_status: string | null
          resolved_at: string | null
          resolved_by: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          alert_id: string
          created_at?: string | null
          escalated_at?: string | null
          escalated_to_role: string
          escalation_reason?: string | null
          id?: string
          original_owner?: string | null
          resolution_notes?: string | null
          resolution_status?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          alert_id?: string
          created_at?: string | null
          escalated_at?: string | null
          escalated_to_role?: string
          escalation_reason?: string | null
          id?: string
          original_owner?: string | null
          resolution_notes?: string | null
          resolution_status?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_escalations_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_escalations_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_escalations_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_escalations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_escalations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_escalations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_escalations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_hierarchy_rules: {
        Row: {
          child_metric_code: string
          collapse_threshold: number | null
          created_at: string | null
          hierarchy_level: number
          id: string
          parent_metric_code: string
          root_cause_template: string | null
        }
        Insert: {
          child_metric_code: string
          collapse_threshold?: number | null
          created_at?: string | null
          hierarchy_level: number
          id?: string
          parent_metric_code: string
          root_cause_template?: string | null
        }
        Update: {
          child_metric_code?: string
          collapse_threshold?: number | null
          created_at?: string | null
          hierarchy_level?: number
          id?: string
          parent_metric_code?: string
          root_cause_template?: string | null
        }
        Relationships: []
      }
      alert_instances: {
        Row: {
          acknowledged_at: string | null
          acknowledged_by: string | null
          action_priority: string | null
          action_url: string | null
          alert_config_id: string | null
          alert_object_id: string | null
          alert_type: string
          assigned_at: string | null
          assigned_to: string | null
          auto_action_available: boolean | null
          calculation_details: Json | null
          category: string
          change_percent: number | null
          created_at: string
          current_value: number | null
          data_source_id: string | null
          deadline_at: string | null
          evidence_pack_id: string | null
          external_object_id: string | null
          id: string
          impact_amount: number | null
          impact_currency: string | null
          impact_description: string | null
          linked_decision_card_id: string | null
          message: string | null
          metadata: Json | null
          metric_name: string | null
          notification_channels: Json | null
          notification_sent: boolean | null
          object_name: string | null
          object_type: string | null
          priority: number | null
          related_alerts: string[] | null
          resolution_notes: string | null
          resolved_at: string | null
          resolved_by: string | null
          resolved_by_decision: boolean | null
          sent_at: string | null
          sent_to: Json | null
          severity: string
          snoozed_until: string | null
          status: string | null
          suggested_action: string | null
          tenant_id: string
          threshold_operator: string | null
          threshold_value: number | null
          time_to_resolve_hours: number | null
          title: string
          updated_at: string
        }
        Insert: {
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          action_priority?: string | null
          action_url?: string | null
          alert_config_id?: string | null
          alert_object_id?: string | null
          alert_type: string
          assigned_at?: string | null
          assigned_to?: string | null
          auto_action_available?: boolean | null
          calculation_details?: Json | null
          category: string
          change_percent?: number | null
          created_at?: string
          current_value?: number | null
          data_source_id?: string | null
          deadline_at?: string | null
          evidence_pack_id?: string | null
          external_object_id?: string | null
          id?: string
          impact_amount?: number | null
          impact_currency?: string | null
          impact_description?: string | null
          linked_decision_card_id?: string | null
          message?: string | null
          metadata?: Json | null
          metric_name?: string | null
          notification_channels?: Json | null
          notification_sent?: boolean | null
          object_name?: string | null
          object_type?: string | null
          priority?: number | null
          related_alerts?: string[] | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          resolved_by_decision?: boolean | null
          sent_at?: string | null
          sent_to?: Json | null
          severity?: string
          snoozed_until?: string | null
          status?: string | null
          suggested_action?: string | null
          tenant_id: string
          threshold_operator?: string | null
          threshold_value?: number | null
          time_to_resolve_hours?: number | null
          title: string
          updated_at?: string
        }
        Update: {
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          action_priority?: string | null
          action_url?: string | null
          alert_config_id?: string | null
          alert_object_id?: string | null
          alert_type?: string
          assigned_at?: string | null
          assigned_to?: string | null
          auto_action_available?: boolean | null
          calculation_details?: Json | null
          category?: string
          change_percent?: number | null
          created_at?: string
          current_value?: number | null
          data_source_id?: string | null
          deadline_at?: string | null
          evidence_pack_id?: string | null
          external_object_id?: string | null
          id?: string
          impact_amount?: number | null
          impact_currency?: string | null
          impact_description?: string | null
          linked_decision_card_id?: string | null
          message?: string | null
          metadata?: Json | null
          metric_name?: string | null
          notification_channels?: Json | null
          notification_sent?: boolean | null
          object_name?: string | null
          object_type?: string | null
          priority?: number | null
          related_alerts?: string[] | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          resolved_by_decision?: boolean | null
          sent_at?: string | null
          sent_to?: Json | null
          severity?: string
          snoozed_until?: string | null
          status?: string | null
          suggested_action?: string | null
          tenant_id?: string
          threshold_operator?: string | null
          threshold_value?: number | null
          time_to_resolve_hours?: number | null
          title?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_instances_alert_config_id_fkey"
            columns: ["alert_config_id"]
            isOneToOne: false
            referencedRelation: "extended_alert_configs"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_alert_object_id_fkey"
            columns: ["alert_object_id"]
            isOneToOne: false
            referencedRelation: "alert_objects"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_data_source_id_fkey"
            columns: ["data_source_id"]
            isOneToOne: false
            referencedRelation: "alert_data_sources"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_evidence_pack_id_fkey"
            columns: ["evidence_pack_id"]
            isOneToOne: false
            referencedRelation: "evidence_packs"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_notification_logs: {
        Row: {
          alert_instance_id: string
          channel: string
          created_at: string
          delivered_at: string | null
          error_message: string | null
          id: string
          metadata: Json | null
          recipient: string
          sent_at: string | null
          status: string | null
          tenant_id: string
        }
        Insert: {
          alert_instance_id: string
          channel: string
          created_at?: string
          delivered_at?: string | null
          error_message?: string | null
          id?: string
          metadata?: Json | null
          recipient: string
          sent_at?: string | null
          status?: string | null
          tenant_id: string
        }
        Update: {
          alert_instance_id?: string
          channel?: string
          created_at?: string
          delivered_at?: string | null
          error_message?: string | null
          id?: string
          metadata?: Json | null
          recipient?: string
          sent_at?: string | null
          status?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_notification_logs_alert_instance_id_fkey"
            columns: ["alert_instance_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_notification_logs_alert_instance_id_fkey"
            columns: ["alert_instance_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_notification_logs_alert_instance_id_fkey"
            columns: ["alert_instance_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_notification_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_notification_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_notification_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_notification_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_object_metrics: {
        Row: {
          alert_object_id: string
          change_percent: number | null
          comparison_value: number | null
          created_at: string
          id: string
          is_threshold_breached: boolean | null
          metric_name: string
          metric_period: string | null
          metric_unit: string | null
          metric_value: number | null
          recorded_at: string
          tenant_id: string
          threshold_config_id: string | null
        }
        Insert: {
          alert_object_id: string
          change_percent?: number | null
          comparison_value?: number | null
          created_at?: string
          id?: string
          is_threshold_breached?: boolean | null
          metric_name: string
          metric_period?: string | null
          metric_unit?: string | null
          metric_value?: number | null
          recorded_at?: string
          tenant_id: string
          threshold_config_id?: string | null
        }
        Update: {
          alert_object_id?: string
          change_percent?: number | null
          comparison_value?: number | null
          created_at?: string
          id?: string
          is_threshold_breached?: boolean | null
          metric_name?: string
          metric_period?: string | null
          metric_unit?: string | null
          metric_value?: number | null
          recorded_at?: string
          tenant_id?: string
          threshold_config_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_object_metrics_alert_object_id_fkey"
            columns: ["alert_object_id"]
            isOneToOne: false
            referencedRelation: "alert_objects"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_object_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_object_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_object_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_object_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_object_metrics_threshold_config_id_fkey"
            columns: ["threshold_config_id"]
            isOneToOne: false
            referencedRelation: "extended_alert_configs"
            referencedColumns: ["id"]
          },
        ]
      }
      alert_objects: {
        Row: {
          address: string | null
          alert_status: string | null
          avg_daily_sales: number | null
          created_at: string
          current_metrics: Json | null
          data_source_id: string | null
          days_of_stock: number | null
          external_id: string | null
          id: string
          is_monitored: boolean | null
          last_alert_at: string | null
          last_sale_date: string | null
          lead_time_days: number | null
          manager_name: string | null
          metadata: Json | null
          object_category: string | null
          object_data: Json | null
          object_name: string
          object_type: string
          open_hours: string | null
          phone: string | null
          previous_metrics: Json | null
          reorder_point: number | null
          safety_stock: number | null
          sales_velocity: number | null
          stockout_risk_days: number | null
          synced_at: string | null
          tenant_id: string
          threshold_overrides: Json | null
          trend_direction: string | null
          trend_percent: number | null
          updated_at: string
        }
        Insert: {
          address?: string | null
          alert_status?: string | null
          avg_daily_sales?: number | null
          created_at?: string
          current_metrics?: Json | null
          data_source_id?: string | null
          days_of_stock?: number | null
          external_id?: string | null
          id?: string
          is_monitored?: boolean | null
          last_alert_at?: string | null
          last_sale_date?: string | null
          lead_time_days?: number | null
          manager_name?: string | null
          metadata?: Json | null
          object_category?: string | null
          object_data?: Json | null
          object_name: string
          object_type: string
          open_hours?: string | null
          phone?: string | null
          previous_metrics?: Json | null
          reorder_point?: number | null
          safety_stock?: number | null
          sales_velocity?: number | null
          stockout_risk_days?: number | null
          synced_at?: string | null
          tenant_id: string
          threshold_overrides?: Json | null
          trend_direction?: string | null
          trend_percent?: number | null
          updated_at?: string
        }
        Update: {
          address?: string | null
          alert_status?: string | null
          avg_daily_sales?: number | null
          created_at?: string
          current_metrics?: Json | null
          data_source_id?: string | null
          days_of_stock?: number | null
          external_id?: string | null
          id?: string
          is_monitored?: boolean | null
          last_alert_at?: string | null
          last_sale_date?: string | null
          lead_time_days?: number | null
          manager_name?: string | null
          metadata?: Json | null
          object_category?: string | null
          object_data?: Json | null
          object_name?: string
          object_type?: string
          open_hours?: string | null
          phone?: string | null
          previous_metrics?: Json | null
          reorder_point?: number | null
          safety_stock?: number | null
          sales_velocity?: number | null
          stockout_risk_days?: number | null
          synced_at?: string | null
          tenant_id?: string
          threshold_overrides?: Json | null
          trend_direction?: string | null
          trend_percent?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_objects_data_source_id_fkey"
            columns: ["data_source_id"]
            isOneToOne: false
            referencedRelation: "alert_data_sources"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_objects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_objects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_objects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_objects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_resolutions: {
        Row: {
          actions_taken: Json | null
          alert_id: string
          assigned_at: string | null
          assigned_to: string | null
          created_at: string
          follow_up_date: string | null
          follow_up_required: boolean | null
          id: string
          metadata: Json | null
          resolution_notes: string | null
          resolution_status: string
          resolution_type: string | null
          resolved_at: string | null
          resolved_by: string | null
          root_cause: string | null
          started_at: string | null
          tenant_id: string
          time_to_resolve_minutes: number | null
          updated_at: string
        }
        Insert: {
          actions_taken?: Json | null
          alert_id: string
          assigned_at?: string | null
          assigned_to?: string | null
          created_at?: string
          follow_up_date?: string | null
          follow_up_required?: boolean | null
          id?: string
          metadata?: Json | null
          resolution_notes?: string | null
          resolution_status?: string
          resolution_type?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          root_cause?: string | null
          started_at?: string | null
          tenant_id: string
          time_to_resolve_minutes?: number | null
          updated_at?: string
        }
        Update: {
          actions_taken?: Json | null
          alert_id?: string
          assigned_at?: string | null
          assigned_to?: string | null
          created_at?: string
          follow_up_date?: string | null
          follow_up_required?: boolean | null
          id?: string
          metadata?: Json | null
          resolution_notes?: string | null
          resolution_status?: string
          resolution_type?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          root_cause?: string | null
          started_at?: string | null
          tenant_id?: string
          time_to_resolve_minutes?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_resolutions_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_resolutions_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_resolutions_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_resolutions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_resolutions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_resolutions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_resolutions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_rule_recipients: {
        Row: {
          created_at: string | null
          id: string
          notify_on_critical: boolean | null
          notify_on_info: boolean | null
          notify_on_warning: boolean | null
          recipient_id: string
          rule_id: string
          tenant_id: string
        }
        Insert: {
          created_at?: string | null
          id?: string
          notify_on_critical?: boolean | null
          notify_on_info?: boolean | null
          notify_on_warning?: boolean | null
          recipient_id: string
          rule_id: string
          tenant_id: string
        }
        Update: {
          created_at?: string | null
          id?: string
          notify_on_critical?: boolean | null
          notify_on_info?: boolean | null
          notify_on_warning?: boolean | null
          recipient_id?: string
          rule_id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_rule_recipients_recipient_id_fkey"
            columns: ["recipient_id"]
            isOneToOne: false
            referencedRelation: "notification_recipients"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_rule_recipients_rule_id_fkey"
            columns: ["rule_id"]
            isOneToOne: false
            referencedRelation: "intelligent_alert_rules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_rule_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_rule_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_rule_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_rule_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_rule_templates: {
        Row: {
          category: string
          code: string
          condition_template: string
          created_at: string | null
          decision_framing: Json | null
          id: string
          name: string
          severity_default: string | null
          suggested_actions: string[] | null
        }
        Insert: {
          category: string
          code: string
          condition_template: string
          created_at?: string | null
          decision_framing?: Json | null
          id?: string
          name: string
          severity_default?: string | null
          suggested_actions?: string[] | null
        }
        Update: {
          category?: string
          code?: string
          condition_template?: string
          created_at?: string | null
          decision_framing?: Json | null
          id?: string
          name?: string
          severity_default?: string | null
          suggested_actions?: string[] | null
        }
        Relationships: []
      }
      alert_rules: {
        Row: {
          category: string
          condition_config: Json
          condition_type: string
          cooldown_minutes: number | null
          created_at: string | null
          description: string | null
          id: string
          is_active: boolean | null
          metric_code: string | null
          notification_channels: Json | null
          owner_role: string | null
          rule_code: string
          rule_name: string
          severity: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          category: string
          condition_config?: Json
          condition_type: string
          cooldown_minutes?: number | null
          created_at?: string | null
          description?: string | null
          id?: string
          is_active?: boolean | null
          metric_code?: string | null
          notification_channels?: Json | null
          owner_role?: string | null
          rule_code: string
          rule_name: string
          severity?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          category?: string
          condition_config?: Json
          condition_type?: string
          cooldown_minutes?: number | null
          created_at?: string | null
          description?: string | null
          id?: string
          is_active?: boolean | null
          metric_code?: string | null
          notification_channels?: Json | null
          owner_role?: string | null
          rule_code?: string
          rule_name?: string
          severity?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alert_settings: {
        Row: {
          alert_configs: Json
          created_at: string
          email_address: string | null
          id: string
          notification_email: boolean | null
          notification_push: boolean | null
          notification_slack: boolean | null
          notify_daily_summary: boolean | null
          notify_immediately: boolean | null
          notify_weekly_summary: boolean | null
          slack_webhook: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          alert_configs?: Json
          created_at?: string
          email_address?: string | null
          id?: string
          notification_email?: boolean | null
          notification_push?: boolean | null
          notification_slack?: boolean | null
          notify_daily_summary?: boolean | null
          notify_immediately?: boolean | null
          notify_weekly_summary?: boolean | null
          slack_webhook?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          alert_configs?: Json
          created_at?: string
          email_address?: string | null
          id?: string
          notification_email?: boolean | null
          notification_push?: boolean | null
          notification_slack?: boolean | null
          notify_daily_summary?: boolean | null
          notify_immediately?: boolean | null
          notify_weekly_summary?: boolean | null
          slack_webhook?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "alert_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      alerts: {
        Row: {
          alert_type: string
          created_at: string
          entity_id: string | null
          entity_type: string | null
          id: string
          is_read: boolean | null
          message: string | null
          severity: string | null
          tenant_id: string | null
          title: string
        }
        Insert: {
          alert_type: string
          created_at?: string
          entity_id?: string | null
          entity_type?: string | null
          id?: string
          is_read?: boolean | null
          message?: string | null
          severity?: string | null
          tenant_id?: string | null
          title: string
        }
        Update: {
          alert_type?: string
          created_at?: string
          entity_id?: string | null
          entity_type?: string | null
          id?: string
          is_read?: boolean | null
          message?: string | null
          severity?: string | null
          tenant_id?: string | null
          title?: string
        }
        Relationships: [
          {
            foreignKeyName: "alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      api_keys: {
        Row: {
          created_at: string
          created_by: string | null
          expires_at: string | null
          id: string
          key_hash: string
          key_prefix: string
          last_used_at: string | null
          name: string
          requests_count: number | null
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          created_at?: string
          created_by?: string | null
          expires_at?: string | null
          id?: string
          key_hash: string
          key_prefix: string
          last_used_at?: string | null
          name: string
          requests_count?: number | null
          status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          created_at?: string
          created_by?: string | null
          expires_at?: string | null
          id?: string
          key_hash?: string
          key_prefix?: string
          last_used_at?: string | null
          name?: string
          requests_count?: number | null
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "api_keys_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "api_keys_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "api_keys_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "api_keys_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      approval_decisions: {
        Row: {
          approval_request_id: string
          comment: string | null
          decided_at: string
          decided_by: string
          decision: string
          id: string
          tenant_id: string
        }
        Insert: {
          approval_request_id: string
          comment?: string | null
          decided_at?: string
          decided_by: string
          decision: string
          id?: string
          tenant_id: string
        }
        Update: {
          approval_request_id?: string
          comment?: string | null
          decided_at?: string
          decided_by?: string
          decision?: string
          id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "approval_decisions_approval_request_id_fkey"
            columns: ["approval_request_id"]
            isOneToOne: false
            referencedRelation: "approval_requests"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_decisions_approval_request_id_fkey"
            columns: ["approval_request_id"]
            isOneToOne: false
            referencedRelation: "mv_audit_approval_evidence"
            referencedColumns: ["approval_request_id"]
          },
          {
            foreignKeyName: "approval_decisions_approval_request_id_fkey"
            columns: ["approval_request_id"]
            isOneToOne: false
            referencedRelation: "v_pending_approvals"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      approval_requests: {
        Row: {
          action: string
          created_at: string
          current_approvals: number
          expires_at: string | null
          id: string
          policy_id: string
          requested_by: string
          required_approvals: number
          resolved_at: string | null
          resource_data: Json | null
          resource_id: string | null
          resource_type: string
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          action: string
          created_at?: string
          current_approvals?: number
          expires_at?: string | null
          id?: string
          policy_id: string
          requested_by: string
          required_approvals?: number
          resolved_at?: string | null
          resource_data?: Json | null
          resource_id?: string | null
          resource_type: string
          status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          action?: string
          created_at?: string
          current_approvals?: number
          expires_at?: string | null
          id?: string
          policy_id?: string
          requested_by?: string
          required_approvals?: number
          resolved_at?: string | null
          resource_data?: Json | null
          resource_id?: string | null
          resource_type?: string
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "approval_requests_policy_id_fkey"
            columns: ["policy_id"]
            isOneToOne: false
            referencedRelation: "enterprise_policies"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      audit_events: {
        Row: {
          action: string
          actor_id: string | null
          actor_role: string | null
          actor_service_id: string | null
          actor_type: string
          actor_user_id: string | null
          after_state: Json | null
          before_state: Json | null
          created_at: string
          decision_context: string | null
          evidence_hash: string | null
          id: string
          ip_address: string | null
          reason_code: string | null
          reason_detail: string | null
          resource_id: string | null
          resource_type: string
          session_id: string | null
          tenant_id: string
        }
        Insert: {
          action: string
          actor_id?: string | null
          actor_role?: string | null
          actor_service_id?: string | null
          actor_type: string
          actor_user_id?: string | null
          after_state?: Json | null
          before_state?: Json | null
          created_at?: string
          decision_context?: string | null
          evidence_hash?: string | null
          id?: string
          ip_address?: string | null
          reason_code?: string | null
          reason_detail?: string | null
          resource_id?: string | null
          resource_type: string
          session_id?: string | null
          tenant_id: string
        }
        Update: {
          action?: string
          actor_id?: string | null
          actor_role?: string | null
          actor_service_id?: string | null
          actor_type?: string
          actor_user_id?: string | null
          after_state?: Json | null
          before_state?: Json | null
          created_at?: string
          decision_context?: string | null
          evidence_hash?: string | null
          id?: string
          ip_address?: string | null
          reason_code?: string | null
          reason_detail?: string | null
          resource_id?: string | null
          resource_type?: string
          session_id?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "audit_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "audit_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "audit_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "audit_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      audit_exports: {
        Row: {
          completed_at: string | null
          created_at: string
          download_url: string | null
          expires_at: string | null
          export_type: string
          file_hash: string | null
          filters: Json | null
          id: string
          period_end: string
          period_start: string
          record_count: number
          requested_by: string
          status: string
          tenant_id: string
        }
        Insert: {
          completed_at?: string | null
          created_at?: string
          download_url?: string | null
          expires_at?: string | null
          export_type: string
          file_hash?: string | null
          filters?: Json | null
          id?: string
          period_end: string
          period_start: string
          record_count?: number
          requested_by: string
          status?: string
          tenant_id: string
        }
        Update: {
          completed_at?: string | null
          created_at?: string
          download_url?: string | null
          expires_at?: string | null
          export_type?: string
          file_hash?: string | null
          filters?: Json | null
          id?: string
          period_end?: string
          period_start?: string
          record_count?: number
          requested_by?: string
          status?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "audit_exports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "audit_exports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "audit_exports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "audit_exports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      audit_logs: {
        Row: {
          action: string
          created_at: string
          entity_id: string | null
          entity_type: string | null
          id: string
          ip_address: string | null
          new_values: Json | null
          old_values: Json | null
          tenant_id: string | null
          user_id: string | null
        }
        Insert: {
          action: string
          created_at?: string
          entity_id?: string | null
          entity_type?: string | null
          id?: string
          ip_address?: string | null
          new_values?: Json | null
          old_values?: Json | null
          tenant_id?: string | null
          user_id?: string | null
        }
        Update: {
          action?: string
          created_at?: string
          entity_id?: string | null
          entity_type?: string | null
          id?: string
          ip_address?: string | null
          new_values?: Json | null
          old_values?: Json | null
          tenant_id?: string | null
          user_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "audit_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "audit_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "audit_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "audit_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      auditor_access: {
        Row: {
          access_scope: string[]
          created_at: string
          expires_at: string | null
          granted_at: string
          granted_by: string
          id: string
          is_active: boolean
          notes: string | null
          tenant_id: string
          user_id: string
        }
        Insert: {
          access_scope?: string[]
          created_at?: string
          expires_at?: string | null
          granted_at?: string
          granted_by: string
          id?: string
          is_active?: boolean
          notes?: string | null
          tenant_id: string
          user_id: string
        }
        Update: {
          access_scope?: string[]
          created_at?: string
          expires_at?: string | null
          granted_at?: string
          granted_by?: string
          id?: string
          is_active?: boolean
          notes?: string | null
          tenant_id?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "auditor_access_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "auditor_access_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "auditor_access_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "auditor_access_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      auto_decision_card_states: {
        Row: {
          auto_card_id: string
          card_snapshot: Json | null
          comment: string | null
          created_at: string
          decided_at: string | null
          decided_by: string | null
          dismiss_reason: string | null
          id: string
          snoozed_until: string | null
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          auto_card_id: string
          card_snapshot?: Json | null
          comment?: string | null
          created_at?: string
          decided_at?: string | null
          decided_by?: string | null
          dismiss_reason?: string | null
          id?: string
          snoozed_until?: string | null
          status: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          auto_card_id?: string
          card_snapshot?: Json | null
          comment?: string | null
          created_at?: string
          decided_at?: string | null
          decided_by?: string | null
          dismiss_reason?: string | null
          id?: string
          snoozed_until?: string | null
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: []
      }
      backfill_source_progress: {
        Row: {
          completed_at: string | null
          created_at: string | null
          dataset: string
          error_message: string | null
          id: string
          job_id: string
          last_offset: number | null
          processed_records: number | null
          source_name: string
          started_at: string | null
          status: string | null
          table_name: string
          total_records: number | null
        }
        Insert: {
          completed_at?: string | null
          created_at?: string | null
          dataset: string
          error_message?: string | null
          id?: string
          job_id: string
          last_offset?: number | null
          processed_records?: number | null
          source_name: string
          started_at?: string | null
          status?: string | null
          table_name: string
          total_records?: number | null
        }
        Update: {
          completed_at?: string | null
          created_at?: string | null
          dataset?: string
          error_message?: string | null
          id?: string
          job_id?: string
          last_offset?: number | null
          processed_records?: number | null
          source_name?: string
          started_at?: string | null
          status?: string | null
          table_name?: string
          total_records?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "backfill_source_progress_job_id_fkey"
            columns: ["job_id"]
            isOneToOne: false
            referencedRelation: "bigquery_backfill_jobs"
            referencedColumns: ["id"]
          },
        ]
      }
      bank_accounts: {
        Row: {
          account_name: string | null
          account_number: string
          bank_name: string
          created_at: string
          currency: string | null
          current_balance: number | null
          id: string
          last_sync_at: string | null
          status: string | null
          tenant_id: string | null
        }
        Insert: {
          account_name?: string | null
          account_number: string
          bank_name: string
          created_at?: string
          currency?: string | null
          current_balance?: number | null
          id?: string
          last_sync_at?: string | null
          status?: string | null
          tenant_id?: string | null
        }
        Update: {
          account_name?: string | null
          account_number?: string
          bank_name?: string
          created_at?: string
          currency?: string | null
          current_balance?: number | null
          id?: string
          last_sync_at?: string | null
          status?: string | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bank_connection_configs: {
        Row: {
          bank_code: string
          bank_name: string
          connection_type: string
          created_at: string
          created_by: string | null
          credentials_encrypted: string | null
          id: string
          is_configured: boolean | null
          last_sync_at: string | null
          status: string
          tenant_id: string
          transaction_count: number | null
          updated_at: string
        }
        Insert: {
          bank_code: string
          bank_name: string
          connection_type?: string
          created_at?: string
          created_by?: string | null
          credentials_encrypted?: string | null
          id?: string
          is_configured?: boolean | null
          last_sync_at?: string | null
          status?: string
          tenant_id: string
          transaction_count?: number | null
          updated_at?: string
        }
        Update: {
          bank_code?: string
          bank_name?: string
          connection_type?: string
          created_at?: string
          created_by?: string | null
          credentials_encrypted?: string | null
          id?: string
          is_configured?: boolean | null
          last_sync_at?: string | null
          status?: string
          tenant_id?: string
          transaction_count?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "bank_connection_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_connection_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_connection_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_connection_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bank_covenants: {
        Row: {
          compliance_margin: number | null
          covenant_name: string
          covenant_type: string
          created_at: string
          current_value: number | null
          id: string
          is_active: boolean | null
          last_measured_at: string | null
          lender_name: string
          measurement_frequency: string | null
          next_measurement_date: string | null
          notes: string | null
          status: string | null
          tenant_id: string
          threshold_operator: string
          threshold_value: number
          updated_at: string
          waiver_end_date: string | null
          waiver_notes: string | null
          warning_threshold: number | null
        }
        Insert: {
          compliance_margin?: number | null
          covenant_name: string
          covenant_type: string
          created_at?: string
          current_value?: number | null
          id?: string
          is_active?: boolean | null
          last_measured_at?: string | null
          lender_name: string
          measurement_frequency?: string | null
          next_measurement_date?: string | null
          notes?: string | null
          status?: string | null
          tenant_id: string
          threshold_operator?: string
          threshold_value: number
          updated_at?: string
          waiver_end_date?: string | null
          waiver_notes?: string | null
          warning_threshold?: number | null
        }
        Update: {
          compliance_margin?: number | null
          covenant_name?: string
          covenant_type?: string
          created_at?: string
          current_value?: number | null
          id?: string
          is_active?: boolean | null
          last_measured_at?: string | null
          lender_name?: string
          measurement_frequency?: string | null
          next_measurement_date?: string | null
          notes?: string | null
          status?: string | null
          tenant_id?: string
          threshold_operator?: string
          threshold_value?: number
          updated_at?: string
          waiver_end_date?: string | null
          waiver_notes?: string | null
          warning_threshold?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "bank_covenants_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_covenants_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_covenants_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_covenants_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bank_transactions: {
        Row: {
          amount: number
          bank_account_id: string | null
          created_at: string
          description: string | null
          id: string
          match_status: string | null
          matched_invoice_id: string | null
          reference: string | null
          tenant_id: string | null
          transaction_date: string
          transaction_type: string
        }
        Insert: {
          amount: number
          bank_account_id?: string | null
          created_at?: string
          description?: string | null
          id?: string
          match_status?: string | null
          matched_invoice_id?: string | null
          reference?: string | null
          tenant_id?: string | null
          transaction_date: string
          transaction_type: string
        }
        Update: {
          amount?: number
          bank_account_id?: string | null
          created_at?: string
          description?: string | null
          id?: string
          match_status?: string | null
          matched_invoice_id?: string | null
          reference?: string | null
          tenant_id?: string | null
          transaction_date?: string
          transaction_type?: string
        }
        Relationships: [
          {
            foreignKeyName: "bank_transactions_bank_account_id_fkey"
            columns: ["bank_account_id"]
            isOneToOne: false
            referencedRelation: "bank_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_transactions_bank_account_id_fkey"
            columns: ["bank_account_id"]
            isOneToOne: false
            referencedRelation: "cash_position"
            referencedColumns: ["bank_account_id"]
          },
          {
            foreignKeyName: "bank_transactions_matched_invoice_id_fkey"
            columns: ["matched_invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "bank_transactions_matched_invoice_id_fkey"
            columns: ["matched_invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_transactions_matched_invoice_id_fkey"
            columns: ["matched_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_transactions_matched_invoice_id_fkey"
            columns: ["matched_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "bank_transactions_matched_invoice_id_fkey"
            columns: ["matched_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bigquery_backfill_jobs: {
        Row: {
          completed_at: string | null
          created_at: string | null
          error_message: string | null
          failed_records: number | null
          id: string
          last_processed_date: string | null
          last_watermark: string | null
          metadata: Json | null
          model_type: string
          processed_records: number | null
          source_table: string
          started_at: string | null
          status: string
          tenant_id: string
          total_records: number | null
          updated_at: string | null
        }
        Insert: {
          completed_at?: string | null
          created_at?: string | null
          error_message?: string | null
          failed_records?: number | null
          id?: string
          last_processed_date?: string | null
          last_watermark?: string | null
          metadata?: Json | null
          model_type: string
          processed_records?: number | null
          source_table: string
          started_at?: string | null
          status?: string
          tenant_id: string
          total_records?: number | null
          updated_at?: string | null
        }
        Update: {
          completed_at?: string | null
          created_at?: string | null
          error_message?: string | null
          failed_records?: number | null
          id?: string
          last_processed_date?: string | null
          last_watermark?: string | null
          metadata?: Json | null
          model_type?: string
          processed_records?: number | null
          source_table?: string
          started_at?: string | null
          status?: string
          tenant_id?: string
          total_records?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "bigquery_backfill_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bigquery_backfill_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_backfill_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_backfill_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bigquery_configs: {
        Row: {
          cache_ttl_minutes: number | null
          channels: Json
          created_at: string
          custom_mappings: Json | null
          dataset_prefix: string
          id: string
          is_active: boolean | null
          project_id: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          cache_ttl_minutes?: number | null
          channels?: Json
          created_at?: string
          custom_mappings?: Json | null
          dataset_prefix?: string
          id?: string
          is_active?: boolean | null
          project_id?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          cache_ttl_minutes?: number | null
          channels?: Json
          created_at?: string
          custom_mappings?: Json | null
          dataset_prefix?: string
          id?: string
          is_active?: boolean | null
          project_id?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "bigquery_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bigquery_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bigquery_data_models: {
        Row: {
          bigquery_dataset: string
          bigquery_table: string
          created_at: string
          description: string | null
          id: string
          is_enabled: boolean | null
          last_sync_at: string | null
          mapping_config: Json | null
          model_label: string
          model_name: string
          primary_key_field: string
          sync_frequency_hours: number | null
          target_table: string | null
          tenant_id: string
          timestamp_field: string | null
          updated_at: string
        }
        Insert: {
          bigquery_dataset: string
          bigquery_table: string
          created_at?: string
          description?: string | null
          id?: string
          is_enabled?: boolean | null
          last_sync_at?: string | null
          mapping_config?: Json | null
          model_label: string
          model_name: string
          primary_key_field: string
          sync_frequency_hours?: number | null
          target_table?: string | null
          tenant_id: string
          timestamp_field?: string | null
          updated_at?: string
        }
        Update: {
          bigquery_dataset?: string
          bigquery_table?: string
          created_at?: string
          description?: string | null
          id?: string
          is_enabled?: boolean | null
          last_sync_at?: string | null
          mapping_config?: Json | null
          model_label?: string
          model_name?: string
          primary_key_field?: string
          sync_frequency_hours?: number | null
          target_table?: string | null
          tenant_id?: string
          timestamp_field?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "bigquery_data_models_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bigquery_data_models_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_data_models_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_data_models_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bigquery_query_cache: {
        Row: {
          cached_at: string
          date_range_end: string | null
          date_range_start: string | null
          expires_at: string
          id: string
          is_valid: boolean | null
          query_hash: string
          query_type: string
          result_data: Json
          tenant_id: string
        }
        Insert: {
          cached_at?: string
          date_range_end?: string | null
          date_range_start?: string | null
          expires_at: string
          id?: string
          is_valid?: boolean | null
          query_hash: string
          query_type: string
          result_data: Json
          tenant_id: string
        }
        Update: {
          cached_at?: string
          date_range_end?: string | null
          date_range_start?: string | null
          expires_at?: string
          id?: string
          is_valid?: boolean | null
          query_hash?: string
          query_type?: string
          result_data?: Json
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "bigquery_query_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bigquery_query_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_query_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_query_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bigquery_sync_watermarks: {
        Row: {
          channel: string | null
          created_at: string
          data_model: string
          dataset_id: string
          error_message: string | null
          id: string
          last_record_id: string | null
          last_record_timestamp: string | null
          last_sync_at: string | null
          sync_status: string | null
          table_id: string
          tenant_id: string
          total_records_synced: number | null
          updated_at: string
        }
        Insert: {
          channel?: string | null
          created_at?: string
          data_model: string
          dataset_id: string
          error_message?: string | null
          id?: string
          last_record_id?: string | null
          last_record_timestamp?: string | null
          last_sync_at?: string | null
          sync_status?: string | null
          table_id: string
          tenant_id: string
          total_records_synced?: number | null
          updated_at?: string
        }
        Update: {
          channel?: string | null
          created_at?: string
          data_model?: string
          dataset_id?: string
          error_message?: string | null
          id?: string
          last_record_id?: string | null
          last_record_timestamp?: string | null
          last_sync_at?: string | null
          sync_status?: string | null
          table_id?: string
          tenant_id?: string
          total_records_synced?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "bigquery_sync_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bigquery_sync_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_sync_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bigquery_sync_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bill_items: {
        Row: {
          amount: number
          bill_id: string
          created_at: string
          description: string
          gl_account_id: string | null
          id: string
          product_id: string | null
          quantity: number
          tenant_id: string
          unit_price: number
          vat_rate: number | null
        }
        Insert: {
          amount?: number
          bill_id: string
          created_at?: string
          description: string
          gl_account_id?: string | null
          id?: string
          product_id?: string | null
          quantity?: number
          tenant_id: string
          unit_price?: number
          vat_rate?: number | null
        }
        Update: {
          amount?: number
          bill_id?: string
          created_at?: string
          description?: string
          gl_account_id?: string | null
          id?: string
          product_id?: string | null
          quantity?: number
          tenant_id?: string
          unit_price?: number
          vat_rate?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "bill_items_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "bill_items_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bill_items_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bill_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bill_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bill_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bill_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      bills: {
        Row: {
          approved_at: string | null
          approved_by: string | null
          bill_date: string
          bill_number: string
          cost_center_id: string | null
          created_at: string
          created_by: string | null
          credit_note_amount: number | null
          currency_code: string | null
          discount_amount: number | null
          due_date: string
          exchange_rate: number | null
          expense_category: string | null
          gl_account_id: string | null
          id: string
          journal_entry_id: string | null
          notes: string | null
          paid_amount: number | null
          payment_term_id: string | null
          payment_terms: number | null
          received_date: string | null
          status: string
          subtotal: number
          tenant_id: string
          total_amount: number
          total_amount_base: number | null
          updated_at: string
          vat_amount: number
          vendor_bill_number: string | null
          vendor_id: string | null
          vendor_name: string
        }
        Insert: {
          approved_at?: string | null
          approved_by?: string | null
          bill_date?: string
          bill_number: string
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          credit_note_amount?: number | null
          currency_code?: string | null
          discount_amount?: number | null
          due_date: string
          exchange_rate?: number | null
          expense_category?: string | null
          gl_account_id?: string | null
          id?: string
          journal_entry_id?: string | null
          notes?: string | null
          paid_amount?: number | null
          payment_term_id?: string | null
          payment_terms?: number | null
          received_date?: string | null
          status?: string
          subtotal?: number
          tenant_id: string
          total_amount?: number
          total_amount_base?: number | null
          updated_at?: string
          vat_amount?: number
          vendor_bill_number?: string | null
          vendor_id?: string | null
          vendor_name: string
        }
        Update: {
          approved_at?: string | null
          approved_by?: string | null
          bill_date?: string
          bill_number?: string
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          credit_note_amount?: number | null
          currency_code?: string | null
          discount_amount?: number | null
          due_date?: string
          exchange_rate?: number | null
          expense_category?: string | null
          gl_account_id?: string | null
          id?: string
          journal_entry_id?: string | null
          notes?: string | null
          paid_amount?: number | null
          payment_term_id?: string | null
          payment_terms?: number | null
          received_date?: string | null
          status?: string
          subtotal?: number
          tenant_id?: string
          total_amount?: number
          total_amount_base?: number | null
          updated_at?: string
          vat_amount?: number
          vendor_bill_number?: string | null
          vendor_id?: string | null
          vendor_name?: string
        }
        Relationships: [
          {
            foreignKeyName: "bills_cost_center_id_fkey"
            columns: ["cost_center_id"]
            isOneToOne: false
            referencedRelation: "cost_centers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bills_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bills_journal_entry_id_fkey"
            columns: ["journal_entry_id"]
            isOneToOne: false
            referencedRelation: "journal_entries"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bills_payment_term_id_fkey"
            columns: ["payment_term_id"]
            isOneToOne: false
            referencedRelation: "payment_terms"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bills_vendor_id_fkey"
            columns: ["vendor_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
        ]
      }
      bluecore_scores: {
        Row: {
          calculated_at: string
          components: Json | null
          created_at: string
          id: string
          previous_score: number | null
          primary_driver: string | null
          recommendation: string | null
          score_grade: string
          score_type: string
          score_value: number
          tenant_id: string
          trend: string | null
          trend_percent: number | null
          updated_at: string
          valid_until: string | null
        }
        Insert: {
          calculated_at?: string
          components?: Json | null
          created_at?: string
          id?: string
          previous_score?: number | null
          primary_driver?: string | null
          recommendation?: string | null
          score_grade: string
          score_type: string
          score_value: number
          tenant_id: string
          trend?: string | null
          trend_percent?: number | null
          updated_at?: string
          valid_until?: string | null
        }
        Update: {
          calculated_at?: string
          components?: Json | null
          created_at?: string
          id?: string
          previous_score?: number | null
          primary_driver?: string | null
          recommendation?: string | null
          score_grade?: string
          score_type?: string
          score_value?: number
          tenant_id?: string
          trend?: string | null
          trend_percent?: number | null
          updated_at?: string
          valid_until?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "bluecore_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bluecore_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bluecore_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bluecore_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      board_meeting_snapshots: {
        Row: {
          action_items: Json | null
          attendees: Json | null
          created_at: string
          created_by: string | null
          decisions: Json | null
          finalized_at: string | null
          finalized_by: string | null
          id: string
          meeting_date: string
          meeting_title: string | null
          snapshot: Json
          status: string
          tenant_id: string
        }
        Insert: {
          action_items?: Json | null
          attendees?: Json | null
          created_at?: string
          created_by?: string | null
          decisions?: Json | null
          finalized_at?: string | null
          finalized_by?: string | null
          id?: string
          meeting_date: string
          meeting_title?: string | null
          snapshot: Json
          status?: string
          tenant_id: string
        }
        Update: {
          action_items?: Json | null
          attendees?: Json | null
          created_at?: string
          created_by?: string | null
          decisions?: Json | null
          finalized_at?: string | null
          finalized_by?: string | null
          id?: string
          meeting_date?: string
          meeting_title?: string | null
          snapshot?: Json
          status?: string
          tenant_id?: string
        }
        Relationships: []
      }
      board_reports: {
        Row: {
          approved_at: string | null
          approved_by: string | null
          ar_aging_analysis: Json | null
          cash_flow_analysis: Json | null
          created_at: string
          executive_summary: string | null
          financial_highlights: Json | null
          generated_at: string
          id: string
          key_metrics: Json | null
          recommendations: string[] | null
          report_period: string
          report_title: string
          report_type: string
          risk_assessment: Json | null
          status: string
          strategic_initiatives: Json | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          approved_at?: string | null
          approved_by?: string | null
          ar_aging_analysis?: Json | null
          cash_flow_analysis?: Json | null
          created_at?: string
          executive_summary?: string | null
          financial_highlights?: Json | null
          generated_at?: string
          id?: string
          key_metrics?: Json | null
          recommendations?: string[] | null
          report_period: string
          report_title: string
          report_type: string
          risk_assessment?: Json | null
          status?: string
          strategic_initiatives?: Json | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          approved_at?: string | null
          approved_by?: string | null
          ar_aging_analysis?: Json | null
          cash_flow_analysis?: Json | null
          created_at?: string
          executive_summary?: string | null
          financial_highlights?: Json | null
          generated_at?: string
          id?: string
          key_metrics?: Json | null
          recommendations?: string[] | null
          report_period?: string
          report_title?: string
          report_type?: string
          risk_assessment?: Json | null
          status?: string
          strategic_initiatives?: Json | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "board_reports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "board_reports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "board_reports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "board_reports_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      board_scenarios: {
        Row: {
          assumptions: Json
          baseline_snapshot: Json | null
          comparison_notes: string | null
          control_impacts: Json | null
          created_at: string
          created_by: string
          description: string | null
          id: string
          is_archived: boolean | null
          projected_outcomes: Json
          risk_breaches: Json
          scenario_name: string
          scenario_type: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          assumptions: Json
          baseline_snapshot?: Json | null
          comparison_notes?: string | null
          control_impacts?: Json | null
          created_at?: string
          created_by: string
          description?: string | null
          id?: string
          is_archived?: boolean | null
          projected_outcomes: Json
          risk_breaches?: Json
          scenario_name: string
          scenario_type: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          assumptions?: Json
          baseline_snapshot?: Json | null
          comparison_notes?: string | null
          control_impacts?: Json | null
          created_at?: string
          created_by?: string
          description?: string | null
          id?: string
          is_archived?: boolean | null
          projected_outcomes?: Json
          risk_breaches?: Json
          scenario_name?: string
          scenario_type?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "board_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "board_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "board_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "board_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      board_simulation_results: {
        Row: {
          baseline_metrics: Json | null
          created_at: string
          delta_metrics: Json | null
          id: string
          period_month: string
          risk_breaches: Json | null
          simulated_metrics: Json
          simulation_id: string
          tenant_id: string
          truth_level: string
        }
        Insert: {
          baseline_metrics?: Json | null
          created_at?: string
          delta_metrics?: Json | null
          id?: string
          period_month: string
          risk_breaches?: Json | null
          simulated_metrics: Json
          simulation_id: string
          tenant_id: string
          truth_level?: string
        }
        Update: {
          baseline_metrics?: Json | null
          created_at?: string
          delta_metrics?: Json | null
          id?: string
          period_month?: string
          risk_breaches?: Json | null
          simulated_metrics?: Json
          simulation_id?: string
          tenant_id?: string
          truth_level?: string
        }
        Relationships: [
          {
            foreignKeyName: "board_simulation_results_simulation_id_fkey"
            columns: ["simulation_id"]
            isOneToOne: false
            referencedRelation: "board_simulations"
            referencedColumns: ["id"]
          },
        ]
      }
      board_simulations: {
        Row: {
          assumptions: Json
          created_at: string
          created_by: string | null
          description: string | null
          id: string
          name: string
          simulation_type: string
          status: string
          tenant_id: string
          truth_level: string
          updated_at: string
        }
        Insert: {
          assumptions: Json
          created_at?: string
          created_by?: string | null
          description?: string | null
          id?: string
          name: string
          simulation_type?: string
          status?: string
          tenant_id: string
          truth_level?: string
          updated_at?: string
        }
        Update: {
          assumptions?: Json
          created_at?: string
          created_by?: string | null
          description?: string | null
          id?: string
          name?: string
          simulation_type?: string
          status?: string
          tenant_id?: string
          truth_level?: string
          updated_at?: string
        }
        Relationships: []
      }
      budgets: {
        Row: {
          actual_amount: number | null
          approved_at: string | null
          approved_by: string | null
          budget_type: string
          budgeted_amount: number
          category: string
          created_at: string
          created_by: string | null
          description: string | null
          end_date: string
          id: string
          name: string
          notes: string | null
          period_month: number | null
          period_quarter: number | null
          period_type: string
          period_year: number
          start_date: string
          status: string
          subcategory: string | null
          tenant_id: string
          updated_at: string
          variance_amount: number | null
          variance_percent: number | null
        }
        Insert: {
          actual_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          budget_type?: string
          budgeted_amount?: number
          category: string
          created_at?: string
          created_by?: string | null
          description?: string | null
          end_date: string
          id?: string
          name: string
          notes?: string | null
          period_month?: number | null
          period_quarter?: number | null
          period_type?: string
          period_year: number
          start_date: string
          status?: string
          subcategory?: string | null
          tenant_id: string
          updated_at?: string
          variance_amount?: number | null
          variance_percent?: number | null
        }
        Update: {
          actual_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          budget_type?: string
          budgeted_amount?: number
          category?: string
          created_at?: string
          created_by?: string | null
          description?: string | null
          end_date?: string
          id?: string
          name?: string
          notes?: string | null
          period_month?: number | null
          period_quarter?: number | null
          period_type?: string
          period_year?: number
          start_date?: string
          status?: string
          subcategory?: string | null
          tenant_id?: string
          updated_at?: string
          variance_amount?: number | null
          variance_percent?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      capex_projects: {
        Row: {
          actual_roi: number | null
          approved_at: string | null
          approved_by: string | null
          budget: number
          category: string
          created_at: string
          created_by: string | null
          description: string | null
          end_date: string | null
          expected_roi: number | null
          id: string
          name: string
          notes: string | null
          payback_months: number | null
          spent: number
          start_date: string | null
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          actual_roi?: number | null
          approved_at?: string | null
          approved_by?: string | null
          budget?: number
          category?: string
          created_at?: string
          created_by?: string | null
          description?: string | null
          end_date?: string | null
          expected_roi?: number | null
          id?: string
          name: string
          notes?: string | null
          payback_months?: number | null
          spent?: number
          start_date?: string | null
          status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          actual_roi?: number | null
          approved_at?: string | null
          approved_by?: string | null
          budget?: number
          category?: string
          created_at?: string
          created_by?: string | null
          description?: string | null
          end_date?: string | null
          expected_roi?: number | null
          id?: string
          name?: string
          notes?: string | null
          payback_months?: number | null
          spent?: number
          start_date?: string | null
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "capex_projects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "capex_projects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "capex_projects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "capex_projects_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      card_actions: {
        Row: {
          action_type: string
          card_id: string
          created_at: string | null
          display_order: number | null
          expected_outcome: string | null
          id: string
          is_recommended: boolean | null
          label: string
          parameters: Json | null
          risk_note: string | null
          tenant_id: string
        }
        Insert: {
          action_type: string
          card_id: string
          created_at?: string | null
          display_order?: number | null
          expected_outcome?: string | null
          id?: string
          is_recommended?: boolean | null
          label: string
          parameters?: Json | null
          risk_note?: string | null
          tenant_id: string
        }
        Update: {
          action_type?: string
          card_id?: string
          created_at?: string | null
          display_order?: number | null
          expected_outcome?: string | null
          id?: string
          is_recommended?: boolean | null
          label?: string
          parameters?: Json | null
          risk_note?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "card_actions_card_id_fkey"
            columns: ["card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      carrier_performance: {
        Row: {
          avg_cost_per_shipment: number | null
          avg_delivery_days: number | null
          carrier_code: string
          created_at: string | null
          delay_rate: number | null
          delayed_count: number | null
          delivered_count: number | null
          failed_count: number | null
          failure_rate: number | null
          id: string
          on_time_rate: number | null
          performance_date: string
          tenant_id: string
          total_shipments: number | null
        }
        Insert: {
          avg_cost_per_shipment?: number | null
          avg_delivery_days?: number | null
          carrier_code: string
          created_at?: string | null
          delay_rate?: number | null
          delayed_count?: number | null
          delivered_count?: number | null
          failed_count?: number | null
          failure_rate?: number | null
          id?: string
          on_time_rate?: number | null
          performance_date: string
          tenant_id: string
          total_shipments?: number | null
        }
        Update: {
          avg_cost_per_shipment?: number | null
          avg_delivery_days?: number | null
          carrier_code?: string
          created_at?: string | null
          delay_rate?: number | null
          delayed_count?: number | null
          delivered_count?: number | null
          failed_count?: number | null
          failure_rate?: number | null
          id?: string
          on_time_rate?: number | null
          performance_date?: string
          tenant_id?: string
          total_shipments?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "carrier_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "carrier_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "carrier_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "carrier_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cash_flow_daily: {
        Row: {
          avg_daily_expenses: number | null
          cash_runway_days: number | null
          closing_balance: number | null
          created_at: string | null
          flow_date: string
          id: string
          inflow_cod: number | null
          inflow_other: number | null
          inflow_platform: number | null
          inflow_sales: number | null
          net_cash_flow: number | null
          notes: string | null
          opening_balance: number | null
          outflow_inventory: number | null
          outflow_marketing: number | null
          outflow_other: number | null
          outflow_rent: number | null
          outflow_salary: number | null
          outflow_shipping: number | null
          tenant_id: string
          total_inflow: number | null
          total_outflow: number | null
          updated_at: string | null
        }
        Insert: {
          avg_daily_expenses?: number | null
          cash_runway_days?: number | null
          closing_balance?: number | null
          created_at?: string | null
          flow_date: string
          id?: string
          inflow_cod?: number | null
          inflow_other?: number | null
          inflow_platform?: number | null
          inflow_sales?: number | null
          net_cash_flow?: number | null
          notes?: string | null
          opening_balance?: number | null
          outflow_inventory?: number | null
          outflow_marketing?: number | null
          outflow_other?: number | null
          outflow_rent?: number | null
          outflow_salary?: number | null
          outflow_shipping?: number | null
          tenant_id: string
          total_inflow?: number | null
          total_outflow?: number | null
          updated_at?: string | null
        }
        Update: {
          avg_daily_expenses?: number | null
          cash_runway_days?: number | null
          closing_balance?: number | null
          created_at?: string | null
          flow_date?: string
          id?: string
          inflow_cod?: number | null
          inflow_other?: number | null
          inflow_platform?: number | null
          inflow_sales?: number | null
          net_cash_flow?: number | null
          notes?: string | null
          opening_balance?: number | null
          outflow_inventory?: number | null
          outflow_marketing?: number | null
          outflow_other?: number | null
          outflow_rent?: number | null
          outflow_salary?: number | null
          outflow_shipping?: number | null
          tenant_id?: string
          total_inflow?: number | null
          total_outflow?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cash_flow_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cash_flow_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cash_flow_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cash_flow_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cash_flow_direct: {
        Row: {
          cash_for_asset_purchases: number | null
          cash_for_dividends: number | null
          cash_for_interest_paid: number | null
          cash_for_investments: number | null
          cash_for_loan_repayments: number | null
          cash_for_other_operating: number | null
          cash_for_rent: number | null
          cash_for_taxes: number | null
          cash_for_utilities: number | null
          cash_from_asset_sales: number | null
          cash_from_customers: number | null
          cash_from_equity: number | null
          cash_from_interest_received: number | null
          cash_from_loans: number | null
          cash_from_other_operating: number | null
          cash_to_employees: number | null
          cash_to_suppliers: number | null
          closing_cash_balance: number | null
          created_at: string
          created_by: string | null
          id: string
          is_actual: boolean | null
          net_cash_financing: number | null
          net_cash_investing: number | null
          net_cash_operating: number | null
          notes: string | null
          opening_cash_balance: number | null
          period_end: string
          period_start: string
          period_type: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          cash_for_asset_purchases?: number | null
          cash_for_dividends?: number | null
          cash_for_interest_paid?: number | null
          cash_for_investments?: number | null
          cash_for_loan_repayments?: number | null
          cash_for_other_operating?: number | null
          cash_for_rent?: number | null
          cash_for_taxes?: number | null
          cash_for_utilities?: number | null
          cash_from_asset_sales?: number | null
          cash_from_customers?: number | null
          cash_from_equity?: number | null
          cash_from_interest_received?: number | null
          cash_from_loans?: number | null
          cash_from_other_operating?: number | null
          cash_to_employees?: number | null
          cash_to_suppliers?: number | null
          closing_cash_balance?: number | null
          created_at?: string
          created_by?: string | null
          id?: string
          is_actual?: boolean | null
          net_cash_financing?: number | null
          net_cash_investing?: number | null
          net_cash_operating?: number | null
          notes?: string | null
          opening_cash_balance?: number | null
          period_end: string
          period_start: string
          period_type?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          cash_for_asset_purchases?: number | null
          cash_for_dividends?: number | null
          cash_for_interest_paid?: number | null
          cash_for_investments?: number | null
          cash_for_loan_repayments?: number | null
          cash_for_other_operating?: number | null
          cash_for_rent?: number | null
          cash_for_taxes?: number | null
          cash_for_utilities?: number | null
          cash_from_asset_sales?: number | null
          cash_from_customers?: number | null
          cash_from_equity?: number | null
          cash_from_interest_received?: number | null
          cash_from_loans?: number | null
          cash_from_other_operating?: number | null
          cash_to_employees?: number | null
          cash_to_suppliers?: number | null
          closing_cash_balance?: number | null
          created_at?: string
          created_by?: string | null
          id?: string
          is_actual?: boolean | null
          net_cash_financing?: number | null
          net_cash_investing?: number | null
          net_cash_operating?: number | null
          notes?: string | null
          opening_cash_balance?: number | null
          period_end?: string
          period_start?: string
          period_type?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "cash_flow_direct_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cash_flow_direct_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cash_flow_direct_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cash_flow_direct_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cash_forecasts: {
        Row: {
          closing_balance: number
          created_at: string
          forecast_date: string
          forecast_type: string | null
          id: string
          inflows: number | null
          notes: string | null
          opening_balance: number
          outflows: number | null
          tenant_id: string | null
        }
        Insert: {
          closing_balance: number
          created_at?: string
          forecast_date: string
          forecast_type?: string | null
          id?: string
          inflows?: number | null
          notes?: string | null
          opening_balance: number
          outflows?: number | null
          tenant_id?: string | null
        }
        Update: {
          closing_balance?: number
          created_at?: string
          forecast_date?: string
          forecast_type?: string | null
          id?: string
          inflows?: number | null
          notes?: string | null
          opening_balance?: number
          outflows?: number | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cash_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cash_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cash_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cash_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_build_logs: {
        Row: {
          created_at: string
          details: Json | null
          id: string
          run_type: string
          summary: Json
        }
        Insert: {
          created_at?: string
          details?: Json | null
          id?: string
          run_type?: string
          summary: Json
        }
        Update: {
          created_at?: string
          details?: Json | null
          id?: string
          run_type?: string
          summary?: Json
        }
        Relationships: []
      }
      cdp_card_activity_log: {
        Row: {
          action: string
          actor_role: string
          created_at: string
          decision_card_id: string
          id: string
          payload: Json | null
          tenant_id: string
        }
        Insert: {
          action: string
          actor_role: string
          created_at?: string
          decision_card_id: string
          id?: string
          payload?: Json | null
          tenant_id: string
        }
        Update: {
          action?: string
          actor_role?: string
          created_at?: string
          decision_card_id?: string
          id?: string
          payload?: Json | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_card_activity_log_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_card_activity_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_churn_signals: {
        Row: {
          churn_probability: number | null
          consumed_at: string | null
          consumed_by_mdp: boolean | null
          created_at: string
          customer_id: string
          customer_segment: string | null
          days_since_last_purchase: number | null
          id: string
          ltv_at_risk: number | null
          recommended_action: string | null
          signal_date: string
          tenant_id: string
          updated_at: string
          urgency_level: string | null
        }
        Insert: {
          churn_probability?: number | null
          consumed_at?: string | null
          consumed_by_mdp?: boolean | null
          created_at?: string
          customer_id: string
          customer_segment?: string | null
          days_since_last_purchase?: number | null
          id?: string
          ltv_at_risk?: number | null
          recommended_action?: string | null
          signal_date?: string
          tenant_id: string
          updated_at?: string
          urgency_level?: string | null
        }
        Update: {
          churn_probability?: number | null
          consumed_at?: string | null
          consumed_by_mdp?: boolean | null
          created_at?: string
          customer_id?: string
          customer_segment?: string | null
          days_since_last_purchase?: number | null
          id?: string
          ltv_at_risk?: number | null
          recommended_action?: string | null
          signal_date?: string
          tenant_id?: string
          updated_at?: string
          urgency_level?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_churn_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_churn_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_churn_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_churn_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_cohort_membership_daily: {
        Row: {
          as_of_date: string
          cohort_id: string
          customer_id: string
          is_member: boolean
          tenant_id: string
        }
        Insert: {
          as_of_date: string
          cohort_id: string
          customer_id: string
          is_member?: boolean
          tenant_id: string
        }
        Update: {
          as_of_date?: string
          cohort_id?: string
          customer_id?: string
          is_member?: boolean
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_cohort_membership_daily_cohort_id_fkey"
            columns: ["cohort_id"]
            isOneToOne: false
            referencedRelation: "cdp_cohorts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_cohorts: {
        Row: {
          cohort_key: string
          cohort_type: string
          created_at: string
          definition_json: Json
          id: string
          tenant_id: string
        }
        Insert: {
          cohort_key: string
          cohort_type: string
          created_at?: string
          definition_json?: Json
          id?: string
          tenant_id: string
        }
        Update: {
          cohort_key?: string
          cohort_type?: string
          created_at?: string
          definition_json?: Json
          id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_cohorts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohorts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_cohorts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_cohorts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_config: {
        Row: {
          key: string
          tenant_id: string
          updated_at: string
          value: Json
        }
        Insert: {
          key: string
          tenant_id: string
          updated_at?: string
          value: Json
        }
        Update: {
          key?: string
          tenant_id?: string
          updated_at?: string
          value?: Json
        }
        Relationships: [
          {
            foreignKeyName: "cdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_customer_cohort_cac: {
        Row: {
          acquisition_channel: string | null
          cac_per_customer: number | null
          campaign_id: string | null
          cohort_month: string
          confidence_level: string | null
          created_at: string | null
          id: string
          new_customers: number | null
          source_module: string | null
          tenant_id: string
          total_spend: number | null
          updated_at: string | null
        }
        Insert: {
          acquisition_channel?: string | null
          cac_per_customer?: number | null
          campaign_id?: string | null
          cohort_month: string
          confidence_level?: string | null
          created_at?: string | null
          id?: string
          new_customers?: number | null
          source_module?: string | null
          tenant_id: string
          total_spend?: number | null
          updated_at?: string | null
        }
        Update: {
          acquisition_channel?: string | null
          cac_per_customer?: number | null
          campaign_id?: string | null
          cohort_month?: string
          confidence_level?: string | null
          created_at?: string | null
          id?: string
          new_customers?: number | null
          source_module?: string | null
          tenant_id?: string
          total_spend?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_cohort_cac_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_cohort_cac_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_cohort_cac_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_cohort_cac_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_customer_credit_risk: {
        Row: {
          created_at: string
          credit_score: number | null
          customer_id: string
          days_overdue: number | null
          equity_risk_multiplier: number | null
          id: string
          last_sync_at: string | null
          overdue_ar: number | null
          risk_level: string | null
          source_module: string | null
          tenant_id: string
          total_ar: number | null
          updated_at: string
        }
        Insert: {
          created_at?: string
          credit_score?: number | null
          customer_id: string
          days_overdue?: number | null
          equity_risk_multiplier?: number | null
          id?: string
          last_sync_at?: string | null
          overdue_ar?: number | null
          risk_level?: string | null
          source_module?: string | null
          tenant_id: string
          total_ar?: number | null
          updated_at?: string
        }
        Update: {
          created_at?: string
          credit_score?: number | null
          customer_id?: string
          days_overdue?: number | null
          equity_risk_multiplier?: number | null
          id?: string
          last_sync_at?: string | null
          overdue_ar?: number | null
          risk_level?: string | null
          source_module?: string | null
          tenant_id?: string
          total_ar?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_credit_risk_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_credit_risk_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_credit_risk_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_credit_risk_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_customer_equity_computed: {
        Row: {
          aov_90d: number | null
          as_of_date: string
          churn_risk_score: number | null
          compute_function: string | null
          compute_version: string | null
          computed_at: string
          contribution_profit_90d: number | null
          customer_id: string
          data_quality_flags: Json
          equity_12m: number | null
          equity_24m: number | null
          equity_confidence: number | null
          equity_estimation_method: string | null
          equity_is_estimated: boolean
          equity_reason: string | null
          frequency_180d: number | null
          gross_profit_30d: number | null
          gross_profit_90d: number | null
          monetary_180d: number | null
          net_revenue_180d: number
          net_revenue_30d: number
          net_revenue_90d: number
          orders_180d: number
          orders_30d: number
          orders_90d: number
          recency_days: number | null
          refund_rate_90d: number | null
          repeat_rate_180d: number | null
          risk_level: string | null
          tenant_id: string
        }
        Insert: {
          aov_90d?: number | null
          as_of_date: string
          churn_risk_score?: number | null
          compute_function?: string | null
          compute_version?: string | null
          computed_at?: string
          contribution_profit_90d?: number | null
          customer_id: string
          data_quality_flags?: Json
          equity_12m?: number | null
          equity_24m?: number | null
          equity_confidence?: number | null
          equity_estimation_method?: string | null
          equity_is_estimated?: boolean
          equity_reason?: string | null
          frequency_180d?: number | null
          gross_profit_30d?: number | null
          gross_profit_90d?: number | null
          monetary_180d?: number | null
          net_revenue_180d?: number
          net_revenue_30d?: number
          net_revenue_90d?: number
          orders_180d?: number
          orders_30d?: number
          orders_90d?: number
          recency_days?: number | null
          refund_rate_90d?: number | null
          repeat_rate_180d?: number | null
          risk_level?: string | null
          tenant_id: string
        }
        Update: {
          aov_90d?: number | null
          as_of_date?: string
          churn_risk_score?: number | null
          compute_function?: string | null
          compute_version?: string | null
          computed_at?: string
          contribution_profit_90d?: number | null
          customer_id?: string
          data_quality_flags?: Json
          equity_12m?: number | null
          equity_24m?: number | null
          equity_confidence?: number | null
          equity_estimation_method?: string | null
          equity_is_estimated?: boolean
          equity_reason?: string | null
          frequency_180d?: number | null
          gross_profit_30d?: number | null
          gross_profit_90d?: number | null
          monetary_180d?: number | null
          net_revenue_180d?: number
          net_revenue_30d?: number
          net_revenue_90d?: number
          orders_180d?: number
          orders_30d?: number
          orders_90d?: number
          recency_days?: number | null
          refund_rate_90d?: number | null
          repeat_rate_180d?: number | null
          risk_level?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_equity_computed_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_customer_identities: {
        Row: {
          confidence: number
          created_at: string
          customer_id: string
          first_seen_at: string | null
          id: string
          id_type: string
          id_value: string
          last_seen_at: string | null
          source_system: string
          tenant_id: string
        }
        Insert: {
          confidence?: number
          created_at?: string
          customer_id: string
          first_seen_at?: string | null
          id?: string
          id_type: string
          id_value: string
          last_seen_at?: string | null
          source_system: string
          tenant_id: string
        }
        Update: {
          confidence?: number
          created_at?: string
          customer_id?: string
          first_seen_at?: string | null
          id?: string
          id_type?: string
          id_value?: string
          last_seen_at?: string | null
          source_system?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_identities_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_identities_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_identities_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_identities_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_identities_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_identities_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_identities_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_customer_metrics_daily: {
        Row: {
          as_of_date: string
          bundle_orders_count: number
          cod_orders_count: number
          cogs: number
          customer_id: string
          discount_amount: number
          gross_margin: number
          gross_revenue: number
          is_discounted_orders_count: number
          net_revenue: number
          orders_count: number
          orders_total_qty: number
          refund_amount: number
          tenant_id: string
        }
        Insert: {
          as_of_date: string
          bundle_orders_count?: number
          cod_orders_count?: number
          cogs?: number
          customer_id: string
          discount_amount?: number
          gross_margin?: number
          gross_revenue?: number
          is_discounted_orders_count?: number
          net_revenue?: number
          orders_count?: number
          orders_total_qty?: number
          refund_amount?: number
          tenant_id: string
        }
        Update: {
          as_of_date?: string
          bundle_orders_count?: number
          cod_orders_count?: number
          cogs?: number
          customer_id?: string
          discount_amount?: number
          gross_margin?: number
          gross_revenue?: number
          is_discounted_orders_count?: number
          net_revenue?: number
          orders_count?: number
          orders_total_qty?: number
          refund_amount?: number
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_metrics_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_customer_metrics_rolling: {
        Row: {
          aov: number
          as_of_date: string
          bundle_order_share: number
          cod_order_share: number
          cogs: number
          customer_id: string
          discount_amount: number
          discount_share: number
          discounted_order_share: number
          gross_margin: number
          gross_revenue: number
          inter_purchase_days: number | null
          is_repeat: boolean
          last_order_at: string | null
          net_revenue: number
          orders_count: number
          prev_order_at: string | null
          refund_amount: number
          return_rate: number
          tenant_id: string
          total_item_revenue: number
          total_qty: number
          window_days: number
        }
        Insert: {
          aov?: number
          as_of_date: string
          bundle_order_share?: number
          cod_order_share?: number
          cogs?: number
          customer_id: string
          discount_amount?: number
          discount_share?: number
          discounted_order_share?: number
          gross_margin?: number
          gross_revenue?: number
          inter_purchase_days?: number | null
          is_repeat?: boolean
          last_order_at?: string | null
          net_revenue?: number
          orders_count?: number
          prev_order_at?: string | null
          refund_amount?: number
          return_rate?: number
          tenant_id: string
          total_item_revenue?: number
          total_qty?: number
          window_days: number
        }
        Update: {
          aov?: number
          as_of_date?: string
          bundle_order_share?: number
          cod_order_share?: number
          cogs?: number
          customer_id?: string
          discount_amount?: number
          discount_share?: number
          discounted_order_share?: number
          gross_margin?: number
          gross_revenue?: number
          inter_purchase_days?: number | null
          is_repeat?: boolean
          last_order_at?: string | null
          net_revenue?: number
          orders_count?: number
          prev_order_at?: string | null
          refund_amount?: number
          return_rate?: number
          tenant_id?: string
          total_item_revenue?: number
          total_qty?: number
          window_days?: number
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_customers: {
        Row: {
          acquisition_source: string | null
          address: string | null
          age_range: string | null
          canonical_key: string
          city: string | null
          created_at: string
          district: string | null
          email: string | null
          external_ids: Json | null
          first_order_at: string | null
          gender: string | null
          id: string
          last_order_at: string | null
          lifetime_value: number | null
          loyalty_points: number | null
          name: string | null
          phone: string | null
          primary_device: string | null
          province: string | null
          status: string | null
          tags: string[] | null
          tenant_id: string
        }
        Insert: {
          acquisition_source?: string | null
          address?: string | null
          age_range?: string | null
          canonical_key: string
          city?: string | null
          created_at?: string
          district?: string | null
          email?: string | null
          external_ids?: Json | null
          first_order_at?: string | null
          gender?: string | null
          id?: string
          last_order_at?: string | null
          lifetime_value?: number | null
          loyalty_points?: number | null
          name?: string | null
          phone?: string | null
          primary_device?: string | null
          province?: string | null
          status?: string | null
          tags?: string[] | null
          tenant_id: string
        }
        Update: {
          acquisition_source?: string | null
          address?: string | null
          age_range?: string | null
          canonical_key?: string
          city?: string | null
          created_at?: string
          district?: string | null
          email?: string | null
          external_ids?: Json | null
          first_order_at?: string | null
          gender?: string | null
          id?: string
          last_order_at?: string | null
          lifetime_value?: number | null
          loyalty_points?: number | null
          name?: string | null
          phone?: string | null
          primary_device?: string | null
          province?: string | null
          status?: string | null
          tags?: string[] | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_data_quality_daily: {
        Row: {
          as_of_date: string
          created_at: string
          data_lag_days: number | null
          duplicate_items: number
          duplicate_orders: number
          flags: Json
          latest_order_date: string | null
          order_items_total: number
          order_items_unmapped_category: number
          order_items_unmapped_sku: number
          orders_missing_customer: number
          orders_total: number
          quality_score: number
          tenant_id: string
        }
        Insert: {
          as_of_date: string
          created_at?: string
          data_lag_days?: number | null
          duplicate_items?: number
          duplicate_orders?: number
          flags?: Json
          latest_order_date?: string | null
          order_items_total?: number
          order_items_unmapped_category?: number
          order_items_unmapped_sku?: number
          orders_missing_customer?: number
          orders_total?: number
          quality_score?: number
          tenant_id: string
        }
        Update: {
          as_of_date?: string
          created_at?: string
          data_lag_days?: number | null
          duplicate_items?: number
          duplicate_orders?: number
          flags?: Json
          latest_order_date?: string | null
          order_items_total?: number
          order_items_unmapped_category?: number
          order_items_unmapped_sku?: number
          orders_missing_customer?: number
          orders_total?: number
          quality_score?: number
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_data_quality_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_data_quality_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_data_quality_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_data_quality_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_decision_card_snapshots: {
        Row: {
          created_at: string
          decision_card_id: string
          evidence_json: Json
          id: string
          snapshot_at: string
          tenant_id: string
        }
        Insert: {
          created_at?: string
          decision_card_id: string
          evidence_json?: Json
          id?: string
          snapshot_at?: string
          tenant_id: string
        }
        Update: {
          created_at?: string
          decision_card_id?: string
          evidence_json?: Json
          id?: string
          snapshot_at?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_card_snapshots_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_card_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_decision_cards: {
        Row: {
          baseline_days: number
          category: string
          created_at: string
          decision_due: string | null
          decision_note: string | null
          decision_outcome: string | null
          decision_recorded_at: string | null
          decision_recorded_by: string | null
          id: string
          owner_role: string
          population_ref: Json
          priority: string
          problem_statement: string | null
          review_by: string | null
          severity: string
          source_ref: Json
          source_type: string
          status: string
          summary: string
          tenant_id: string
          title: string
          updated_at: string
          window_days: number
        }
        Insert: {
          baseline_days?: number
          category: string
          created_at?: string
          decision_due?: string | null
          decision_note?: string | null
          decision_outcome?: string | null
          decision_recorded_at?: string | null
          decision_recorded_by?: string | null
          id?: string
          owner_role?: string
          population_ref?: Json
          priority?: string
          problem_statement?: string | null
          review_by?: string | null
          severity?: string
          source_ref?: Json
          source_type: string
          status?: string
          summary: string
          tenant_id: string
          title: string
          updated_at?: string
          window_days?: number
        }
        Update: {
          baseline_days?: number
          category?: string
          created_at?: string
          decision_due?: string | null
          decision_note?: string | null
          decision_outcome?: string | null
          decision_recorded_at?: string | null
          decision_recorded_by?: string | null
          id?: string
          owner_role?: string
          population_ref?: Json
          priority?: string
          problem_statement?: string | null
          review_by?: string | null
          severity?: string
          source_ref?: Json
          source_type?: string
          status?: string
          summary?: string
          tenant_id?: string
          title?: string
          updated_at?: string
          window_days?: number
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_decision_cluster_map: {
        Row: {
          cluster_key: string
          created_at: string
          decision_id: string
          tenant_id: string
        }
        Insert: {
          cluster_key: string
          created_at?: string
          decision_id: string
          tenant_id: string
        }
        Update: {
          cluster_key?: string
          created_at?: string
          decision_id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_cluster_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cluster_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_decision_insight_links: {
        Row: {
          created_at: string
          decision_id: string
          insight_event_id: string
          link_type: string
          tenant_id: string
        }
        Insert: {
          created_at?: string
          decision_id: string
          insight_event_id: string
          link_type?: string
          tenant_id: string
        }
        Update: {
          created_at?: string
          decision_id?: string
          insight_event_id?: string
          link_type?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "cdp_insight_events"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_evidence"
            referencedColumns: ["insight_event_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_demand_insights"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_highlight_signals"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_feed"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insights_with_actions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_decision_issue_map: {
        Row: {
          created_at: string
          decision_id: string
          issue_key: string
          tenant_id: string
        }
        Insert: {
          created_at?: string
          decision_id: string
          issue_key: string
          tenant_id: string
        }
        Update: {
          created_at?: string
          decision_id?: string
          issue_key?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_issue_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_issue_map_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_decision_reviews: {
        Row: {
          decision_card_id: string
          id: string
          notes: string | null
          observed_outcome_json: Json
          review_at: string
          tenant_id: string
        }
        Insert: {
          decision_card_id: string
          id?: string
          notes?: string | null
          observed_outcome_json?: Json
          review_at: string
          tenant_id: string
        }
        Update: {
          decision_card_id?: string
          id?: string
          notes?: string | null
          observed_outcome_json?: Json
          review_at?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_reviews_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_decisions: {
        Row: {
          assumptions_json: Json | null
          decided_at: string
          decided_by_role: string
          decision_card_id: string
          decision_statement: string
          decision_status: string
          expected_impact_json: Json | null
          id: string
          tenant_id: string
        }
        Insert: {
          assumptions_json?: Json | null
          decided_at?: string
          decided_by_role: string
          decision_card_id: string
          decision_statement: string
          decision_status: string
          expected_impact_json?: Json | null
          id?: string
          tenant_id: string
        }
        Update: {
          assumptions_json?: Json | null
          decided_at?: string
          decided_by_role?: string
          decision_card_id?: string
          decision_statement?: string
          decision_status?: string
          expected_impact_json?: Json | null
          id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decisions_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decisions_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decisions_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decisions_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_decisions_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decisions_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_fulfillments: {
        Row: {
          channel: string | null
          created_at: string
          delivered_at: string | null
          fulfillment_key: string
          fulfillment_status: string | null
          id: string
          order_key: string | null
          raw_data: Json | null
          shipped_at: string | null
          shipping_carrier: string | null
          tenant_id: string
          tracking_number: string | null
          updated_at: string
        }
        Insert: {
          channel?: string | null
          created_at?: string
          delivered_at?: string | null
          fulfillment_key: string
          fulfillment_status?: string | null
          id?: string
          order_key?: string | null
          raw_data?: Json | null
          shipped_at?: string | null
          shipping_carrier?: string | null
          tenant_id: string
          tracking_number?: string | null
          updated_at?: string
        }
        Update: {
          channel?: string | null
          created_at?: string
          delivered_at?: string | null
          fulfillment_key?: string
          fulfillment_status?: string | null
          id?: string
          order_key?: string | null
          raw_data?: Json | null
          shipped_at?: string | null
          shipping_carrier?: string | null
          tenant_id?: string
          tracking_number?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_fulfillments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_fulfillments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_fulfillments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_fulfillments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_insight_actions: {
        Row: {
          action_at: string
          action_by: string | null
          action_type: string
          created_at: string
          id: string
          insight_event_id: string
          metadata: Json | null
          reason: string | null
          snooze_until: string | null
          tenant_id: string
        }
        Insert: {
          action_at?: string
          action_by?: string | null
          action_type: string
          created_at?: string
          id?: string
          insight_event_id: string
          metadata?: Json | null
          reason?: string | null
          snooze_until?: string | null
          tenant_id: string
        }
        Update: {
          action_at?: string
          action_by?: string | null
          action_type?: string
          created_at?: string
          id?: string
          insight_event_id?: string
          metadata?: Json | null
          reason?: string | null
          snooze_until?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_actions_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "cdp_insight_events"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_evidence"
            referencedColumns: ["insight_event_id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_demand_insights"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_highlight_signals"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_feed"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insights_with_actions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_insight_audit_log: {
        Row: {
          checked_at: string
          created_at: string
          failure_reasons: string[] | null
          id: string
          insight_code: string
          insight_event_id: string | null
          insight_metrics: Json | null
          passed: boolean
          source_metrics: Json | null
          tenant_id: string | null
          validation_result: Json
        }
        Insert: {
          checked_at?: string
          created_at?: string
          failure_reasons?: string[] | null
          id?: string
          insight_code: string
          insight_event_id?: string | null
          insight_metrics?: Json | null
          passed?: boolean
          source_metrics?: Json | null
          tenant_id?: string | null
          validation_result?: Json
        }
        Update: {
          checked_at?: string
          created_at?: string
          failure_reasons?: string[] | null
          id?: string
          insight_code?: string
          insight_event_id?: string | null
          insight_metrics?: Json | null
          passed?: boolean
          source_metrics?: Json | null
          tenant_id?: string | null
          validation_result?: Json
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_audit_log_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "cdp_insight_events"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_evidence"
            referencedColumns: ["insight_event_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_demand_insights"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_highlight_signals"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_feed"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insights_with_actions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_insight_cluster_members: {
        Row: {
          cluster_id: string
          created_at: string
          insight_event_id: string
          tenant_id: string
        }
        Insert: {
          cluster_id: string
          created_at?: string
          insight_event_id: string
          tenant_id: string
        }
        Update: {
          cluster_id?: string
          created_at?: string
          insight_event_id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_cluster_members_cluster_id_fkey"
            columns: ["cluster_id"]
            isOneToOne: false
            referencedRelation: "cdp_insight_clusters"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_cluster_id_fkey"
            columns: ["cluster_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_clusters_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "cdp_insight_events"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_evidence"
            referencedColumns: ["insight_event_id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_demand_insights"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_highlight_signals"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_feed"
            referencedColumns: ["event_id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_insight_event_id_fkey"
            columns: ["insight_event_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insights_with_actions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_cluster_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_insight_clusters: {
        Row: {
          as_of_date: string
          cluster_key: string
          cluster_type: string
          confidence: number
          created_at: string
          evidence: Json
          id: string
          metrics: Json
          narrative: string
          severity: string
          tenant_id: string
          title: string
        }
        Insert: {
          as_of_date: string
          cluster_key: string
          cluster_type: string
          confidence?: number
          created_at?: string
          evidence?: Json
          id?: string
          metrics?: Json
          narrative: string
          severity?: string
          tenant_id: string
          title: string
        }
        Update: {
          as_of_date?: string
          cluster_key?: string
          cluster_type?: string
          confidence?: number
          created_at?: string
          evidence?: Json
          id?: string
          metrics?: Json
          narrative?: string
          severity?: string
          tenant_id?: string
          title?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_insight_events: {
        Row: {
          action_owner: string | null
          as_of_date: string
          confidence: number | null
          cooldown_until: string | null
          created_at: string
          estimated_impact: number | null
          evidence: Json | null
          headline: string
          id: string
          impact_currency: string | null
          impact_snapshot: Json
          insight_code: string
          metric_snapshot: Json
          metrics: Json | null
          n_customers: number
          narrative: string | null
          population_ref: Json
          population_type: string
          recommended_action: string | null
          run_id: string
          severity: string | null
          status: string | null
          subject_key: string | null
          subject_type: string | null
          tenant_id: string
          title: string | null
          updated_at: string | null
          urgency: string | null
        }
        Insert: {
          action_owner?: string | null
          as_of_date: string
          confidence?: number | null
          cooldown_until?: string | null
          created_at?: string
          estimated_impact?: number | null
          evidence?: Json | null
          headline: string
          id?: string
          impact_currency?: string | null
          impact_snapshot?: Json
          insight_code: string
          metric_snapshot?: Json
          metrics?: Json | null
          n_customers?: number
          narrative?: string | null
          population_ref?: Json
          population_type: string
          recommended_action?: string | null
          run_id: string
          severity?: string | null
          status?: string | null
          subject_key?: string | null
          subject_type?: string | null
          tenant_id: string
          title?: string | null
          updated_at?: string | null
          urgency?: string | null
        }
        Update: {
          action_owner?: string | null
          as_of_date?: string
          confidence?: number | null
          cooldown_until?: string | null
          created_at?: string
          estimated_impact?: number | null
          evidence?: Json | null
          headline?: string
          id?: string
          impact_currency?: string | null
          impact_snapshot?: Json
          insight_code?: string
          metric_snapshot?: Json
          metrics?: Json | null
          n_customers?: number
          narrative?: string | null
          population_ref?: Json
          population_type?: string
          recommended_action?: string | null
          run_id?: string
          severity?: string | null
          status?: string | null
          subject_key?: string | null
          subject_type?: string | null
          tenant_id?: string
          title?: string | null
          updated_at?: string | null
          urgency?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "cdp_insight_registry"
            referencedColumns: ["insight_code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_registry_summary"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_run_id_fkey"
            columns: ["run_id"]
            isOneToOne: false
            referencedRelation: "cdp_insight_runs"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_insight_registry: {
        Row: {
          baseline_days: number
          category: string
          cooldown_days: number
          default_population_ref: Json
          default_priority: string
          default_severity: string
          description: string | null
          insight_code: string
          is_enabled: boolean
          name: string
          owner_role: string
          owners: string[] | null
          population_type: string
          threshold_json: Json
          window_days: number
        }
        Insert: {
          baseline_days?: number
          category: string
          cooldown_days?: number
          default_population_ref?: Json
          default_priority?: string
          default_severity?: string
          description?: string | null
          insight_code: string
          is_enabled?: boolean
          name: string
          owner_role?: string
          owners?: string[] | null
          population_type: string
          threshold_json?: Json
          window_days?: number
        }
        Update: {
          baseline_days?: number
          category?: string
          cooldown_days?: number
          default_population_ref?: Json
          default_priority?: string
          default_severity?: string
          description?: string | null
          insight_code?: string
          is_enabled?: boolean
          name?: string
          owner_role?: string
          owners?: string[] | null
          population_type?: string
          threshold_json?: Json
          window_days?: number
        }
        Relationships: []
      }
      cdp_insight_runs: {
        Row: {
          as_of_date: string
          baseline_days: number
          id: string
          run_at: string
          stats: Json | null
          status: string
          tenant_id: string
          window_days: number
        }
        Insert: {
          as_of_date: string
          baseline_days: number
          id?: string
          run_at?: string
          stats?: Json | null
          status: string
          tenant_id: string
          window_days: number
        }
        Update: {
          as_of_date?: string
          baseline_days?: number
          id?: string
          run_at?: string
          stats?: Json | null
          status?: string
          tenant_id?: string
          window_days?: number
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_ltv_model_assumptions: {
        Row: {
          aov_growth_rate: number
          category_adjustments: Json | null
          created_at: string
          created_by: string | null
          description: string | null
          discount_rate: number
          id: string
          is_active: boolean | null
          margin_proxy: number
          model_name: string
          retention_decay_rate: number
          retention_year_1: number
          retention_year_2: number
          retention_year_3: number
          risk_multiplier: number
          tenant_id: string
          updated_at: string
        }
        Insert: {
          aov_growth_rate?: number
          category_adjustments?: Json | null
          created_at?: string
          created_by?: string | null
          description?: string | null
          discount_rate?: number
          id?: string
          is_active?: boolean | null
          margin_proxy?: number
          model_name: string
          retention_decay_rate?: number
          retention_year_1?: number
          retention_year_2?: number
          retention_year_3?: number
          risk_multiplier?: number
          tenant_id: string
          updated_at?: string
        }
        Update: {
          aov_growth_rate?: number
          category_adjustments?: Json | null
          created_at?: string
          created_by?: string | null
          description?: string | null
          discount_rate?: number
          id?: string
          is_active?: boolean | null
          margin_proxy?: number
          model_name?: string
          retention_decay_rate?: number
          retention_year_1?: number
          retention_year_2?: number
          retention_year_3?: number
          risk_multiplier?: number
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_ltv_model_assumptions_created_by_fkey"
            columns: ["created_by"]
            isOneToOne: false
            referencedRelation: "profiles"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_ltv_model_assumptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_ltv_model_assumptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_ltv_model_assumptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_ltv_model_assumptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_order_items: {
        Row: {
          category: string | null
          discount_amount: number | null
          id: string
          image_url: string | null
          integration_id: string | null
          is_returned: boolean | null
          line_cogs: number
          line_margin: number
          line_revenue: number
          order_id: string
          original_price: number | null
          product_id: string | null
          product_name: string | null
          qty: number
          raw_data: Json | null
          return_quantity: number | null
          sku: string | null
          tenant_id: string
          unit_cogs: number | null
          unit_price: number
          variation_name: string | null
          weight: number | null
        }
        Insert: {
          category?: string | null
          discount_amount?: number | null
          id?: string
          image_url?: string | null
          integration_id?: string | null
          is_returned?: boolean | null
          line_cogs?: number
          line_margin?: number
          line_revenue?: number
          order_id: string
          original_price?: number | null
          product_id?: string | null
          product_name?: string | null
          qty?: number
          raw_data?: Json | null
          return_quantity?: number | null
          sku?: string | null
          tenant_id: string
          unit_cogs?: number | null
          unit_price?: number
          variation_name?: string | null
          weight?: number | null
        }
        Update: {
          category?: string | null
          discount_amount?: number | null
          id?: string
          image_url?: string | null
          integration_id?: string | null
          is_returned?: boolean | null
          line_cogs?: number
          line_margin?: number
          line_revenue?: number
          order_id?: string
          original_price?: number | null
          product_id?: string | null
          product_name?: string | null
          qty?: number
          raw_data?: Json | null
          return_quantity?: number | null
          sku?: string | null
          tenant_id?: string
          unit_cogs?: number | null
          unit_price?: number
          variation_name?: string | null
          weight?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_order_items_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "cdp_orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_orders: {
        Row: {
          buyer_id: string | null
          cancel_reason: string | null
          cancelled_at: string | null
          channel: string | null
          cogs: number
          commission_fee: number | null
          created_at: string
          currency: string
          customer_id: string | null
          customer_name: string | null
          customer_phone: string | null
          delivered_at: string | null
          discount_amount: number
          district_name: string | null
          gross_margin: number
          gross_revenue: number
          id: string
          integration_id: string | null
          is_bundle: boolean
          is_discounted: boolean
          item_count: number | null
          last_synced_at: string | null
          net_revenue: number
          order_at: string
          order_key: string
          other_fees: number | null
          paid_at: string | null
          payment_fee: number | null
          payment_method: string | null
          platform_fee: number | null
          province_code: string | null
          province_name: string | null
          raw_data: Json | null
          return_reason: string | null
          returned_at: string | null
          seller_income: number | null
          service_fee: number | null
          shipped_at: string | null
          shipping_carrier: string | null
          shipping_fee: number | null
          shop_id: string | null
          shop_name: string | null
          status: string | null
          tenant_id: string
          total_fees: number | null
          total_quantity: number | null
          tracking_number: string | null
          voucher_discount: number | null
        }
        Insert: {
          buyer_id?: string | null
          cancel_reason?: string | null
          cancelled_at?: string | null
          channel?: string | null
          cogs?: number
          commission_fee?: number | null
          created_at?: string
          currency?: string
          customer_id?: string | null
          customer_name?: string | null
          customer_phone?: string | null
          delivered_at?: string | null
          discount_amount?: number
          district_name?: string | null
          gross_margin?: number
          gross_revenue?: number
          id?: string
          integration_id?: string | null
          is_bundle?: boolean
          is_discounted?: boolean
          item_count?: number | null
          last_synced_at?: string | null
          net_revenue?: number
          order_at: string
          order_key: string
          other_fees?: number | null
          paid_at?: string | null
          payment_fee?: number | null
          payment_method?: string | null
          platform_fee?: number | null
          province_code?: string | null
          province_name?: string | null
          raw_data?: Json | null
          return_reason?: string | null
          returned_at?: string | null
          seller_income?: number | null
          service_fee?: number | null
          shipped_at?: string | null
          shipping_carrier?: string | null
          shipping_fee?: number | null
          shop_id?: string | null
          shop_name?: string | null
          status?: string | null
          tenant_id: string
          total_fees?: number | null
          total_quantity?: number | null
          tracking_number?: string | null
          voucher_discount?: number | null
        }
        Update: {
          buyer_id?: string | null
          cancel_reason?: string | null
          cancelled_at?: string | null
          channel?: string | null
          cogs?: number
          commission_fee?: number | null
          created_at?: string
          currency?: string
          customer_id?: string | null
          customer_name?: string | null
          customer_phone?: string | null
          delivered_at?: string | null
          discount_amount?: number
          district_name?: string | null
          gross_margin?: number
          gross_revenue?: number
          id?: string
          integration_id?: string | null
          is_bundle?: boolean
          is_discounted?: boolean
          item_count?: number | null
          last_synced_at?: string | null
          net_revenue?: number
          order_at?: string
          order_key?: string
          other_fees?: number | null
          paid_at?: string | null
          payment_fee?: number | null
          payment_method?: string | null
          platform_fee?: number | null
          province_code?: string | null
          province_name?: string | null
          raw_data?: Json | null
          return_reason?: string | null
          returned_at?: string | null
          seller_income?: number | null
          service_fee?: number | null
          shipped_at?: string | null
          shipping_carrier?: string | null
          shipping_fee?: number | null
          shop_id?: string | null
          shop_name?: string | null
          status?: string | null
          tenant_id?: string
          total_fees?: number | null
          total_quantity?: number | null
          tracking_number?: string | null
          voucher_discount?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_payments: {
        Row: {
          amount: number | null
          channel: string | null
          created_at: string
          id: string
          order_key: string | null
          paid_at: string | null
          payment_key: string
          payment_method: string | null
          payment_status: string | null
          raw_data: Json | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          amount?: number | null
          channel?: string | null
          created_at?: string
          id?: string
          order_key?: string | null
          paid_at?: string | null
          payment_key: string
          payment_method?: string | null
          payment_status?: string | null
          raw_data?: Json | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          amount?: number | null
          channel?: string | null
          created_at?: string
          id?: string
          order_key?: string | null
          paid_at?: string | null
          payment_key?: string
          payment_method?: string | null
          payment_status?: string | null
          raw_data?: Json | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_population_changelog: {
        Row: {
          action: string
          changed_at: string | null
          changed_by: string | null
          changes: string | null
          id: string
          metadata: Json | null
          population_id: string | null
          population_name: string | null
          population_type: string | null
          purpose: string | null
          tenant_id: string
          version: string | null
        }
        Insert: {
          action: string
          changed_at?: string | null
          changed_by?: string | null
          changes?: string | null
          id?: string
          metadata?: Json | null
          population_id?: string | null
          population_name?: string | null
          population_type?: string | null
          purpose?: string | null
          tenant_id: string
          version?: string | null
        }
        Update: {
          action?: string
          changed_at?: string | null
          changed_by?: string | null
          changes?: string | null
          id?: string
          metadata?: Json | null
          population_id?: string | null
          population_name?: string | null
          population_type?: string | null
          purpose?: string | null
          tenant_id?: string
          version?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_product_forecasts: {
        Row: {
          accuracy_pct: number | null
          actual_orders: number | null
          benchmark_auto_suggested: string[] | null
          benchmark_manual_selected: string[] | null
          benchmark_product_ids: string[] | null
          calculation_details: Json | null
          confidence_level: string | null
          conversion_rate: number | null
          created_at: string | null
          created_by: string | null
          estimated_existing_orders: number | null
          estimated_new_orders: number | null
          estimated_total_orders: number | null
          forecast_name: string
          id: string
          matched_customer_count: number | null
          new_customer_pct: number | null
          product_definition: Json
          status: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          accuracy_pct?: number | null
          actual_orders?: number | null
          benchmark_auto_suggested?: string[] | null
          benchmark_manual_selected?: string[] | null
          benchmark_product_ids?: string[] | null
          calculation_details?: Json | null
          confidence_level?: string | null
          conversion_rate?: number | null
          created_at?: string | null
          created_by?: string | null
          estimated_existing_orders?: number | null
          estimated_new_orders?: number | null
          estimated_total_orders?: number | null
          forecast_name: string
          id?: string
          matched_customer_count?: number | null
          new_customer_pct?: number | null
          product_definition?: Json
          status?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          accuracy_pct?: number | null
          actual_orders?: number | null
          benchmark_auto_suggested?: string[] | null
          benchmark_manual_selected?: string[] | null
          benchmark_product_ids?: string[] | null
          calculation_details?: Json | null
          confidence_level?: string | null
          conversion_rate?: number | null
          created_at?: string | null
          created_by?: string | null
          estimated_existing_orders?: number | null
          estimated_new_orders?: number | null
          estimated_total_orders?: number | null
          forecast_name?: string
          id?: string
          matched_customer_count?: number | null
          new_customer_pct?: number | null
          product_definition?: Json
          status?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_product_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_product_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_product_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_product_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_refunds: {
        Row: {
          created_at: string
          customer_id: string | null
          id: string
          order_id: string | null
          reason: string | null
          refund_amount: number
          refund_at: string
          refund_key: string
          tenant_id: string
        }
        Insert: {
          created_at?: string
          customer_id?: string | null
          id?: string
          order_id?: string | null
          reason?: string | null
          refund_amount?: number
          refund_at: string
          refund_key: string
          tenant_id: string
        }
        Update: {
          created_at?: string
          customer_id?: string | null
          id?: string
          order_id?: string | null
          reason?: string | null
          refund_amount?: number
          refund_at?: string
          refund_key?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_refunds_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_refunds_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_refunds_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_refunds_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "cdp_orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_refunds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_refunds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_refunds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_refunds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_saved_views: {
        Row: {
          created_at: string | null
          created_by: string | null
          customer_count: number | null
          description: string | null
          filter_criteria: Json | null
          id: string
          is_active: boolean | null
          linked_decisions: number | null
          linked_insights: number | null
          name: string
          purpose: string | null
          revenue_share: number | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          created_at?: string | null
          created_by?: string | null
          customer_count?: number | null
          description?: string | null
          filter_criteria?: Json | null
          id?: string
          is_active?: boolean | null
          linked_decisions?: number | null
          linked_insights?: number | null
          name: string
          purpose?: string | null
          revenue_share?: number | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          created_at?: string | null
          created_by?: string | null
          customer_count?: number | null
          description?: string | null
          filter_criteria?: Json | null
          id?: string
          is_active?: boolean | null
          linked_decisions?: number | null
          linked_insights?: number | null
          name?: string
          purpose?: string | null
          revenue_share?: number | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_segment_ltv_for_mdp: {
        Row: {
          avg_ltv: number | null
          avg_order_frequency: number | null
          avg_order_value: number | null
          churn_rate: number | null
          created_at: string
          customer_count: number | null
          id: string
          ltv_cac_target_ratio: number | null
          priority_score: number | null
          recommended_cac_ceiling: number | null
          segment_id: string | null
          segment_name: string
          segment_type: string | null
          synced_at: string
          tenant_id: string
          total_equity: number | null
          valid_from: string
          valid_until: string | null
        }
        Insert: {
          avg_ltv?: number | null
          avg_order_frequency?: number | null
          avg_order_value?: number | null
          churn_rate?: number | null
          created_at?: string
          customer_count?: number | null
          id?: string
          ltv_cac_target_ratio?: number | null
          priority_score?: number | null
          recommended_cac_ceiling?: number | null
          segment_id?: string | null
          segment_name: string
          segment_type?: string | null
          synced_at?: string
          tenant_id: string
          total_equity?: number | null
          valid_from?: string
          valid_until?: string | null
        }
        Update: {
          avg_ltv?: number | null
          avg_order_frequency?: number | null
          avg_order_value?: number | null
          churn_rate?: number | null
          created_at?: string
          customer_count?: number | null
          id?: string
          ltv_cac_target_ratio?: number | null
          priority_score?: number | null
          recommended_cac_ceiling?: number | null
          segment_id?: string | null
          segment_name?: string
          segment_type?: string | null
          synced_at?: string
          tenant_id?: string
          total_equity?: number | null
          valid_from?: string
          valid_until?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_segment_ltv_for_mdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_ltv_for_mdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_ltv_for_mdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_ltv_for_mdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_segment_membership_daily: {
        Row: {
          as_of_date: string
          customer_id: string
          is_member: boolean
          segment_id: string
          segment_version: number
          tenant_id: string
        }
        Insert: {
          as_of_date: string
          customer_id: string
          is_member?: boolean
          segment_id: string
          segment_version: number
          tenant_id: string
        }
        Update: {
          as_of_date?: string
          customer_id?: string
          is_member?: boolean
          segment_id?: string
          segment_version?: number
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_segment_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_segment_id_fkey"
            columns: ["segment_id"]
            isOneToOne: false
            referencedRelation: "cdp_segments"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_segment_versions: {
        Row: {
          created_at: string
          definition_json: Json
          effective_from: string
          effective_to: string | null
          id: string
          segment_id: string
          tenant_id: string
          version: number
        }
        Insert: {
          created_at?: string
          definition_json: Json
          effective_from: string
          effective_to?: string | null
          id?: string
          segment_id: string
          tenant_id: string
          version: number
        }
        Update: {
          created_at?: string
          definition_json?: Json
          effective_from?: string
          effective_to?: string | null
          id?: string
          segment_id?: string
          tenant_id?: string
          version?: number
        }
        Relationships: [
          {
            foreignKeyName: "cdp_segment_versions_segment_id_fkey"
            columns: ["segment_id"]
            isOneToOne: false
            referencedRelation: "cdp_segments"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_versions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_versions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_versions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_versions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_segments: {
        Row: {
          created_at: string
          definition_json: Json
          description: string | null
          id: string
          name: string
          owner_role: string
          status: string
          tenant_id: string
          updated_at: string
          version: number
        }
        Insert: {
          created_at?: string
          definition_json?: Json
          description?: string | null
          id?: string
          name: string
          owner_role?: string
          status?: string
          tenant_id: string
          updated_at?: string
          version?: number
        }
        Update: {
          created_at?: string
          definition_json?: Json
          description?: string | null
          id?: string
          name?: string
          owner_role?: string
          status?: string
          tenant_id?: string
          updated_at?: string
          version?: number
        }
        Relationships: [
          {
            foreignKeyName: "cdp_segments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cdp_value_tier_membership_daily: {
        Row: {
          as_of_date: string
          created_at: string
          customer_id: string
          is_member: boolean
          metric_name: string
          metric_value: number
          tenant_id: string
          tier_label: string
        }
        Insert: {
          as_of_date: string
          created_at?: string
          customer_id: string
          is_member?: boolean
          metric_name?: string
          metric_value?: number
          tenant_id: string
          tier_label: string
        }
        Update: {
          as_of_date?: string
          created_at?: string
          customer_id?: string
          is_member?: boolean
          metric_name?: string
          metric_value?: number
          tenant_id?: string
          tier_label?: string
        }
        Relationships: [
          {
            foreignKeyName: "cdp_value_tier_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_value_tier_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_value_tier_membership_daily_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_value_tier_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_value_tier_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_value_tier_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_value_tier_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      central_metric_facts: {
        Row: {
          cost: number
          created_at: string
          grain_id: string
          grain_name: string | null
          grain_type: string
          id: string
          margin_percent: number
          order_count: number
          period_end: string
          period_start: string
          profit: number
          profit_rank: number | null
          quantity: number
          revenue: number
          revenue_rank: number | null
          snapshot_id: string | null
          tenant_id: string
        }
        Insert: {
          cost?: number
          created_at?: string
          grain_id: string
          grain_name?: string | null
          grain_type: string
          id?: string
          margin_percent?: number
          order_count?: number
          period_end: string
          period_start: string
          profit?: number
          profit_rank?: number | null
          quantity?: number
          revenue?: number
          revenue_rank?: number | null
          snapshot_id?: string | null
          tenant_id: string
        }
        Update: {
          cost?: number
          created_at?: string
          grain_id?: string
          grain_name?: string | null
          grain_type?: string
          id?: string
          margin_percent?: number
          order_count?: number
          period_end?: string
          period_start?: string
          profit?: number
          profit_rank?: number | null
          quantity?: number
          revenue?: number
          revenue_rank?: number | null
          snapshot_id?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "central_metric_facts_snapshot_id_fkey"
            columns: ["snapshot_id"]
            isOneToOne: false
            referencedRelation: "central_metrics_snapshots"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metric_facts_snapshot_id_fkey"
            columns: ["snapshot_id"]
            isOneToOne: false
            referencedRelation: "v_latest_central_metrics"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metric_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metric_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metric_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metric_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      central_metric_facts_summary: {
        Row: {
          avg_margin_percent: number | null
          created_at: string
          grain_type: string
          id: string
          period_end: string | null
          period_start: string | null
          tenant_id: string
          total_cost: number | null
          total_items: number | null
          total_orders: number | null
          total_profit: number | null
          total_quantity: number | null
          total_revenue: number | null
          updated_at: string
        }
        Insert: {
          avg_margin_percent?: number | null
          created_at?: string
          grain_type: string
          id?: string
          period_end?: string | null
          period_start?: string | null
          tenant_id: string
          total_cost?: number | null
          total_items?: number | null
          total_orders?: number | null
          total_profit?: number | null
          total_quantity?: number | null
          total_revenue?: number | null
          updated_at?: string
        }
        Update: {
          avg_margin_percent?: number | null
          created_at?: string
          grain_type?: string
          id?: string
          period_end?: string | null
          period_start?: string | null
          tenant_id?: string
          total_cost?: number | null
          total_items?: number | null
          total_orders?: number | null
          total_profit?: number | null
          total_quantity?: number | null
          total_revenue?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "central_metric_facts_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metric_facts_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metric_facts_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metric_facts_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      central_metrics_snapshots: {
        Row: {
          ar_aging_30d: number
          ar_aging_60d: number
          ar_aging_90d: number
          ar_aging_current: number
          avg_order_value: number
          cac: number
          cash_7d_forecast: number
          cash_runway_months: number
          cash_today: number
          ccc: number
          computation_duration_ms: number | null
          compute_function: string | null
          compute_version: string | null
          computed_by: string | null
          contribution_margin: number
          contribution_margin_percent: number
          created_at: string
          dio: number
          dpo: number
          dso: number
          ebitda: number
          ebitda_margin_percent: number
          gross_margin_percent: number
          gross_profit: number
          id: string
          input_hash: string | null
          locked_cash_ads: number | null
          locked_cash_inventory: number | null
          locked_cash_ops: number | null
          locked_cash_platform: number | null
          locked_cash_total: number | null
          ltv: number
          ltv_cac_ratio: number
          marketing_roas: number
          net_revenue: number
          overdue_ap: number
          overdue_ar: number
          period_end: string
          period_start: string
          repeat_customer_rate: number
          slow_moving_inventory: number
          snapshot_at: string
          tenant_id: string
          total_ap: number
          total_ar: number
          total_customers: number
          total_inventory_value: number
          total_marketing_spend: number
          total_orders: number
        }
        Insert: {
          ar_aging_30d?: number
          ar_aging_60d?: number
          ar_aging_90d?: number
          ar_aging_current?: number
          avg_order_value?: number
          cac?: number
          cash_7d_forecast?: number
          cash_runway_months?: number
          cash_today?: number
          ccc?: number
          computation_duration_ms?: number | null
          compute_function?: string | null
          compute_version?: string | null
          computed_by?: string | null
          contribution_margin?: number
          contribution_margin_percent?: number
          created_at?: string
          dio?: number
          dpo?: number
          dso?: number
          ebitda?: number
          ebitda_margin_percent?: number
          gross_margin_percent?: number
          gross_profit?: number
          id?: string
          input_hash?: string | null
          locked_cash_ads?: number | null
          locked_cash_inventory?: number | null
          locked_cash_ops?: number | null
          locked_cash_platform?: number | null
          locked_cash_total?: number | null
          ltv?: number
          ltv_cac_ratio?: number
          marketing_roas?: number
          net_revenue?: number
          overdue_ap?: number
          overdue_ar?: number
          period_end: string
          period_start: string
          repeat_customer_rate?: number
          slow_moving_inventory?: number
          snapshot_at?: string
          tenant_id: string
          total_ap?: number
          total_ar?: number
          total_customers?: number
          total_inventory_value?: number
          total_marketing_spend?: number
          total_orders?: number
        }
        Update: {
          ar_aging_30d?: number
          ar_aging_60d?: number
          ar_aging_90d?: number
          ar_aging_current?: number
          avg_order_value?: number
          cac?: number
          cash_7d_forecast?: number
          cash_runway_months?: number
          cash_today?: number
          ccc?: number
          computation_duration_ms?: number | null
          compute_function?: string | null
          compute_version?: string | null
          computed_by?: string | null
          contribution_margin?: number
          contribution_margin_percent?: number
          created_at?: string
          dio?: number
          dpo?: number
          dso?: number
          ebitda?: number
          ebitda_margin_percent?: number
          gross_margin_percent?: number
          gross_profit?: number
          id?: string
          input_hash?: string | null
          locked_cash_ads?: number | null
          locked_cash_inventory?: number | null
          locked_cash_ops?: number | null
          locked_cash_platform?: number | null
          locked_cash_total?: number | null
          ltv?: number
          ltv_cac_ratio?: number
          marketing_roas?: number
          net_revenue?: number
          overdue_ap?: number
          overdue_ar?: number
          period_end?: string
          period_start?: string
          repeat_customer_rate?: number
          slow_moving_inventory?: number
          snapshot_at?: string
          tenant_id?: string
          total_ap?: number
          total_ar?: number
          total_customers?: number
          total_inventory_value?: number
          total_marketing_spend?: number
          total_orders?: number
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      channel_analytics: {
        Row: {
          analytics_date: string
          avg_order_value: number | null
          bounce_rate: number | null
          channel: string
          conversion_rate: number | null
          created_at: string | null
          gross_margin: number | null
          id: string
          marketing_cost: number | null
          platform_fee: number | null
          prev_aov: number | null
          prev_platform_fee: number | null
          prev_revenue: number | null
          prev_shop_score: number | null
          response_rate: number | null
          revenue: number | null
          sessions: number | null
          shipping_cost: number | null
          shop_rating: number | null
          shop_score: number | null
          tenant_id: string
          total_cogs: number | null
          total_orders: number | null
          unique_visitors: number | null
          updated_at: string | null
        }
        Insert: {
          analytics_date: string
          avg_order_value?: number | null
          bounce_rate?: number | null
          channel: string
          conversion_rate?: number | null
          created_at?: string | null
          gross_margin?: number | null
          id?: string
          marketing_cost?: number | null
          platform_fee?: number | null
          prev_aov?: number | null
          prev_platform_fee?: number | null
          prev_revenue?: number | null
          prev_shop_score?: number | null
          response_rate?: number | null
          revenue?: number | null
          sessions?: number | null
          shipping_cost?: number | null
          shop_rating?: number | null
          shop_score?: number | null
          tenant_id: string
          total_cogs?: number | null
          total_orders?: number | null
          unique_visitors?: number | null
          updated_at?: string | null
        }
        Update: {
          analytics_date?: string
          avg_order_value?: number | null
          bounce_rate?: number | null
          channel?: string
          conversion_rate?: number | null
          created_at?: string | null
          gross_margin?: number | null
          id?: string
          marketing_cost?: number | null
          platform_fee?: number | null
          prev_aov?: number | null
          prev_platform_fee?: number | null
          prev_revenue?: number | null
          prev_shop_score?: number | null
          response_rate?: number | null
          revenue?: number | null
          sessions?: number | null
          shipping_cost?: number | null
          shop_rating?: number | null
          shop_score?: number | null
          tenant_id?: string
          total_cogs?: number | null
          total_orders?: number | null
          unique_visitors?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "channel_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      channel_analytics_cache: {
        Row: {
          avg_order_value: number | null
          calculated_at: string | null
          cancelled_orders: number | null
          channel_metrics: Json | null
          created_at: string | null
          daily_summary: Json | null
          data_end_date: string | null
          data_start_date: string | null
          fee_breakdown: Json | null
          gross_profit: number | null
          gross_revenue: number | null
          id: string
          net_revenue: number | null
          returned_orders: number | null
          status_breakdown: Json | null
          tenant_id: string
          total_cogs: number | null
          total_fees: number | null
          total_orders: number | null
          updated_at: string | null
        }
        Insert: {
          avg_order_value?: number | null
          calculated_at?: string | null
          cancelled_orders?: number | null
          channel_metrics?: Json | null
          created_at?: string | null
          daily_summary?: Json | null
          data_end_date?: string | null
          data_start_date?: string | null
          fee_breakdown?: Json | null
          gross_profit?: number | null
          gross_revenue?: number | null
          id?: string
          net_revenue?: number | null
          returned_orders?: number | null
          status_breakdown?: Json | null
          tenant_id: string
          total_cogs?: number | null
          total_fees?: number | null
          total_orders?: number | null
          updated_at?: string | null
        }
        Update: {
          avg_order_value?: number | null
          calculated_at?: string | null
          cancelled_orders?: number | null
          channel_metrics?: Json | null
          created_at?: string | null
          daily_summary?: Json | null
          data_end_date?: string | null
          data_start_date?: string | null
          fee_breakdown?: Json | null
          gross_profit?: number | null
          gross_revenue?: number | null
          id?: string
          net_revenue?: number | null
          returned_orders?: number | null
          status_breakdown?: Json | null
          tenant_id?: string
          total_cogs?: number | null
          total_fees?: number | null
          total_orders?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      channel_budgets: {
        Row: {
          budget_amount: number | null
          channel: string
          created_at: string
          created_by: string | null
          id: string
          is_active: boolean | null
          max_cpa: number | null
          min_contribution_margin: number | null
          month: number
          notes: string | null
          revenue_target: number | null
          target_ctr: number | null
          target_cvr: number | null
          target_roas: number | null
          tenant_id: string
          updated_at: string
          year: number
        }
        Insert: {
          budget_amount?: number | null
          channel: string
          created_at?: string
          created_by?: string | null
          id?: string
          is_active?: boolean | null
          max_cpa?: number | null
          min_contribution_margin?: number | null
          month?: number
          notes?: string | null
          revenue_target?: number | null
          target_ctr?: number | null
          target_cvr?: number | null
          target_roas?: number | null
          tenant_id: string
          updated_at?: string
          year?: number
        }
        Update: {
          budget_amount?: number | null
          channel?: string
          created_at?: string
          created_by?: string | null
          id?: string
          is_active?: boolean | null
          max_cpa?: number | null
          min_contribution_margin?: number | null
          month?: number
          notes?: string | null
          revenue_target?: number | null
          target_ctr?: number | null
          target_cvr?: number | null
          target_roas?: number | null
          tenant_id?: string
          updated_at?: string
          year?: number
        }
        Relationships: [
          {
            foreignKeyName: "channel_budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_budgets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      channel_fees: {
        Row: {
          amount: number
          created_at: string | null
          currency: string | null
          description: string | null
          external_order_id: string | null
          fee_category: string | null
          fee_date: string
          fee_type: string
          id: string
          integration_id: string
          period_end: string | null
          period_start: string | null
          raw_data: Json | null
          reference_id: string | null
          tenant_id: string
        }
        Insert: {
          amount?: number
          created_at?: string | null
          currency?: string | null
          description?: string | null
          external_order_id?: string | null
          fee_category?: string | null
          fee_date: string
          fee_type: string
          id?: string
          integration_id: string
          period_end?: string | null
          period_start?: string | null
          raw_data?: Json | null
          reference_id?: string | null
          tenant_id: string
        }
        Update: {
          amount?: number
          created_at?: string | null
          currency?: string | null
          description?: string | null
          external_order_id?: string | null
          fee_category?: string | null
          fee_date?: string
          fee_type?: string
          id?: string
          integration_id?: string
          period_end?: string | null
          period_start?: string | null
          raw_data?: Json | null
          reference_id?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "channel_fees_external_order_id_fkey"
            columns: ["external_order_id"]
            isOneToOne: false
            referencedRelation: "external_orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_fees_external_order_id_fkey"
            columns: ["external_order_id"]
            isOneToOne: false
            referencedRelation: "mv_cdp_order_items_enriched"
            referencedColumns: ["order_id"]
          },
          {
            foreignKeyName: "channel_fees_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_fees_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_fees_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_fees_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_fees_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      channel_settlements: {
        Row: {
          bank_account: string | null
          bank_name: string | null
          created_at: string | null
          fee_breakdown: Json | null
          gross_sales: number | null
          id: string
          integration_id: string
          is_reconciled: boolean | null
          net_amount: number | null
          order_ids: Json | null
          payout_date: string | null
          period_end: string
          period_start: string
          raw_data: Json | null
          reconciled_at: string | null
          reconciled_by: string | null
          settlement_id: string
          settlement_number: string | null
          status: Database["public"]["Enums"]["settlement_status"] | null
          tenant_id: string
          total_adjustments: number | null
          total_commission: number | null
          total_fees: number | null
          total_orders: number | null
          total_payment_fee: number | null
          total_refunds: number | null
          total_service_fee: number | null
          total_shipping_fee: number | null
          transaction_id: string | null
          updated_at: string | null
          variance_amount: number | null
          variance_notes: string | null
        }
        Insert: {
          bank_account?: string | null
          bank_name?: string | null
          created_at?: string | null
          fee_breakdown?: Json | null
          gross_sales?: number | null
          id?: string
          integration_id: string
          is_reconciled?: boolean | null
          net_amount?: number | null
          order_ids?: Json | null
          payout_date?: string | null
          period_end: string
          period_start: string
          raw_data?: Json | null
          reconciled_at?: string | null
          reconciled_by?: string | null
          settlement_id: string
          settlement_number?: string | null
          status?: Database["public"]["Enums"]["settlement_status"] | null
          tenant_id: string
          total_adjustments?: number | null
          total_commission?: number | null
          total_fees?: number | null
          total_orders?: number | null
          total_payment_fee?: number | null
          total_refunds?: number | null
          total_service_fee?: number | null
          total_shipping_fee?: number | null
          transaction_id?: string | null
          updated_at?: string | null
          variance_amount?: number | null
          variance_notes?: string | null
        }
        Update: {
          bank_account?: string | null
          bank_name?: string | null
          created_at?: string | null
          fee_breakdown?: Json | null
          gross_sales?: number | null
          id?: string
          integration_id?: string
          is_reconciled?: boolean | null
          net_amount?: number | null
          order_ids?: Json | null
          payout_date?: string | null
          period_end?: string
          period_start?: string
          raw_data?: Json | null
          reconciled_at?: string | null
          reconciled_by?: string | null
          settlement_id?: string
          settlement_number?: string | null
          status?: Database["public"]["Enums"]["settlement_status"] | null
          tenant_id?: string
          total_adjustments?: number | null
          total_commission?: number | null
          total_fees?: number | null
          total_orders?: number | null
          total_payment_fee?: number | null
          total_refunds?: number | null
          total_service_fee?: number | null
          total_shipping_fee?: number | null
          transaction_id?: string | null
          updated_at?: string | null
          variance_amount?: number | null
          variance_notes?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "channel_settlements_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_settlements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_settlements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_settlements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_settlements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      chat_messages: {
        Row: {
          channel: string
          conversation_id: string | null
          created_at: string | null
          customer_id: string | null
          id: string
          is_read: boolean | null
          is_responded: boolean | null
          message_content: string | null
          message_type: string
          received_at: string | null
          responded_at: string | null
          response_time_minutes: number | null
          tenant_id: string
        }
        Insert: {
          channel: string
          conversation_id?: string | null
          created_at?: string | null
          customer_id?: string | null
          id?: string
          is_read?: boolean | null
          is_responded?: boolean | null
          message_content?: string | null
          message_type: string
          received_at?: string | null
          responded_at?: string | null
          response_time_minutes?: number | null
          tenant_id: string
        }
        Update: {
          channel?: string
          conversation_id?: string | null
          created_at?: string | null
          customer_id?: string | null
          id?: string
          is_read?: boolean | null
          is_responded?: boolean | null
          message_content?: string | null
          message_type?: string
          received_at?: string | null
          responded_at?: string | null
          response_time_minutes?: number | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "chat_messages_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "chat_messages_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "chat_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "chat_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "chat_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "chat_messages_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      commerce_events: {
        Row: {
          channel: string | null
          created_at: string | null
          customer_id: string | null
          event_at: string
          event_type: string
          id: string
          order_id: string | null
          product_id: string | null
          properties: Json | null
          tenant_id: string
        }
        Insert: {
          channel?: string | null
          created_at?: string | null
          customer_id?: string | null
          event_at?: string
          event_type: string
          id?: string
          order_id?: string | null
          product_id?: string | null
          properties?: Json | null
          tenant_id: string
        }
        Update: {
          channel?: string | null
          created_at?: string | null
          customer_id?: string | null
          event_at?: string
          event_type?: string
          id?: string
          order_id?: string | null
          product_id?: string | null
          properties?: Json | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "commerce_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "commerce_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "commerce_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "commerce_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      compute_job_runs: {
        Row: {
          completed_at: string | null
          created_at: string | null
          duration_ms: number | null
          error_code: string | null
          error_message: string | null
          function_version: string | null
          id: string
          input_params: Json | null
          job_name: string
          job_trigger: string
          output_snapshot_id: string | null
          output_summary: Json | null
          output_table: string | null
          retry_count: number | null
          rows_affected: number | null
          rows_inserted: number | null
          rows_updated: number | null
          snapshot_date: string
          snapshot_type: string | null
          started_at: string
          status: string | null
          tenant_id: string
        }
        Insert: {
          completed_at?: string | null
          created_at?: string | null
          duration_ms?: number | null
          error_code?: string | null
          error_message?: string | null
          function_version?: string | null
          id?: string
          input_params?: Json | null
          job_name: string
          job_trigger: string
          output_snapshot_id?: string | null
          output_summary?: Json | null
          output_table?: string | null
          retry_count?: number | null
          rows_affected?: number | null
          rows_inserted?: number | null
          rows_updated?: number | null
          snapshot_date: string
          snapshot_type?: string | null
          started_at?: string
          status?: string | null
          tenant_id: string
        }
        Update: {
          completed_at?: string | null
          created_at?: string | null
          duration_ms?: number | null
          error_code?: string | null
          error_message?: string | null
          function_version?: string | null
          id?: string
          input_params?: Json | null
          job_name?: string
          job_trigger?: string
          output_snapshot_id?: string | null
          output_summary?: Json | null
          output_table?: string | null
          retry_count?: number | null
          rows_affected?: number | null
          rows_inserted?: number | null
          rows_updated?: number | null
          snapshot_date?: string
          snapshot_type?: string | null
          started_at?: string
          status?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      compute_retention_policy: {
        Row: {
          auto_cleanup: boolean | null
          cleanup_schedule: string | null
          created_at: string | null
          id: string
          last_cleanup_at: string | null
          retention_days: number
          rows_deleted_last: number | null
          snapshot_type: string
          table_name: string
          updated_at: string | null
        }
        Insert: {
          auto_cleanup?: boolean | null
          cleanup_schedule?: string | null
          created_at?: string | null
          id?: string
          last_cleanup_at?: string | null
          retention_days?: number
          rows_deleted_last?: number | null
          snapshot_type?: string
          table_name: string
          updated_at?: string | null
        }
        Update: {
          auto_cleanup?: boolean | null
          cleanup_schedule?: string | null
          created_at?: string | null
          id?: string
          last_cleanup_at?: string | null
          retention_days?: number
          rows_deleted_last?: number | null
          snapshot_type?: string
          table_name?: string
          updated_at?: string | null
        }
        Relationships: []
      }
      confidence_calibration_stats: {
        Row: {
          confidence_band: string
          confirmed_correct: number
          empirical_success_rate: number
          id: string
          last_computed_at: string
          rejected: number
          signal_signature: string
          suggestion_type: string
          tenant_id: string
          timed_out: number
          total_suggestions: number
        }
        Insert: {
          confidence_band: string
          confirmed_correct?: number
          empirical_success_rate?: number
          id?: string
          last_computed_at?: string
          rejected?: number
          signal_signature: string
          suggestion_type: string
          tenant_id: string
          timed_out?: number
          total_suggestions?: number
        }
        Update: {
          confidence_band?: string
          confirmed_correct?: number
          empirical_success_rate?: number
          id?: string
          last_computed_at?: string
          rejected?: number
          signal_signature?: string
          suggestion_type?: string
          tenant_id?: string
          timed_out?: number
          total_suggestions?: number
        }
        Relationships: [
          {
            foreignKeyName: "confidence_calibration_stats_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "confidence_calibration_stats_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "confidence_calibration_stats_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "confidence_calibration_stats_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      connector_integrations: {
        Row: {
          connector_name: string
          connector_type: Database["public"]["Enums"]["connector_type"]
          created_at: string | null
          created_by: string | null
          credentials: Json | null
          error_message: string | null
          id: string
          last_sync_at: string | null
          next_sync_at: string | null
          settings: Json | null
          shop_id: string | null
          shop_name: string | null
          status: string | null
          sync_frequency_minutes: number | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          connector_name: string
          connector_type: Database["public"]["Enums"]["connector_type"]
          created_at?: string | null
          created_by?: string | null
          credentials?: Json | null
          error_message?: string | null
          id?: string
          last_sync_at?: string | null
          next_sync_at?: string | null
          settings?: Json | null
          shop_id?: string | null
          shop_name?: string | null
          status?: string | null
          sync_frequency_minutes?: number | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          connector_name?: string
          connector_type?: Database["public"]["Enums"]["connector_type"]
          created_at?: string | null
          created_by?: string | null
          credentials?: Json | null
          error_message?: string | null
          id?: string
          last_sync_at?: string | null
          next_sync_at?: string | null
          settings?: Json | null
          shop_id?: string | null
          shop_name?: string | null
          status?: string | null
          sync_frequency_minutes?: number | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "connector_integrations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "connector_integrations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "connector_integrations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "connector_integrations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      control_tower_priority_queue: {
        Row: {
          action_url: string | null
          assigned_to: string | null
          created_at: string
          description: string | null
          id: string
          impact_amount: number | null
          priority_score: number | null
          recommended_action: string | null
          signal_type: string
          source_id: string | null
          source_module: string
          status: string
          tenant_id: string
          title: string
          updated_at: string
          urgency_hours: number | null
        }
        Insert: {
          action_url?: string | null
          assigned_to?: string | null
          created_at?: string
          description?: string | null
          id?: string
          impact_amount?: number | null
          priority_score?: number | null
          recommended_action?: string | null
          signal_type: string
          source_id?: string | null
          source_module: string
          status?: string
          tenant_id: string
          title: string
          updated_at?: string
          urgency_hours?: number | null
        }
        Update: {
          action_url?: string | null
          assigned_to?: string | null
          created_at?: string
          description?: string | null
          id?: string
          impact_amount?: number | null
          priority_score?: number | null
          recommended_action?: string | null
          signal_type?: string
          source_id?: string | null
          source_module?: string
          status?: string
          tenant_id?: string
          title?: string
          updated_at?: string
          urgency_hours?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "control_tower_priority_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "control_tower_priority_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "control_tower_priority_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "control_tower_priority_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cost_centers: {
        Row: {
          budget_amount: number | null
          code: string
          created_at: string
          id: string
          is_active: boolean
          manager_id: string | null
          name: string
          parent_id: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          budget_amount?: number | null
          code: string
          created_at?: string
          id?: string
          is_active?: boolean
          manager_id?: string | null
          name: string
          parent_id?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          budget_amount?: number | null
          code?: string
          created_at?: string
          id?: string
          is_active?: boolean
          manager_id?: string | null
          name?: string
          parent_id?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "cost_centers_parent_id_fkey"
            columns: ["parent_id"]
            isOneToOne: false
            referencedRelation: "cost_centers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cost_centers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cost_centers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cost_centers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cost_centers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      covenant_measurements: {
        Row: {
          calculation_details: Json | null
          covenant_id: string
          created_at: string
          denominator_value: number | null
          id: string
          measured_by: string | null
          measured_value: number
          measurement_date: string
          notes: string | null
          numerator_value: number | null
          status: string
          tenant_id: string
        }
        Insert: {
          calculation_details?: Json | null
          covenant_id: string
          created_at?: string
          denominator_value?: number | null
          id?: string
          measured_by?: string | null
          measured_value: number
          measurement_date: string
          notes?: string | null
          numerator_value?: number | null
          status: string
          tenant_id: string
        }
        Update: {
          calculation_details?: Json | null
          covenant_id?: string
          created_at?: string
          denominator_value?: number | null
          id?: string
          measured_by?: string | null
          measured_value?: number
          measurement_date?: string
          notes?: string | null
          numerator_value?: number | null
          status?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "covenant_measurements_covenant_id_fkey"
            columns: ["covenant_id"]
            isOneToOne: false
            referencedRelation: "bank_covenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "covenant_measurements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "covenant_measurements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "covenant_measurements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "covenant_measurements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cross_domain_alert_rules: {
        Row: {
          alert_message_template: string
          alert_title_template: string
          check_frequency_minutes: number | null
          condition_logic: string | null
          conditions: Json
          cooldown_minutes: number | null
          created_at: string | null
          description: string | null
          id: string
          impact_formula: string | null
          impact_unit: string | null
          is_enabled: boolean | null
          last_checked_at: string | null
          rule_code: string
          rule_name: string
          severity: string | null
          suggested_action: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          alert_message_template: string
          alert_title_template: string
          check_frequency_minutes?: number | null
          condition_logic?: string | null
          conditions?: Json
          cooldown_minutes?: number | null
          created_at?: string | null
          description?: string | null
          id?: string
          impact_formula?: string | null
          impact_unit?: string | null
          is_enabled?: boolean | null
          last_checked_at?: string | null
          rule_code: string
          rule_name: string
          severity?: string | null
          suggested_action?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          alert_message_template?: string
          alert_title_template?: string
          check_frequency_minutes?: number | null
          condition_logic?: string | null
          conditions?: Json
          cooldown_minutes?: number | null
          created_at?: string | null
          description?: string | null
          id?: string
          impact_formula?: string | null
          impact_unit?: string | null
          is_enabled?: boolean | null
          last_checked_at?: string | null
          rule_code?: string
          rule_name?: string
          severity?: string | null
          suggested_action?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cross_domain_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cross_domain_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_domain_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_domain_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cross_domain_variance_alerts: {
        Row: {
          acknowledged_at: string | null
          actual_value: number | null
          alert_type: string
          assigned_to: string | null
          created_at: string | null
          evidence_snapshot: Json | null
          expected_value: number | null
          id: string
          metric_code: string
          resolution_notes: string | null
          resolved_at: string | null
          severity: string | null
          source_module: string
          status: string | null
          target_module: string
          tenant_id: string
          updated_at: string | null
          variance_amount: number | null
          variance_percent: number | null
        }
        Insert: {
          acknowledged_at?: string | null
          actual_value?: number | null
          alert_type: string
          assigned_to?: string | null
          created_at?: string | null
          evidence_snapshot?: Json | null
          expected_value?: number | null
          id?: string
          metric_code: string
          resolution_notes?: string | null
          resolved_at?: string | null
          severity?: string | null
          source_module: string
          status?: string | null
          target_module: string
          tenant_id: string
          updated_at?: string | null
          variance_amount?: number | null
          variance_percent?: number | null
        }
        Update: {
          acknowledged_at?: string | null
          actual_value?: number | null
          alert_type?: string
          assigned_to?: string | null
          created_at?: string | null
          evidence_snapshot?: Json | null
          expected_value?: number | null
          id?: string
          metric_code?: string
          resolution_notes?: string | null
          resolved_at?: string | null
          severity?: string | null
          source_module?: string
          status?: string | null
          target_module?: string
          tenant_id?: string
          updated_at?: string | null
          variance_amount?: number | null
          variance_percent?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cross_domain_variance_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cross_domain_variance_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_domain_variance_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_domain_variance_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cross_module_config: {
        Row: {
          category: string
          config_key: string
          config_value: Json
          created_at: string | null
          description: string | null
          id: string
          is_active: boolean | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          category?: string
          config_key: string
          config_value: Json
          created_at?: string | null
          description?: string | null
          id?: string
          is_active?: boolean | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          category?: string
          config_key?: string
          config_value?: Json
          created_at?: string | null
          description?: string | null
          id?: string
          is_active?: boolean | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cross_module_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cross_module_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_module_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_module_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cross_module_revenue_forecast: {
        Row: {
          confidence_level: string | null
          created_at: string | null
          id: string
          month: number
          projected_aov: number | null
          projected_orders: number | null
          projected_revenue: number | null
          source_module: string | null
          source_scenario_id: string | null
          tenant_id: string
          updated_at: string | null
          year: number
        }
        Insert: {
          confidence_level?: string | null
          created_at?: string | null
          id?: string
          month: number
          projected_aov?: number | null
          projected_orders?: number | null
          projected_revenue?: number | null
          source_module?: string | null
          source_scenario_id?: string | null
          tenant_id: string
          updated_at?: string | null
          year: number
        }
        Update: {
          confidence_level?: string | null
          created_at?: string | null
          id?: string
          month?: number
          projected_aov?: number | null
          projected_orders?: number | null
          projected_revenue?: number | null
          source_module?: string | null
          source_scenario_id?: string | null
          tenant_id?: string
          updated_at?: string | null
          year?: number
        }
        Relationships: [
          {
            foreignKeyName: "cross_module_revenue_forecast_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cross_module_revenue_forecast_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_module_revenue_forecast_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cross_module_revenue_forecast_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cs_alerts: {
        Row: {
          acknowledged_at: string | null
          alert_type: string
          assigned_to: string | null
          created_at: string
          description: string | null
          id: string
          metadata: Json | null
          recommended_action: string | null
          resolution_notes: string | null
          resolved_at: string | null
          resolved_by: string | null
          severity: string
          status: string
          tenant_id: string
          title: string
          updated_at: string
        }
        Insert: {
          acknowledged_at?: string | null
          alert_type: string
          assigned_to?: string | null
          created_at?: string
          description?: string | null
          id?: string
          metadata?: Json | null
          recommended_action?: string | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          severity?: string
          status?: string
          tenant_id: string
          title: string
          updated_at?: string
        }
        Update: {
          acknowledged_at?: string | null
          alert_type?: string
          assigned_to?: string | null
          created_at?: string
          description?: string | null
          id?: string
          metadata?: Json | null
          recommended_action?: string | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          severity?: string
          status?: string
          tenant_id?: string
          title?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "cs_alerts_assigned_to_fkey"
            columns: ["assigned_to"]
            isOneToOne: false
            referencedRelation: "profiles"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cs_alerts_resolved_by_fkey"
            columns: ["resolved_by"]
            isOneToOne: false
            referencedRelation: "profiles"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cs_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cs_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cs_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cs_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      currencies: {
        Row: {
          code: string
          created_at: string
          decimal_places: number | null
          id: string
          is_active: boolean
          is_base: boolean | null
          name: string
          symbol: string | null
          tenant_id: string
        }
        Insert: {
          code: string
          created_at?: string
          decimal_places?: number | null
          id?: string
          is_active?: boolean
          is_base?: boolean | null
          name: string
          symbol?: string | null
          tenant_id: string
        }
        Update: {
          code?: string
          created_at?: string
          decimal_places?: number | null
          id?: string
          is_active?: boolean
          is_base?: boolean | null
          name?: string
          symbol?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "currencies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "currencies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "currencies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "currencies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      customers: {
        Row: {
          acquisition_cost: number | null
          address: string | null
          city: string | null
          clv_value: number | null
          country: string | null
          created_at: string
          credit_limit: number | null
          currency_code: string | null
          customer_type: string | null
          district: string | null
          email: string | null
          external_customer_id: string | null
          gl_receivable_account_id: string | null
          id: string
          last_order_date: string | null
          name: string
          notes: string | null
          payment_term_id: string | null
          payment_terms: number | null
          phone: string | null
          prev_clv_value: number | null
          province: string | null
          status: string | null
          tax_code: string | null
          tenant_id: string | null
          total_orders: number | null
          updated_at: string
          ward: string | null
        }
        Insert: {
          acquisition_cost?: number | null
          address?: string | null
          city?: string | null
          clv_value?: number | null
          country?: string | null
          created_at?: string
          credit_limit?: number | null
          currency_code?: string | null
          customer_type?: string | null
          district?: string | null
          email?: string | null
          external_customer_id?: string | null
          gl_receivable_account_id?: string | null
          id?: string
          last_order_date?: string | null
          name: string
          notes?: string | null
          payment_term_id?: string | null
          payment_terms?: number | null
          phone?: string | null
          prev_clv_value?: number | null
          province?: string | null
          status?: string | null
          tax_code?: string | null
          tenant_id?: string | null
          total_orders?: number | null
          updated_at?: string
          ward?: string | null
        }
        Update: {
          acquisition_cost?: number | null
          address?: string | null
          city?: string | null
          clv_value?: number | null
          country?: string | null
          created_at?: string
          credit_limit?: number | null
          currency_code?: string | null
          customer_type?: string | null
          district?: string | null
          email?: string | null
          external_customer_id?: string | null
          gl_receivable_account_id?: string | null
          id?: string
          last_order_date?: string | null
          name?: string
          notes?: string | null
          payment_term_id?: string | null
          payment_terms?: number | null
          phone?: string | null
          prev_clv_value?: number | null
          province?: string | null
          status?: string | null
          tax_code?: string | null
          tenant_id?: string | null
          total_orders?: number | null
          updated_at?: string
          ward?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "customers_gl_receivable_account_id_fkey"
            columns: ["gl_receivable_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "customers_payment_term_id_fkey"
            columns: ["payment_term_id"]
            isOneToOne: false
            referencedRelation: "payment_terms"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      daily_sync_runs: {
        Row: {
          completed_at: string | null
          created_at: string
          date_from: string | null
          error_summary: string | null
          failed_count: number | null
          id: string
          results: Json | null
          run_type: string
          started_at: string
          status: string
          succeeded_count: number | null
          tenant_id: string
          total_duration_ms: number | null
          total_models: number | null
          total_records_processed: number | null
          triggered_by: string | null
        }
        Insert: {
          completed_at?: string | null
          created_at?: string
          date_from?: string | null
          error_summary?: string | null
          failed_count?: number | null
          id?: string
          results?: Json | null
          run_type?: string
          started_at?: string
          status?: string
          succeeded_count?: number | null
          tenant_id?: string
          total_duration_ms?: number | null
          total_models?: number | null
          total_records_processed?: number | null
          triggered_by?: string | null
        }
        Update: {
          completed_at?: string | null
          created_at?: string
          date_from?: string | null
          error_summary?: string | null
          failed_count?: number | null
          id?: string
          results?: Json | null
          run_type?: string
          started_at?: string
          status?: string
          succeeded_count?: number | null
          tenant_id?: string
          total_duration_ms?: number | null
          total_models?: number | null
          total_records_processed?: number | null
          triggered_by?: string | null
        }
        Relationships: []
      }
      dashboard_kpi_cache: {
        Row: {
          auto_match_rate: number | null
          calculated_at: string | null
          cash_7d: number | null
          cash_flow: number | null
          cash_today: number | null
          ccc: number | null
          contract_revenue: number | null
          created_at: string | null
          daily_cogs: number | null
          daily_purchases: number | null
          daily_sales: number | null
          date_range_end: string | null
          date_range_start: string | null
          days_in_period: number | null
          depreciation: number | null
          dio: number | null
          dpo: number | null
          dso: number | null
          ebitda: number | null
          ebitda_margin: number | null
          gross_margin: number | null
          gross_profit: number | null
          id: string
          interest_expense: number | null
          inventory: number | null
          invoice_count: number | null
          invoice_revenue: number | null
          matched_transaction_count: number | null
          net_profit: number | null
          net_profit_margin: number | null
          net_revenue: number | null
          operating_margin: number | null
          order_revenue: number | null
          overdue_ar: number | null
          overdue_invoice_count: number | null
          tax_expense: number | null
          tenant_id: string
          total_ap: number | null
          total_ar: number | null
          total_cogs: number | null
          total_opex: number | null
          total_revenue: number | null
          transaction_count: number | null
          updated_at: string | null
          working_capital: number | null
        }
        Insert: {
          auto_match_rate?: number | null
          calculated_at?: string | null
          cash_7d?: number | null
          cash_flow?: number | null
          cash_today?: number | null
          ccc?: number | null
          contract_revenue?: number | null
          created_at?: string | null
          daily_cogs?: number | null
          daily_purchases?: number | null
          daily_sales?: number | null
          date_range_end?: string | null
          date_range_start?: string | null
          days_in_period?: number | null
          depreciation?: number | null
          dio?: number | null
          dpo?: number | null
          dso?: number | null
          ebitda?: number | null
          ebitda_margin?: number | null
          gross_margin?: number | null
          gross_profit?: number | null
          id?: string
          interest_expense?: number | null
          inventory?: number | null
          invoice_count?: number | null
          invoice_revenue?: number | null
          matched_transaction_count?: number | null
          net_profit?: number | null
          net_profit_margin?: number | null
          net_revenue?: number | null
          operating_margin?: number | null
          order_revenue?: number | null
          overdue_ar?: number | null
          overdue_invoice_count?: number | null
          tax_expense?: number | null
          tenant_id: string
          total_ap?: number | null
          total_ar?: number | null
          total_cogs?: number | null
          total_opex?: number | null
          total_revenue?: number | null
          transaction_count?: number | null
          updated_at?: string | null
          working_capital?: number | null
        }
        Update: {
          auto_match_rate?: number | null
          calculated_at?: string | null
          cash_7d?: number | null
          cash_flow?: number | null
          cash_today?: number | null
          ccc?: number | null
          contract_revenue?: number | null
          created_at?: string | null
          daily_cogs?: number | null
          daily_purchases?: number | null
          daily_sales?: number | null
          date_range_end?: string | null
          date_range_start?: string | null
          days_in_period?: number | null
          depreciation?: number | null
          dio?: number | null
          dpo?: number | null
          dso?: number | null
          ebitda?: number | null
          ebitda_margin?: number | null
          gross_margin?: number | null
          gross_profit?: number | null
          id?: string
          interest_expense?: number | null
          inventory?: number | null
          invoice_count?: number | null
          invoice_revenue?: number | null
          matched_transaction_count?: number | null
          net_profit?: number | null
          net_profit_margin?: number | null
          net_revenue?: number | null
          operating_margin?: number | null
          order_revenue?: number | null
          overdue_ar?: number | null
          overdue_invoice_count?: number | null
          tax_expense?: number | null
          tenant_id?: string
          total_ap?: number | null
          total_ar?: number | null
          total_cogs?: number | null
          total_opex?: number | null
          total_revenue?: number | null
          transaction_count?: number | null
          updated_at?: string | null
          working_capital?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "dashboard_kpi_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "dashboard_kpi_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "dashboard_kpi_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "dashboard_kpi_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      data_watermarks: {
        Row: {
          created_at: string | null
          error_count: number | null
          id: string
          is_active: boolean | null
          last_error: string | null
          last_synced_at: string | null
          metadata: Json | null
          next_sync_at: string | null
          source_name: string
          source_type: string
          sync_frequency_minutes: number | null
          table_name: string
          tenant_id: string
          updated_at: string | null
          watermark_type: string | null
          watermark_value: string
        }
        Insert: {
          created_at?: string | null
          error_count?: number | null
          id?: string
          is_active?: boolean | null
          last_error?: string | null
          last_synced_at?: string | null
          metadata?: Json | null
          next_sync_at?: string | null
          source_name: string
          source_type: string
          sync_frequency_minutes?: number | null
          table_name: string
          tenant_id: string
          updated_at?: string | null
          watermark_type?: string | null
          watermark_value: string
        }
        Update: {
          created_at?: string | null
          error_count?: number | null
          id?: string
          is_active?: boolean | null
          last_error?: string | null
          last_synced_at?: string | null
          metadata?: Json | null
          next_sync_at?: string | null
          source_name?: string
          source_type?: string
          sync_frequency_minutes?: number | null
          table_name?: string
          tenant_id?: string
          updated_at?: string | null
          watermark_type?: string | null
          watermark_value?: string
        }
        Relationships: [
          {
            foreignKeyName: "data_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "data_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "data_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "data_watermarks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_analyses: {
        Row: {
          ai_insights: string | null
          analysis_type: string
          approved_at: string | null
          approved_by: string | null
          created_at: string
          created_by: string | null
          deadline: string | null
          description: string | null
          id: string
          impact: string | null
          parameters: Json
          priority: string | null
          recommendation: string | null
          rejected_at: string | null
          rejected_by: string | null
          rejection_reason: string | null
          results: Json
          status: string | null
          tenant_id: string
          title: string
          updated_at: string
        }
        Insert: {
          ai_insights?: string | null
          analysis_type: string
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          created_by?: string | null
          deadline?: string | null
          description?: string | null
          id?: string
          impact?: string | null
          parameters?: Json
          priority?: string | null
          recommendation?: string | null
          rejected_at?: string | null
          rejected_by?: string | null
          rejection_reason?: string | null
          results?: Json
          status?: string | null
          tenant_id: string
          title: string
          updated_at?: string
        }
        Update: {
          ai_insights?: string | null
          analysis_type?: string
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          created_by?: string | null
          deadline?: string | null
          description?: string | null
          id?: string
          impact?: string | null
          parameters?: Json
          priority?: string | null
          recommendation?: string | null
          rejected_at?: string | null
          rejected_by?: string | null
          rejection_reason?: string | null
          results?: Json
          status?: string | null
          tenant_id?: string
          title?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "decision_analyses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_analyses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_analyses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_analyses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_audit_log: {
        Row: {
          action_label: string | null
          action_parameters: Json | null
          action_type: string
          auto_card_id: string | null
          baseline_metrics: Json | null
          card_id: string | null
          card_snapshot: Json | null
          card_type: string
          comment: string | null
          created_at: string
          decided_at: string
          decided_by: string | null
          decision_status: string | null
          dismiss_reason: string | null
          entity_id: string | null
          entity_label: string | null
          entity_type: string
          expected_impact_amount: number | null
          expected_outcome: string | null
          follow_up_date: string | null
          follow_up_status: string | null
          id: string
          impact_amount: number | null
          impact_currency: string | null
          measurement_config: Json | null
          outcome_notes: string | null
          outcome_recorded_at: string | null
          outcome_tracking_key: string | null
          outcome_value: number | null
          selected_action_label: string | null
          selected_action_type: string | null
          snoozed_until: string | null
          tenant_id: string
        }
        Insert: {
          action_label?: string | null
          action_parameters?: Json | null
          action_type: string
          auto_card_id?: string | null
          baseline_metrics?: Json | null
          card_id?: string | null
          card_snapshot?: Json | null
          card_type: string
          comment?: string | null
          created_at?: string
          decided_at?: string
          decided_by?: string | null
          decision_status?: string | null
          dismiss_reason?: string | null
          entity_id?: string | null
          entity_label?: string | null
          entity_type: string
          expected_impact_amount?: number | null
          expected_outcome?: string | null
          follow_up_date?: string | null
          follow_up_status?: string | null
          id?: string
          impact_amount?: number | null
          impact_currency?: string | null
          measurement_config?: Json | null
          outcome_notes?: string | null
          outcome_recorded_at?: string | null
          outcome_tracking_key?: string | null
          outcome_value?: number | null
          selected_action_label?: string | null
          selected_action_type?: string | null
          snoozed_until?: string | null
          tenant_id: string
        }
        Update: {
          action_label?: string | null
          action_parameters?: Json | null
          action_type?: string
          auto_card_id?: string | null
          baseline_metrics?: Json | null
          card_id?: string | null
          card_snapshot?: Json | null
          card_type?: string
          comment?: string | null
          created_at?: string
          decided_at?: string
          decided_by?: string | null
          decision_status?: string | null
          dismiss_reason?: string | null
          entity_id?: string | null
          entity_label?: string | null
          entity_type?: string
          expected_impact_amount?: number | null
          expected_outcome?: string | null
          follow_up_date?: string | null
          follow_up_status?: string | null
          id?: string
          impact_amount?: number | null
          impact_currency?: string | null
          measurement_config?: Json | null
          outcome_notes?: string | null
          outcome_recorded_at?: string | null
          outcome_tracking_key?: string | null
          outcome_value?: number | null
          selected_action_label?: string | null
          selected_action_type?: string | null
          snoozed_until?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_card_actions: {
        Row: {
          action_type: string
          card_id: string
          created_at: string
          display_order: number | null
          expected_outcome: string | null
          id: string
          is_recommended: boolean | null
          label: string
          parameters: Json | null
          risk_note: string | null
          tenant_id: string
        }
        Insert: {
          action_type: string
          card_id: string
          created_at?: string
          display_order?: number | null
          expected_outcome?: string | null
          id?: string
          is_recommended?: boolean | null
          label: string
          parameters?: Json | null
          risk_note?: string | null
          tenant_id: string
        }
        Update: {
          action_type?: string
          card_id?: string
          created_at?: string
          display_order?: number | null
          expected_outcome?: string | null
          id?: string
          is_recommended?: boolean | null
          label?: string
          parameters?: Json | null
          risk_note?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "decision_card_actions_card_id_fkey"
            columns: ["card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_card_actions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_card_decisions: {
        Row: {
          action_label: string | null
          action_type: string
          card_id: string
          comment: string | null
          decided_at: string
          decided_by: string | null
          dismiss_reason: string | null
          id: string
          outcome_notes: string | null
          outcome_recorded_at: string | null
          outcome_tracking_key: string | null
          outcome_value: number | null
          parameters: Json | null
          tenant_id: string
        }
        Insert: {
          action_label?: string | null
          action_type: string
          card_id: string
          comment?: string | null
          decided_at?: string
          decided_by?: string | null
          dismiss_reason?: string | null
          id?: string
          outcome_notes?: string | null
          outcome_recorded_at?: string | null
          outcome_tracking_key?: string | null
          outcome_value?: number | null
          parameters?: Json | null
          tenant_id: string
        }
        Update: {
          action_label?: string | null
          action_type?: string
          card_id?: string
          comment?: string | null
          decided_at?: string
          decided_by?: string | null
          dismiss_reason?: string | null
          id?: string
          outcome_notes?: string | null
          outcome_recorded_at?: string | null
          outcome_tracking_key?: string | null
          outcome_value?: number | null
          parameters?: Json | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "decision_card_decisions_card_id_fkey"
            columns: ["card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_card_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_card_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_card_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_card_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_card_facts: {
        Row: {
          card_id: string
          created_at: string
          display_order: number | null
          fact_key: string
          id: string
          is_primary: boolean | null
          label: string
          numeric_value: number | null
          tenant_id: string
          trend: string | null
          unit: string | null
          value: string
        }
        Insert: {
          card_id: string
          created_at?: string
          display_order?: number | null
          fact_key: string
          id?: string
          is_primary?: boolean | null
          label: string
          numeric_value?: number | null
          tenant_id: string
          trend?: string | null
          unit?: string | null
          value: string
        }
        Update: {
          card_id?: string
          created_at?: string
          display_order?: number | null
          fact_key?: string
          id?: string
          is_primary?: boolean | null
          label?: string
          numeric_value?: number | null
          tenant_id?: string
          trend?: string | null
          unit?: string | null
          value?: string
        }
        Relationships: [
          {
            foreignKeyName: "decision_card_facts_card_id_fkey"
            columns: ["card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_card_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_card_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_card_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_card_facts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_cards: {
        Row: {
          analysis_metadata: Json | null
          assigned_at: string | null
          auto_card_id: string | null
          card_source: string | null
          card_type: string
          confidence: string | null
          created_at: string
          deadline_at: string
          entity_id: string | null
          entity_label: string
          entity_type: string
          evidence_pack_id: string | null
          id: string
          impact_amount: number | null
          impact_currency: string | null
          impact_description: string | null
          impact_window_days: number | null
          owner_role: string
          owner_user_id: string | null
          priority: string
          question: string
          rule_version: number | null
          severity_score: number | null
          snooze_count: number | null
          snoozed_until: string | null
          source_modules: string[] | null
          status: string
          tenant_id: string
          title: string
          updated_at: string
          vertical: string | null
        }
        Insert: {
          analysis_metadata?: Json | null
          assigned_at?: string | null
          auto_card_id?: string | null
          card_source?: string | null
          card_type: string
          confidence?: string | null
          created_at?: string
          deadline_at: string
          entity_id?: string | null
          entity_label: string
          entity_type: string
          evidence_pack_id?: string | null
          id?: string
          impact_amount?: number | null
          impact_currency?: string | null
          impact_description?: string | null
          impact_window_days?: number | null
          owner_role: string
          owner_user_id?: string | null
          priority?: string
          question: string
          rule_version?: number | null
          severity_score?: number | null
          snooze_count?: number | null
          snoozed_until?: string | null
          source_modules?: string[] | null
          status?: string
          tenant_id: string
          title: string
          updated_at?: string
          vertical?: string | null
        }
        Update: {
          analysis_metadata?: Json | null
          assigned_at?: string | null
          auto_card_id?: string | null
          card_source?: string | null
          card_type?: string
          confidence?: string | null
          created_at?: string
          deadline_at?: string
          entity_id?: string | null
          entity_label?: string
          entity_type?: string
          evidence_pack_id?: string | null
          id?: string
          impact_amount?: number | null
          impact_currency?: string | null
          impact_description?: string | null
          impact_window_days?: number | null
          owner_role?: string
          owner_user_id?: string | null
          priority?: string
          question?: string
          rule_version?: number | null
          severity_score?: number | null
          snooze_count?: number | null
          snoozed_until?: string | null
          source_modules?: string[] | null
          status?: string
          tenant_id?: string
          title?: string
          updated_at?: string
          vertical?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_cards_evidence_pack_id_fkey"
            columns: ["evidence_pack_id"]
            isOneToOne: false
            referencedRelation: "evidence_packs"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_evidence_packs: {
        Row: {
          computation_duration_ms: number | null
          compute_function_name: string
          compute_function_version: string
          confidence_level: string | null
          created_at: string | null
          data_quality_score: number | null
          decision_id: string
          estimation_notes: string | null
          id: string
          input_data_hash: Json
          input_row_counts: Json
          period_end: string
          period_start: string
          snapshot_computed_at: string
          snapshot_ids: string[]
          snapshot_table: string
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          computation_duration_ms?: number | null
          compute_function_name: string
          compute_function_version?: string
          confidence_level?: string | null
          created_at?: string | null
          data_quality_score?: number | null
          decision_id: string
          estimation_notes?: string | null
          id?: string
          input_data_hash?: Json
          input_row_counts?: Json
          period_end: string
          period_start: string
          snapshot_computed_at: string
          snapshot_ids?: string[]
          snapshot_table: string
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          computation_duration_ms?: number | null
          compute_function_name?: string
          compute_function_version?: string
          confidence_level?: string | null
          created_at?: string | null
          data_quality_score?: number | null
          decision_id?: string
          estimation_notes?: string | null
          id?: string
          input_data_hash?: Json
          input_row_counts?: Json
          period_end?: string
          period_start?: string
          snapshot_computed_at?: string
          snapshot_ids?: string[]
          snapshot_table?: string
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_evidence_packs_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: true
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: true
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_impact_projections: {
        Row: {
          alert_id: string | null
          baseline_value: number | null
          computation_method: string | null
          confidence_score: number | null
          created_at: string | null
          decision_card_id: string | null
          delay_multiplier: number | null
          id: string
          impact_amount: number | null
          impact_metric: string
          impact_percent: number | null
          impact_type: string
          metadata: Json | null
          projected_value: number | null
          target_module: string
          tenant_id: string
          time_horizon_days: number | null
          updated_at: string | null
        }
        Insert: {
          alert_id?: string | null
          baseline_value?: number | null
          computation_method?: string | null
          confidence_score?: number | null
          created_at?: string | null
          decision_card_id?: string | null
          delay_multiplier?: number | null
          id?: string
          impact_amount?: number | null
          impact_metric: string
          impact_percent?: number | null
          impact_type: string
          metadata?: Json | null
          projected_value?: number | null
          target_module: string
          tenant_id: string
          time_horizon_days?: number | null
          updated_at?: string | null
        }
        Update: {
          alert_id?: string | null
          baseline_value?: number | null
          computation_method?: string | null
          confidence_score?: number | null
          created_at?: string | null
          decision_card_id?: string | null
          delay_multiplier?: number | null
          id?: string
          impact_amount?: number | null
          impact_metric?: string
          impact_percent?: number | null
          impact_type?: string
          metadata?: Json | null
          projected_value?: number | null
          target_module?: string
          tenant_id?: string
          time_horizon_days?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_impact_projections_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_impact_projections_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_impact_projections_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_impact_projections_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_impact_projections_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_impact_projections_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_impact_projections_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_impact_projections_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_insight_queue: {
        Row: {
          confidence_score: number
          created_at: string | null
          current_alert_id: string | null
          dismissed: boolean | null
          expires_at: string | null
          id: string
          insight_text: string
          insight_type: string
          pattern_id: string | null
          surfaced: boolean | null
          surfaced_at: string | null
          tenant_id: string
          trigger_condition: Json | null
        }
        Insert: {
          confidence_score: number
          created_at?: string | null
          current_alert_id?: string | null
          dismissed?: boolean | null
          expires_at?: string | null
          id?: string
          insight_text: string
          insight_type: string
          pattern_id?: string | null
          surfaced?: boolean | null
          surfaced_at?: string | null
          tenant_id: string
          trigger_condition?: Json | null
        }
        Update: {
          confidence_score?: number
          created_at?: string | null
          current_alert_id?: string | null
          dismissed?: boolean | null
          expires_at?: string | null
          id?: string
          insight_text?: string
          insight_type?: string
          pattern_id?: string | null
          surfaced?: boolean | null
          surfaced_at?: string | null
          tenant_id?: string
          trigger_condition?: Json | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_insight_queue_current_alert_id_fkey"
            columns: ["current_alert_id"]
            isOneToOne: false
            referencedRelation: "early_warning_alerts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_insight_queue_current_alert_id_fkey"
            columns: ["current_alert_id"]
            isOneToOne: false
            referencedRelation: "v_active_alerts_hierarchy"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_insight_queue_pattern_id_fkey"
            columns: ["pattern_id"]
            isOneToOne: false
            referencedRelation: "decision_learning_patterns"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_insight_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_insight_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_insight_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_insight_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_learning_patterns: {
        Row: {
          avg_financial_delta: number | null
          avg_resolution_hours_by_role: Json | null
          best_performing_role: string | null
          confidence_score: number | null
          created_at: string | null
          decision_type: string
          delay_penalty_per_day: number | null
          failure_count: number | null
          id: string
          insight_applicable_when: string | null
          insight_text: string | null
          last_calculated_at: string | null
          metric_code: string
          optimal_action_window_hours: number | null
          pattern_code: string
          sample_count: number | null
          success_count: number | null
          success_rate_by_role: Json | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          avg_financial_delta?: number | null
          avg_resolution_hours_by_role?: Json | null
          best_performing_role?: string | null
          confidence_score?: number | null
          created_at?: string | null
          decision_type: string
          delay_penalty_per_day?: number | null
          failure_count?: number | null
          id?: string
          insight_applicable_when?: string | null
          insight_text?: string | null
          last_calculated_at?: string | null
          metric_code: string
          optimal_action_window_hours?: number | null
          pattern_code: string
          sample_count?: number | null
          success_count?: number | null
          success_rate_by_role?: Json | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          avg_financial_delta?: number | null
          avg_resolution_hours_by_role?: Json | null
          best_performing_role?: string | null
          confidence_score?: number | null
          created_at?: string | null
          decision_type?: string
          delay_penalty_per_day?: number | null
          failure_count?: number | null
          id?: string
          insight_applicable_when?: string | null
          insight_text?: string | null
          last_calculated_at?: string | null
          metric_code?: string
          optimal_action_window_hours?: number | null
          pattern_code?: string
          sample_count?: number | null
          success_count?: number | null
          success_rate_by_role?: Json | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_learning_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_learning_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_learning_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_learning_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_outcome_records: {
        Row: {
          action_speed: string | null
          action_taken: string | null
          actual_impact_amount: number | null
          alert_id: string | null
          context_snapshot: Json | null
          created_at: string | null
          decided_at: string | null
          decided_by_role: string
          decided_by_user_id: string | null
          decision_date: string
          decision_id: string | null
          decision_title: string | null
          decision_type: string
          dimension_key: string | null
          exposure_before: number | null
          financial_delta_14d: number | null
          financial_delta_30d: number | null
          financial_delta_7d: number | null
          followup_due_date: string | null
          id: string
          metric_after_14d: number | null
          metric_after_30d: number | null
          metric_after_7d: number | null
          metric_before: number | null
          metric_code: string
          outcome_confidence: number | null
          outcome_measured_at: string | null
          outcome_notes: string | null
          outcome_verdict: string | null
          predicted_impact_amount: number | null
          side_effects_detected: Json | null
          tenant_id: string
          unintended_impact_score: number | null
          updated_at: string | null
        }
        Insert: {
          action_speed?: string | null
          action_taken?: string | null
          actual_impact_amount?: number | null
          alert_id?: string | null
          context_snapshot?: Json | null
          created_at?: string | null
          decided_at?: string | null
          decided_by_role: string
          decided_by_user_id?: string | null
          decision_date: string
          decision_id?: string | null
          decision_title?: string | null
          decision_type: string
          dimension_key?: string | null
          exposure_before?: number | null
          financial_delta_14d?: number | null
          financial_delta_30d?: number | null
          financial_delta_7d?: number | null
          followup_due_date?: string | null
          id?: string
          metric_after_14d?: number | null
          metric_after_30d?: number | null
          metric_after_7d?: number | null
          metric_before?: number | null
          metric_code: string
          outcome_confidence?: number | null
          outcome_measured_at?: string | null
          outcome_notes?: string | null
          outcome_verdict?: string | null
          predicted_impact_amount?: number | null
          side_effects_detected?: Json | null
          tenant_id: string
          unintended_impact_score?: number | null
          updated_at?: string | null
        }
        Update: {
          action_speed?: string | null
          action_taken?: string | null
          actual_impact_amount?: number | null
          alert_id?: string | null
          context_snapshot?: Json | null
          created_at?: string | null
          decided_at?: string | null
          decided_by_role?: string
          decided_by_user_id?: string | null
          decision_date?: string
          decision_id?: string | null
          decision_title?: string | null
          decision_type?: string
          dimension_key?: string | null
          exposure_before?: number | null
          financial_delta_14d?: number | null
          financial_delta_30d?: number | null
          financial_delta_7d?: number | null
          followup_due_date?: string | null
          id?: string
          metric_after_14d?: number | null
          metric_after_30d?: number | null
          metric_after_7d?: number | null
          metric_before?: number | null
          metric_code?: string
          outcome_confidence?: number | null
          outcome_measured_at?: string | null
          outcome_notes?: string | null
          outcome_verdict?: string | null
          predicted_impact_amount?: number | null
          side_effects_detected?: Json | null
          tenant_id?: string
          unintended_impact_score?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_outcome_records_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "early_warning_alerts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcome_records_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_active_alerts_hierarchy"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_outcomes: {
        Row: {
          actual_impact_amount: number | null
          baseline_metrics: Json | null
          created_at: string
          current_metrics: Json | null
          decision_audit_id: string
          id: string
          impact_variance: number | null
          impact_variance_percent: number | null
          is_auto_measured: boolean | null
          lessons_learned: string | null
          measured_at: string
          measured_by: string | null
          measurement_timestamp: string | null
          outcome_details: string | null
          outcome_status: string
          outcome_summary: string
          supporting_metrics: Json | null
          tenant_id: string
          updated_at: string
          would_repeat: boolean | null
        }
        Insert: {
          actual_impact_amount?: number | null
          baseline_metrics?: Json | null
          created_at?: string
          current_metrics?: Json | null
          decision_audit_id: string
          id?: string
          impact_variance?: number | null
          impact_variance_percent?: number | null
          is_auto_measured?: boolean | null
          lessons_learned?: string | null
          measured_at?: string
          measured_by?: string | null
          measurement_timestamp?: string | null
          outcome_details?: string | null
          outcome_status: string
          outcome_summary: string
          supporting_metrics?: Json | null
          tenant_id: string
          updated_at?: string
          would_repeat?: boolean | null
        }
        Update: {
          actual_impact_amount?: number | null
          baseline_metrics?: Json | null
          created_at?: string
          current_metrics?: Json | null
          decision_audit_id?: string
          id?: string
          impact_variance?: number | null
          impact_variance_percent?: number | null
          is_auto_measured?: boolean | null
          lessons_learned?: string | null
          measured_at?: string
          measured_by?: string | null
          measurement_timestamp?: string | null
          outcome_details?: string | null
          outcome_status?: string
          outcome_summary?: string
          supporting_metrics?: Json | null
          tenant_id?: string
          updated_at?: string
          would_repeat?: boolean | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_outcomes_decision_audit_id_fkey"
            columns: ["decision_audit_id"]
            isOneToOne: false
            referencedRelation: "decision_audit_log"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcomes_decision_audit_id_fkey"
            columns: ["decision_audit_id"]
            isOneToOne: false
            referencedRelation: "decisions_pending_followup"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decision_snapshots: {
        Row: {
          as_of: string
          authority: string
          calculation_hash: string | null
          confidence: number
          created_at: string
          created_by: string | null
          currency: string
          derived_from: Json
          dimensions: Json
          entity_id: string | null
          entity_type: string
          id: string
          metric_code: string
          metric_version: number
          supersedes_id: string | null
          tenant_id: string
          truth_level: string
          value: number
        }
        Insert: {
          as_of?: string
          authority: string
          calculation_hash?: string | null
          confidence?: number
          created_at?: string
          created_by?: string | null
          currency?: string
          derived_from?: Json
          dimensions?: Json
          entity_id?: string | null
          entity_type?: string
          id?: string
          metric_code: string
          metric_version?: number
          supersedes_id?: string | null
          tenant_id: string
          truth_level: string
          value: number
        }
        Update: {
          as_of?: string
          authority?: string
          calculation_hash?: string | null
          confidence?: number
          created_at?: string
          created_by?: string | null
          currency?: string
          derived_from?: Json
          dimensions?: Json
          entity_id?: string | null
          entity_type?: string
          id?: string
          metric_code?: string
          metric_version?: number
          supersedes_id?: string | null
          tenant_id?: string
          truth_level?: string
          value?: number
        }
        Relationships: [
          {
            foreignKeyName: "decision_snapshots_supersedes_id_fkey"
            columns: ["supersedes_id"]
            isOneToOne: false
            referencedRelation: "decision_snapshots"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_snapshots_supersedes_id_fkey"
            columns: ["supersedes_id"]
            isOneToOne: false
            referencedRelation: "v_decision_latest"
            referencedColumns: ["id"]
          },
        ]
      }
      decision_taxonomy: {
        Row: {
          action_templates: string[] | null
          category: string
          created_at: string | null
          id: string
          is_active: boolean | null
          owner_role_default: string | null
          subcategory: string | null
          urgency_level: string | null
        }
        Insert: {
          action_templates?: string[] | null
          category: string
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          owner_role_default?: string | null
          subcategory?: string | null
          urgency_level?: string | null
        }
        Update: {
          action_templates?: string[] | null
          category?: string
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          owner_role_default?: string | null
          subcategory?: string | null
          urgency_level?: string | null
        }
        Relationships: []
      }
      decision_threshold_configs: {
        Row: {
          ar_aging_90_critical_percent: number
          ar_overdue_critical_percent: number
          ar_overdue_warning_percent: number
          ccc_critical_days: number
          ccc_warning_days: number
          channel_fee_critical_percent: number
          channel_fee_warning_percent: number
          cm_critical_percent: number
          cm_good_percent: number
          cm_warning_percent: number
          created_at: string
          customer_risk_critical_days: number
          customer_risk_high_days: number
          customer_risk_medium_days: number
          dso_critical_days: number
          dso_warning_days: number
          gross_margin_critical_percent: number
          gross_margin_warning_percent: number
          id: string
          impact_approval_threshold: number
          inventory_critical_days: number
          inventory_warning_days: number
          ltv_cac_critical: number
          ltv_cac_good: number
          ltv_cac_warning: number
          roas_critical: number
          roas_good: number
          roas_warning: number
          runway_critical_months: number
          runway_warning_months: number
          sku_critical_margin_percent: number
          sku_review_margin_percent: number
          sku_stop_margin_percent: number
          tenant_id: string
          updated_at: string
        }
        Insert: {
          ar_aging_90_critical_percent?: number
          ar_overdue_critical_percent?: number
          ar_overdue_warning_percent?: number
          ccc_critical_days?: number
          ccc_warning_days?: number
          channel_fee_critical_percent?: number
          channel_fee_warning_percent?: number
          cm_critical_percent?: number
          cm_good_percent?: number
          cm_warning_percent?: number
          created_at?: string
          customer_risk_critical_days?: number
          customer_risk_high_days?: number
          customer_risk_medium_days?: number
          dso_critical_days?: number
          dso_warning_days?: number
          gross_margin_critical_percent?: number
          gross_margin_warning_percent?: number
          id?: string
          impact_approval_threshold?: number
          inventory_critical_days?: number
          inventory_warning_days?: number
          ltv_cac_critical?: number
          ltv_cac_good?: number
          ltv_cac_warning?: number
          roas_critical?: number
          roas_good?: number
          roas_warning?: number
          runway_critical_months?: number
          runway_warning_months?: number
          sku_critical_margin_percent?: number
          sku_review_margin_percent?: number
          sku_stop_margin_percent?: number
          tenant_id: string
          updated_at?: string
        }
        Update: {
          ar_aging_90_critical_percent?: number
          ar_overdue_critical_percent?: number
          ar_overdue_warning_percent?: number
          ccc_critical_days?: number
          ccc_warning_days?: number
          channel_fee_critical_percent?: number
          channel_fee_warning_percent?: number
          cm_critical_percent?: number
          cm_good_percent?: number
          cm_warning_percent?: number
          created_at?: string
          customer_risk_critical_days?: number
          customer_risk_high_days?: number
          customer_risk_medium_days?: number
          dso_critical_days?: number
          dso_warning_days?: number
          gross_margin_critical_percent?: number
          gross_margin_warning_percent?: number
          id?: string
          impact_approval_threshold?: number
          inventory_critical_days?: number
          inventory_warning_days?: number
          ltv_cac_critical?: number
          ltv_cac_good?: number
          ltv_cac_warning?: number
          roas_critical?: number
          roas_good?: number
          roas_warning?: number
          runway_critical_months?: number
          runway_warning_months?: number
          sku_critical_margin_percent?: number
          sku_review_margin_percent?: number
          sku_stop_margin_percent?: number
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "decision_threshold_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_threshold_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_threshold_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_threshold_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      depreciation_schedules: {
        Row: {
          accumulated_amount: number
          created_at: string
          depreciation_amount: number
          fixed_asset_id: string
          id: string
          is_posted: boolean | null
          journal_entry_id: string | null
          period_date: string
          remaining_value: number
          tenant_id: string
        }
        Insert: {
          accumulated_amount: number
          created_at?: string
          depreciation_amount: number
          fixed_asset_id: string
          id?: string
          is_posted?: boolean | null
          journal_entry_id?: string | null
          period_date: string
          remaining_value: number
          tenant_id: string
        }
        Update: {
          accumulated_amount?: number
          created_at?: string
          depreciation_amount?: number
          fixed_asset_id?: string
          id?: string
          is_posted?: boolean | null
          journal_entry_id?: string | null
          period_date?: string
          remaining_value?: number
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "depreciation_schedules_fixed_asset_id_fkey"
            columns: ["fixed_asset_id"]
            isOneToOne: false
            referencedRelation: "fixed_assets"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "depreciation_schedules_journal_entry_id_fkey"
            columns: ["journal_entry_id"]
            isOneToOne: false
            referencedRelation: "journal_entries"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "depreciation_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "depreciation_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "depreciation_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "depreciation_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      early_warning_alerts: {
        Row: {
          acceleration: number | null
          acknowledged_at: string | null
          acknowledged_by: string | null
          action_url: string | null
          alert_class: string
          breach_threshold: number | null
          child_count: number | null
          confidence_factors: Json | null
          confidence_level: string
          confidence_score: number | null
          created_at: string | null
          current_owner_role: string | null
          current_value: number
          days_to_breach: number | null
          decision_deadline: string | null
          decision_framing: Json | null
          dimension_key: string | null
          escalated_at: string | null
          escalated_from_role: string | null
          escalation_history: Json | null
          escalation_level: number | null
          escalation_reason: string | null
          estimated_breach_date: string | null
          expires_at: string | null
          exposure_amount: number | null
          exposure_currency: string | null
          hierarchy_level: number | null
          id: string
          impact_description: string | null
          is_parent: boolean | null
          last_action_at: string | null
          message: string | null
          metadata: Json | null
          metric_code: string
          parent_alert_id: string | null
          priority: number | null
          r_squared: number | null
          resolution_notes: string | null
          resolved_at: string | null
          resolved_by: string | null
          root_cause_explanation: string | null
          root_cause_metric: string | null
          rule_id: string | null
          severity: string | null
          slope: number | null
          status: string | null
          suggested_action: string | null
          suppressed_children: Json | null
          tenant_id: string
          title: string
          trajectory: Json
          updated_at: string | null
        }
        Insert: {
          acceleration?: number | null
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          action_url?: string | null
          alert_class: string
          breach_threshold?: number | null
          child_count?: number | null
          confidence_factors?: Json | null
          confidence_level: string
          confidence_score?: number | null
          created_at?: string | null
          current_owner_role?: string | null
          current_value: number
          days_to_breach?: number | null
          decision_deadline?: string | null
          decision_framing?: Json | null
          dimension_key?: string | null
          escalated_at?: string | null
          escalated_from_role?: string | null
          escalation_history?: Json | null
          escalation_level?: number | null
          escalation_reason?: string | null
          estimated_breach_date?: string | null
          expires_at?: string | null
          exposure_amount?: number | null
          exposure_currency?: string | null
          hierarchy_level?: number | null
          id?: string
          impact_description?: string | null
          is_parent?: boolean | null
          last_action_at?: string | null
          message?: string | null
          metadata?: Json | null
          metric_code: string
          parent_alert_id?: string | null
          priority?: number | null
          r_squared?: number | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          root_cause_explanation?: string | null
          root_cause_metric?: string | null
          rule_id?: string | null
          severity?: string | null
          slope?: number | null
          status?: string | null
          suggested_action?: string | null
          suppressed_children?: Json | null
          tenant_id: string
          title: string
          trajectory: Json
          updated_at?: string | null
        }
        Update: {
          acceleration?: number | null
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          action_url?: string | null
          alert_class?: string
          breach_threshold?: number | null
          child_count?: number | null
          confidence_factors?: Json | null
          confidence_level?: string
          confidence_score?: number | null
          created_at?: string | null
          current_owner_role?: string | null
          current_value?: number
          days_to_breach?: number | null
          decision_deadline?: string | null
          decision_framing?: Json | null
          dimension_key?: string | null
          escalated_at?: string | null
          escalated_from_role?: string | null
          escalation_history?: Json | null
          escalation_level?: number | null
          escalation_reason?: string | null
          estimated_breach_date?: string | null
          expires_at?: string | null
          exposure_amount?: number | null
          exposure_currency?: string | null
          hierarchy_level?: number | null
          id?: string
          impact_description?: string | null
          is_parent?: boolean | null
          last_action_at?: string | null
          message?: string | null
          metadata?: Json | null
          metric_code?: string
          parent_alert_id?: string | null
          priority?: number | null
          r_squared?: number | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          root_cause_explanation?: string | null
          root_cause_metric?: string | null
          rule_id?: string | null
          severity?: string | null
          slope?: number | null
          status?: string | null
          suggested_action?: string | null
          suppressed_children?: Json | null
          tenant_id?: string
          title?: string
          trajectory?: Json
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "early_warning_alerts_parent_alert_id_fkey"
            columns: ["parent_alert_id"]
            isOneToOne: false
            referencedRelation: "early_warning_alerts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_parent_alert_id_fkey"
            columns: ["parent_alert_id"]
            isOneToOne: false
            referencedRelation: "v_active_alerts_hierarchy"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_rule_id_fkey"
            columns: ["rule_id"]
            isOneToOne: false
            referencedRelation: "predictive_alert_rules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      enterprise_policies: {
        Row: {
          approver_roles: string[]
          condition: Json
          created_at: string
          created_by: string
          enabled: boolean
          id: string
          policy_name: string
          policy_type: string
          priority: number
          required_approvals: number
          tenant_id: string
          updated_at: string
          updated_by: string | null
        }
        Insert: {
          approver_roles?: string[]
          condition: Json
          created_at?: string
          created_by: string
          enabled?: boolean
          id?: string
          policy_name: string
          policy_type: string
          priority?: number
          required_approvals?: number
          tenant_id: string
          updated_at?: string
          updated_by?: string | null
        }
        Update: {
          approver_roles?: string[]
          condition?: Json
          created_at?: string
          created_by?: string
          enabled?: boolean
          id?: string
          policy_name?: string
          policy_type?: string
          priority?: number
          required_approvals?: number
          tenant_id?: string
          updated_at?: string
          updated_by?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "enterprise_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "enterprise_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "enterprise_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "enterprise_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      escalation_events: {
        Row: {
          alert_id: string
          escalated_at: string | null
          escalation_reason: string
          exposure_at_escalation: number | null
          from_role: string
          hours_elapsed: number | null
          id: string
          notification_channel: string | null
          notified_at: string | null
          policy_id: string | null
          tenant_id: string
          to_role: string
        }
        Insert: {
          alert_id: string
          escalated_at?: string | null
          escalation_reason: string
          exposure_at_escalation?: number | null
          from_role: string
          hours_elapsed?: number | null
          id?: string
          notification_channel?: string | null
          notified_at?: string | null
          policy_id?: string | null
          tenant_id: string
          to_role: string
        }
        Update: {
          alert_id?: string
          escalated_at?: string | null
          escalation_reason?: string
          exposure_at_escalation?: number | null
          from_role?: string
          hours_elapsed?: number | null
          id?: string
          notification_channel?: string | null
          notified_at?: string | null
          policy_id?: string | null
          tenant_id?: string
          to_role?: string
        }
        Relationships: [
          {
            foreignKeyName: "escalation_events_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "early_warning_alerts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_events_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_active_alerts_hierarchy"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_events_policy_id_fkey"
            columns: ["policy_id"]
            isOneToOne: false
            referencedRelation: "escalation_policies"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      escalation_history: {
        Row: {
          acknowledged_at: string | null
          acknowledged_by: string | null
          alert_id: string | null
          created_at: string | null
          decision_card_id: string | null
          escalation_level: number | null
          escalation_rule_id: string | null
          from_owner_id: string | null
          from_owner_role: string | null
          id: string
          metadata: Json | null
          notification_channels: string[] | null
          notification_sent: boolean | null
          reason: string
          tenant_id: string
          time_overdue_hours: number | null
          to_owner_id: string | null
          to_owner_role: string | null
        }
        Insert: {
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          alert_id?: string | null
          created_at?: string | null
          decision_card_id?: string | null
          escalation_level?: number | null
          escalation_rule_id?: string | null
          from_owner_id?: string | null
          from_owner_role?: string | null
          id?: string
          metadata?: Json | null
          notification_channels?: string[] | null
          notification_sent?: boolean | null
          reason: string
          tenant_id: string
          time_overdue_hours?: number | null
          to_owner_id?: string | null
          to_owner_role?: string | null
        }
        Update: {
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          alert_id?: string | null
          created_at?: string | null
          decision_card_id?: string | null
          escalation_level?: number | null
          escalation_rule_id?: string | null
          from_owner_id?: string | null
          from_owner_role?: string | null
          id?: string
          metadata?: Json | null
          notification_channels?: string[] | null
          notification_sent?: boolean | null
          reason?: string
          tenant_id?: string
          time_overdue_hours?: number | null
          to_owner_id?: string | null
          to_owner_role?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "escalation_history_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_history_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_history_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_history_decision_card_id_fkey"
            columns: ["decision_card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_history_escalation_rule_id_fkey"
            columns: ["escalation_rule_id"]
            isOneToOne: false
            referencedRelation: "escalation_rules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_history_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      escalation_policies: {
        Row: {
          applies_to_hierarchy_levels: number[] | null
          created_at: string | null
          from_role: string
          id: string
          is_enabled: boolean | null
          min_exposure_amount: number | null
          no_decision_threshold_hours: number | null
          policy_name: string
          tenant_id: string
          to_role: string
          unacknowledged_threshold_hours: number | null
          updated_at: string | null
        }
        Insert: {
          applies_to_hierarchy_levels?: number[] | null
          created_at?: string | null
          from_role: string
          id?: string
          is_enabled?: boolean | null
          min_exposure_amount?: number | null
          no_decision_threshold_hours?: number | null
          policy_name: string
          tenant_id: string
          to_role: string
          unacknowledged_threshold_hours?: number | null
          updated_at?: string | null
        }
        Update: {
          applies_to_hierarchy_levels?: number[] | null
          created_at?: string | null
          from_role?: string
          id?: string
          is_enabled?: boolean | null
          min_exposure_amount?: number | null
          no_decision_threshold_hours?: number | null
          policy_name?: string
          tenant_id?: string
          to_role?: string
          unacknowledged_threshold_hours?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "escalation_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_policies_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      escalation_rules: {
        Row: {
          created_at: string | null
          description: string | null
          escalate_to_role: string | null
          escalation_threshold_hours: number | null
          final_escalate_to_role: string | null
          final_escalation_hours: number | null
          id: string
          initial_owner_role: string | null
          is_active: boolean | null
          metadata: Json | null
          name: string
          notification_channels: string[] | null
          notify_on_escalation: boolean | null
          notify_on_warning: boolean | null
          priority: number | null
          tenant_id: string
          trigger_card_types: string[] | null
          trigger_categories: string[] | null
          trigger_severity: string[] | null
          updated_at: string | null
          warning_threshold_hours: number | null
        }
        Insert: {
          created_at?: string | null
          description?: string | null
          escalate_to_role?: string | null
          escalation_threshold_hours?: number | null
          final_escalate_to_role?: string | null
          final_escalation_hours?: number | null
          id?: string
          initial_owner_role?: string | null
          is_active?: boolean | null
          metadata?: Json | null
          name: string
          notification_channels?: string[] | null
          notify_on_escalation?: boolean | null
          notify_on_warning?: boolean | null
          priority?: number | null
          tenant_id: string
          trigger_card_types?: string[] | null
          trigger_categories?: string[] | null
          trigger_severity?: string[] | null
          updated_at?: string | null
          warning_threshold_hours?: number | null
        }
        Update: {
          created_at?: string | null
          description?: string | null
          escalate_to_role?: string | null
          escalation_threshold_hours?: number | null
          final_escalate_to_role?: string | null
          final_escalation_hours?: number | null
          id?: string
          initial_owner_role?: string | null
          is_active?: boolean | null
          metadata?: Json | null
          name?: string
          notification_channels?: string[] | null
          notify_on_escalation?: boolean | null
          notify_on_warning?: boolean | null
          priority?: number | null
          tenant_id?: string
          trigger_card_types?: string[] | null
          trigger_categories?: string[] | null
          trigger_severity?: string[] | null
          updated_at?: string | null
          warning_threshold_hours?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "escalation_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      etl_pipelines: {
        Row: {
          config: Json | null
          created_at: string
          created_by: string | null
          destination: string
          enabled: boolean | null
          error_message: string | null
          id: string
          last_run_at: string | null
          name: string
          records_processed: number | null
          schedule: string | null
          source: string
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          config?: Json | null
          created_at?: string
          created_by?: string | null
          destination: string
          enabled?: boolean | null
          error_message?: string | null
          id?: string
          last_run_at?: string | null
          name: string
          records_processed?: number | null
          schedule?: string | null
          source: string
          status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          config?: Json | null
          created_at?: string
          created_by?: string | null
          destination?: string
          enabled?: boolean | null
          error_message?: string | null
          id?: string
          last_run_at?: string | null
          name?: string
          records_processed?: number | null
          schedule?: string | null
          source?: string
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "etl_pipelines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "etl_pipelines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "etl_pipelines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "etl_pipelines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      etl_transform_rules: {
        Row: {
          config: Json | null
          created_at: string
          created_by: string | null
          id: string
          is_active: boolean | null
          name: string
          rule_type: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          config?: Json | null
          created_at?: string
          created_by?: string | null
          id?: string
          is_active?: boolean | null
          name: string
          rule_type: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          config?: Json | null
          created_at?: string
          created_by?: string | null
          id?: string
          is_active?: boolean | null
          name?: string
          rule_type?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "etl_transform_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "etl_transform_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "etl_transform_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "etl_transform_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      event_logs: {
        Row: {
          actor_id: string | null
          created_at: string | null
          description: string | null
          entity_id: string | null
          entity_type: string | null
          event_source: string
          event_type: string
          id: string
          metadata: Json | null
          tenant_id: string
        }
        Insert: {
          actor_id?: string | null
          created_at?: string | null
          description?: string | null
          entity_id?: string | null
          entity_type?: string | null
          event_source: string
          event_type: string
          id?: string
          metadata?: Json | null
          tenant_id: string
        }
        Update: {
          actor_id?: string | null
          created_at?: string | null
          description?: string | null
          entity_id?: string | null
          entity_type?: string | null
          event_source?: string
          event_type?: string
          id?: string
          metadata?: Json | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "event_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "event_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "event_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "event_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      evidence_logs: {
        Row: {
          alert_id: string | null
          card_id: string | null
          created_at: string | null
          created_by: string | null
          data: Json | null
          description: string | null
          evidence_type: string
          id: string
          source_module: string | null
          tenant_id: string
          title: string
        }
        Insert: {
          alert_id?: string | null
          card_id?: string | null
          created_at?: string | null
          created_by?: string | null
          data?: Json | null
          description?: string | null
          evidence_type: string
          id?: string
          source_module?: string | null
          tenant_id: string
          title: string
        }
        Update: {
          alert_id?: string | null
          card_id?: string | null
          created_at?: string | null
          created_by?: string | null
          data?: Json | null
          description?: string | null
          evidence_type?: string
          id?: string
          source_module?: string | null
          tenant_id?: string
          title?: string
        }
        Relationships: [
          {
            foreignKeyName: "evidence_logs_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "evidence_logs_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "evidence_logs_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "evidence_logs_card_id_fkey"
            columns: ["card_id"]
            isOneToOne: false
            referencedRelation: "decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "evidence_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "evidence_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "evidence_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "evidence_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      evidence_packs: {
        Row: {
          as_of: string
          created_at: string
          expires_at: string
          id: string
          quality_scores: Json
          reconciliation_diffs: Json | null
          row_counts: Json
          tenant_id: string
          watermark: Json
        }
        Insert: {
          as_of?: string
          created_at?: string
          expires_at?: string
          id?: string
          quality_scores?: Json
          reconciliation_diffs?: Json | null
          row_counts?: Json
          tenant_id: string
          watermark?: Json
        }
        Update: {
          as_of?: string
          created_at?: string
          expires_at?: string
          id?: string
          quality_scores?: Json
          reconciliation_diffs?: Json | null
          row_counts?: Json
          tenant_id?: string
          watermark?: Json
        }
        Relationships: [
          {
            foreignKeyName: "evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "evidence_packs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      exceptions_queue: {
        Row: {
          assigned_to: string | null
          created_at: string
          currency: string
          description: string
          detected_at: string
          evidence: Json
          exception_type: string
          id: string
          impact_amount: number
          last_seen_at: string
          payload: Json
          ref_id: string
          ref_type: string
          resolved_at: string | null
          resolved_by: string | null
          severity: string
          snoozed_until: string | null
          status: string
          tenant_id: string
          title: string
          triage_notes: string | null
        }
        Insert: {
          assigned_to?: string | null
          created_at?: string
          currency?: string
          description: string
          detected_at?: string
          evidence?: Json
          exception_type: string
          id?: string
          impact_amount?: number
          last_seen_at?: string
          payload?: Json
          ref_id: string
          ref_type: string
          resolved_at?: string | null
          resolved_by?: string | null
          severity?: string
          snoozed_until?: string | null
          status?: string
          tenant_id: string
          title: string
          triage_notes?: string | null
        }
        Update: {
          assigned_to?: string | null
          created_at?: string
          currency?: string
          description?: string
          detected_at?: string
          evidence?: Json
          exception_type?: string
          id?: string
          impact_amount?: number
          last_seen_at?: string
          payload?: Json
          ref_id?: string
          ref_type?: string
          resolved_at?: string | null
          resolved_by?: string | null
          severity?: string
          snoozed_until?: string | null
          status?: string
          tenant_id?: string
          title?: string
          triage_notes?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "exceptions_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "exceptions_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "exceptions_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "exceptions_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      exchange_rates: {
        Row: {
          created_at: string
          effective_date: string
          from_currency_id: string
          id: string
          rate: number
          tenant_id: string
          to_currency_id: string
        }
        Insert: {
          created_at?: string
          effective_date: string
          from_currency_id: string
          id?: string
          rate: number
          tenant_id: string
          to_currency_id: string
        }
        Update: {
          created_at?: string
          effective_date?: string
          from_currency_id?: string
          id?: string
          rate?: number
          tenant_id?: string
          to_currency_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "exchange_rates_from_currency_id_fkey"
            columns: ["from_currency_id"]
            isOneToOne: false
            referencedRelation: "currencies"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "exchange_rates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "exchange_rates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "exchange_rates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "exchange_rates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "exchange_rates_to_currency_id_fkey"
            columns: ["to_currency_id"]
            isOneToOne: false
            referencedRelation: "currencies"
            referencedColumns: ["id"]
          },
        ]
      }
      expense_baselines: {
        Row: {
          category: string
          created_at: string | null
          created_by: string | null
          effective_from: string
          effective_to: string | null
          id: string
          monthly_amount: number
          name: string
          notes: string | null
          payment_due_day: number | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          category: string
          created_at?: string | null
          created_by?: string | null
          effective_from: string
          effective_to?: string | null
          id?: string
          monthly_amount: number
          name: string
          notes?: string | null
          payment_due_day?: number | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          category?: string
          created_at?: string | null
          created_by?: string | null
          effective_from?: string
          effective_to?: string | null
          id?: string
          monthly_amount?: number
          name?: string
          notes?: string | null
          payment_due_day?: number | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      expense_estimates: {
        Row: {
          actual_amount: number | null
          category: string
          channel: string | null
          created_at: string | null
          estimated_amount: number
          id: string
          locked_at: string | null
          locked_by: string | null
          month: number
          notes: string | null
          status: string | null
          tenant_id: string
          updated_at: string | null
          year: number
        }
        Insert: {
          actual_amount?: number | null
          category: string
          channel?: string | null
          created_at?: string | null
          estimated_amount: number
          id?: string
          locked_at?: string | null
          locked_by?: string | null
          month: number
          notes?: string | null
          status?: string | null
          tenant_id: string
          updated_at?: string | null
          year: number
        }
        Update: {
          actual_amount?: number | null
          category?: string
          channel?: string | null
          created_at?: string | null
          estimated_amount?: number
          id?: string
          locked_at?: string | null
          locked_by?: string | null
          month?: number
          notes?: string | null
          status?: string | null
          tenant_id?: string
          updated_at?: string | null
          year?: number
        }
        Relationships: [
          {
            foreignKeyName: "expense_estimates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expense_estimates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_estimates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_estimates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      expenses: {
        Row: {
          amount: number
          amount_base: number | null
          category: Database["public"]["Enums"]["expense_category"]
          cost_center_id: string | null
          created_at: string
          created_by: string | null
          currency_code: string | null
          description: string
          exchange_rate: number | null
          expense_date: string
          id: string
          is_recurring: boolean | null
          notes: string | null
          payment_method: string | null
          recurring_period: string | null
          reference_number: string | null
          subcategory: string | null
          tax_code_id: string | null
          tenant_id: string | null
          updated_at: string
          vendor_id: string | null
          vendor_name: string | null
        }
        Insert: {
          amount?: number
          amount_base?: number | null
          category: Database["public"]["Enums"]["expense_category"]
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          currency_code?: string | null
          description: string
          exchange_rate?: number | null
          expense_date?: string
          id?: string
          is_recurring?: boolean | null
          notes?: string | null
          payment_method?: string | null
          recurring_period?: string | null
          reference_number?: string | null
          subcategory?: string | null
          tax_code_id?: string | null
          tenant_id?: string | null
          updated_at?: string
          vendor_id?: string | null
          vendor_name?: string | null
        }
        Update: {
          amount?: number
          amount_base?: number | null
          category?: Database["public"]["Enums"]["expense_category"]
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          currency_code?: string | null
          description?: string
          exchange_rate?: number | null
          expense_date?: string
          id?: string
          is_recurring?: boolean | null
          notes?: string | null
          payment_method?: string | null
          recurring_period?: string | null
          reference_number?: string | null
          subcategory?: string | null
          tax_code_id?: string | null
          tenant_id?: string | null
          updated_at?: string
          vendor_id?: string | null
          vendor_name?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "expenses_cost_center_id_fkey"
            columns: ["cost_center_id"]
            isOneToOne: false
            referencedRelation: "cost_centers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expenses_tax_code_id_fkey"
            columns: ["tax_code_id"]
            isOneToOne: false
            referencedRelation: "tax_codes"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expenses_vendor_id_fkey"
            columns: ["vendor_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
        ]
      }
      extended_alert_configs: {
        Row: {
          alert_type: string
          category: string
          created_at: string
          description: string | null
          enabled: boolean | null
          id: string
          notify_email: boolean | null
          notify_immediately: boolean | null
          notify_in_daily_digest: boolean | null
          notify_push: boolean | null
          notify_slack: boolean | null
          notify_sms: boolean | null
          recipient_role: string
          severity: string
          tenant_id: string
          threshold_operator: string | null
          threshold_unit: string | null
          threshold_value: number | null
          title: string
          updated_at: string
        }
        Insert: {
          alert_type: string
          category: string
          created_at?: string
          description?: string | null
          enabled?: boolean | null
          id?: string
          notify_email?: boolean | null
          notify_immediately?: boolean | null
          notify_in_daily_digest?: boolean | null
          notify_push?: boolean | null
          notify_slack?: boolean | null
          notify_sms?: boolean | null
          recipient_role?: string
          severity?: string
          tenant_id: string
          threshold_operator?: string | null
          threshold_unit?: string | null
          threshold_value?: number | null
          title: string
          updated_at?: string
        }
        Update: {
          alert_type?: string
          category?: string
          created_at?: string
          description?: string | null
          enabled?: boolean | null
          id?: string
          notify_email?: boolean | null
          notify_immediately?: boolean | null
          notify_in_daily_digest?: boolean | null
          notify_push?: boolean | null
          notify_slack?: boolean | null
          notify_sms?: boolean | null
          recipient_role?: string
          severity?: string
          tenant_id?: string
          threshold_operator?: string | null
          threshold_unit?: string | null
          threshold_value?: number | null
          title?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "extended_alert_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "extended_alert_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "extended_alert_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "extended_alert_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      external_inventory: {
        Row: {
          available_quantity: number | null
          created_at: string | null
          external_product_id: string | null
          id: string
          incoming_quantity: number | null
          integration_id: string
          last_movement_at: string | null
          last_synced_at: string | null
          reserved_quantity: number | null
          tenant_id: string
          total_value: number | null
          unit_cost: number | null
          updated_at: string | null
          warehouse_id: string | null
          warehouse_name: string | null
        }
        Insert: {
          available_quantity?: number | null
          created_at?: string | null
          external_product_id?: string | null
          id?: string
          incoming_quantity?: number | null
          integration_id: string
          last_movement_at?: string | null
          last_synced_at?: string | null
          reserved_quantity?: number | null
          tenant_id: string
          total_value?: number | null
          unit_cost?: number | null
          updated_at?: string | null
          warehouse_id?: string | null
          warehouse_name?: string | null
        }
        Update: {
          available_quantity?: number | null
          created_at?: string | null
          external_product_id?: string | null
          id?: string
          incoming_quantity?: number | null
          integration_id?: string
          last_movement_at?: string | null
          last_synced_at?: string | null
          reserved_quantity?: number | null
          tenant_id?: string
          total_value?: number | null
          unit_cost?: number | null
          updated_at?: string | null
          warehouse_id?: string | null
          warehouse_name?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "external_inventory_external_product_id_fkey"
            columns: ["external_product_id"]
            isOneToOne: false
            referencedRelation: "external_products"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_inventory_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_inventory_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_inventory_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_inventory_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_inventory_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      external_order_items: {
        Row: {
          category: string | null
          created_at: string | null
          discount_amount: number | null
          external_order_id: string
          gross_profit: number | null
          id: string
          is_returned: boolean | null
          item_id: string | null
          item_status: string | null
          margin_percent: number | null
          original_price: number | null
          product_id: string | null
          product_name: string | null
          quantity: number | null
          raw_data: Json | null
          return_quantity: number | null
          sku: string | null
          tenant_id: string
          total_amount: number | null
          total_cogs: number | null
          unit_cogs: number | null
          unit_price: number | null
          variation_id: string | null
          variation_name: string | null
        }
        Insert: {
          category?: string | null
          created_at?: string | null
          discount_amount?: number | null
          external_order_id: string
          gross_profit?: number | null
          id?: string
          is_returned?: boolean | null
          item_id?: string | null
          item_status?: string | null
          margin_percent?: number | null
          original_price?: number | null
          product_id?: string | null
          product_name?: string | null
          quantity?: number | null
          raw_data?: Json | null
          return_quantity?: number | null
          sku?: string | null
          tenant_id: string
          total_amount?: number | null
          total_cogs?: number | null
          unit_cogs?: number | null
          unit_price?: number | null
          variation_id?: string | null
          variation_name?: string | null
        }
        Update: {
          category?: string | null
          created_at?: string | null
          discount_amount?: number | null
          external_order_id?: string
          gross_profit?: number | null
          id?: string
          is_returned?: boolean | null
          item_id?: string | null
          item_status?: string | null
          margin_percent?: number | null
          original_price?: number | null
          product_id?: string | null
          product_name?: string | null
          quantity?: number | null
          raw_data?: Json | null
          return_quantity?: number | null
          sku?: string | null
          tenant_id?: string
          total_amount?: number | null
          total_cogs?: number | null
          unit_cogs?: number | null
          unit_price?: number | null
          variation_id?: string | null
          variation_name?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "external_order_items_external_order_id_fkey"
            columns: ["external_order_id"]
            isOneToOne: false
            referencedRelation: "external_orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_order_items_external_order_id_fkey"
            columns: ["external_order_id"]
            isOneToOne: false
            referencedRelation: "mv_cdp_order_items_enriched"
            referencedColumns: ["order_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      external_orders: {
        Row: {
          actual_shipping_fee: number | null
          buyer_id: string | null
          buyer_note: string | null
          buyer_username: string | null
          cancel_reason: string | null
          cancelled_at: string | null
          channel: string
          commission_fee: number | null
          cost_of_goods: number | null
          created_at: string | null
          customer_email: string | null
          customer_name: string | null
          customer_phone: string | null
          delivered_at: string | null
          district_name: string | null
          external_order_id: string
          fulfillment_status: string | null
          gross_profit: number | null
          id: string
          integration_id: string
          internal_invoice_id: string | null
          internal_order_id: string | null
          item_count: number | null
          item_discount: number | null
          items: Json
          last_synced_at: string | null
          net_profit: number | null
          net_revenue: number | null
          order_date: string
          order_discount: number | null
          order_number: string
          other_fees: number | null
          paid_at: string | null
          payment_fee: number | null
          payment_method: string | null
          payment_status: string | null
          platform_fee: number | null
          province_code: string | null
          province_name: string | null
          raw_data: Json | null
          refund_amount: number | null
          return_reason: string | null
          seller_income: number | null
          seller_note: string | null
          service_fee: number | null
          shipped_at: string | null
          shipping_address: Json | null
          shipping_carrier: string | null
          shipping_fee: number | null
          shipping_fee_discount: number | null
          shipping_fee_paid: number | null
          shop_id: string | null
          shop_name: string | null
          status: Database["public"]["Enums"]["order_status"] | null
          subtotal: number | null
          tenant_id: string
          total_amount: number | null
          total_fees: number | null
          total_quantity: number | null
          tracking_number: string | null
          updated_at: string | null
          voucher_discount: number | null
          voucher_platform: number | null
          voucher_seller: number | null
        }
        Insert: {
          actual_shipping_fee?: number | null
          buyer_id?: string | null
          buyer_note?: string | null
          buyer_username?: string | null
          cancel_reason?: string | null
          cancelled_at?: string | null
          channel: string
          commission_fee?: number | null
          cost_of_goods?: number | null
          created_at?: string | null
          customer_email?: string | null
          customer_name?: string | null
          customer_phone?: string | null
          delivered_at?: string | null
          district_name?: string | null
          external_order_id: string
          fulfillment_status?: string | null
          gross_profit?: number | null
          id?: string
          integration_id: string
          internal_invoice_id?: string | null
          internal_order_id?: string | null
          item_count?: number | null
          item_discount?: number | null
          items?: Json
          last_synced_at?: string | null
          net_profit?: number | null
          net_revenue?: number | null
          order_date: string
          order_discount?: number | null
          order_number: string
          other_fees?: number | null
          paid_at?: string | null
          payment_fee?: number | null
          payment_method?: string | null
          payment_status?: string | null
          platform_fee?: number | null
          province_code?: string | null
          province_name?: string | null
          raw_data?: Json | null
          refund_amount?: number | null
          return_reason?: string | null
          seller_income?: number | null
          seller_note?: string | null
          service_fee?: number | null
          shipped_at?: string | null
          shipping_address?: Json | null
          shipping_carrier?: string | null
          shipping_fee?: number | null
          shipping_fee_discount?: number | null
          shipping_fee_paid?: number | null
          shop_id?: string | null
          shop_name?: string | null
          status?: Database["public"]["Enums"]["order_status"] | null
          subtotal?: number | null
          tenant_id: string
          total_amount?: number | null
          total_fees?: number | null
          total_quantity?: number | null
          tracking_number?: string | null
          updated_at?: string | null
          voucher_discount?: number | null
          voucher_platform?: number | null
          voucher_seller?: number | null
        }
        Update: {
          actual_shipping_fee?: number | null
          buyer_id?: string | null
          buyer_note?: string | null
          buyer_username?: string | null
          cancel_reason?: string | null
          cancelled_at?: string | null
          channel?: string
          commission_fee?: number | null
          cost_of_goods?: number | null
          created_at?: string | null
          customer_email?: string | null
          customer_name?: string | null
          customer_phone?: string | null
          delivered_at?: string | null
          district_name?: string | null
          external_order_id?: string
          fulfillment_status?: string | null
          gross_profit?: number | null
          id?: string
          integration_id?: string
          internal_invoice_id?: string | null
          internal_order_id?: string | null
          item_count?: number | null
          item_discount?: number | null
          items?: Json
          last_synced_at?: string | null
          net_profit?: number | null
          net_revenue?: number | null
          order_date?: string
          order_discount?: number | null
          order_number?: string
          other_fees?: number | null
          paid_at?: string | null
          payment_fee?: number | null
          payment_method?: string | null
          payment_status?: string | null
          platform_fee?: number | null
          province_code?: string | null
          province_name?: string | null
          raw_data?: Json | null
          refund_amount?: number | null
          return_reason?: string | null
          seller_income?: number | null
          seller_note?: string | null
          service_fee?: number | null
          shipped_at?: string | null
          shipping_address?: Json | null
          shipping_carrier?: string | null
          shipping_fee?: number | null
          shipping_fee_discount?: number | null
          shipping_fee_paid?: number | null
          shop_id?: string | null
          shop_name?: string | null
          status?: Database["public"]["Enums"]["order_status"] | null
          subtotal?: number | null
          tenant_id?: string
          total_amount?: number | null
          total_fees?: number | null
          total_quantity?: number | null
          tracking_number?: string | null
          updated_at?: string | null
          voucher_discount?: number | null
          voucher_platform?: number | null
          voucher_seller?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "external_orders_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_orders_internal_invoice_id_fkey"
            columns: ["internal_invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "external_orders_internal_invoice_id_fkey"
            columns: ["internal_invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_orders_internal_invoice_id_fkey"
            columns: ["internal_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_orders_internal_invoice_id_fkey"
            columns: ["internal_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "external_orders_internal_invoice_id_fkey"
            columns: ["internal_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "external_orders_internal_order_id_fkey"
            columns: ["internal_order_id"]
            isOneToOne: false
            referencedRelation: "orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      external_products: {
        Row: {
          available_quantity: number | null
          barcode: string | null
          brand: string | null
          category: string | null
          compare_at_price: number | null
          cost_price: number | null
          created_at: string | null
          description: string | null
          dimensions: Json | null
          external_product_id: string
          external_sku: string | null
          id: string
          images: Json | null
          integration_id: string
          internal_product_id: string | null
          last_synced_at: string | null
          name: string
          parent_sku: string | null
          reserved_quantity: number | null
          selling_price: number | null
          status: string | null
          stock_quantity: number | null
          tenant_id: string
          updated_at: string | null
          variants: Json | null
          weight: number | null
        }
        Insert: {
          available_quantity?: number | null
          barcode?: string | null
          brand?: string | null
          category?: string | null
          compare_at_price?: number | null
          cost_price?: number | null
          created_at?: string | null
          description?: string | null
          dimensions?: Json | null
          external_product_id: string
          external_sku?: string | null
          id?: string
          images?: Json | null
          integration_id: string
          internal_product_id?: string | null
          last_synced_at?: string | null
          name: string
          parent_sku?: string | null
          reserved_quantity?: number | null
          selling_price?: number | null
          status?: string | null
          stock_quantity?: number | null
          tenant_id: string
          updated_at?: string | null
          variants?: Json | null
          weight?: number | null
        }
        Update: {
          available_quantity?: number | null
          barcode?: string | null
          brand?: string | null
          category?: string | null
          compare_at_price?: number | null
          cost_price?: number | null
          created_at?: string | null
          description?: string | null
          dimensions?: Json | null
          external_product_id?: string
          external_sku?: string | null
          id?: string
          images?: Json | null
          integration_id?: string
          internal_product_id?: string | null
          last_synced_at?: string | null
          name?: string
          parent_sku?: string | null
          reserved_quantity?: number | null
          selling_price?: number | null
          status?: string | null
          stock_quantity?: number | null
          tenant_id?: string
          updated_at?: string | null
          variants?: Json | null
          weight?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "external_products_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      fdp_actual_revenue_for_cdp: {
        Row: {
          actual_cogs: number | null
          actual_contribution_margin: number | null
          actual_customer_count: number | null
          actual_gross_revenue: number | null
          actual_net_revenue: number
          actual_order_count: number | null
          created_at: string
          finalized_at: string | null
          forecast_variance_percent: number | null
          id: string
          is_finalized: boolean | null
          period_month: number
          period_year: number
          synced_at: string
          tenant_id: string
          variance_reason: string | null
        }
        Insert: {
          actual_cogs?: number | null
          actual_contribution_margin?: number | null
          actual_customer_count?: number | null
          actual_gross_revenue?: number | null
          actual_net_revenue: number
          actual_order_count?: number | null
          created_at?: string
          finalized_at?: string | null
          forecast_variance_percent?: number | null
          id?: string
          is_finalized?: boolean | null
          period_month: number
          period_year: number
          synced_at?: string
          tenant_id: string
          variance_reason?: string | null
        }
        Update: {
          actual_cogs?: number | null
          actual_contribution_margin?: number | null
          actual_customer_count?: number | null
          actual_gross_revenue?: number | null
          actual_net_revenue?: number
          actual_order_count?: number | null
          created_at?: string
          finalized_at?: string | null
          forecast_variance_percent?: number | null
          id?: string
          is_finalized?: boolean | null
          period_month?: number
          period_year?: number
          synced_at?: string
          tenant_id?: string
          variance_reason?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "fdp_actual_revenue_for_cdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fdp_actual_revenue_for_cdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "fdp_actual_revenue_for_cdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "fdp_actual_revenue_for_cdp_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      fdp_locked_costs: {
        Row: {
          avg_cac: number | null
          avg_cogs_percent: number | null
          avg_fee_percent: number | null
          created_at: string | null
          id: string
          locked_at: string | null
          locked_by: string | null
          month: number
          notes: string | null
          tenant_id: string
          total_cogs: number | null
          total_marketing_spend: number | null
          total_platform_fees: number | null
          total_revenue: number | null
          updated_at: string | null
          year: number
        }
        Insert: {
          avg_cac?: number | null
          avg_cogs_percent?: number | null
          avg_fee_percent?: number | null
          created_at?: string | null
          id?: string
          locked_at?: string | null
          locked_by?: string | null
          month: number
          notes?: string | null
          tenant_id: string
          total_cogs?: number | null
          total_marketing_spend?: number | null
          total_platform_fees?: number | null
          total_revenue?: number | null
          updated_at?: string | null
          year: number
        }
        Update: {
          avg_cac?: number | null
          avg_cogs_percent?: number | null
          avg_fee_percent?: number | null
          created_at?: string | null
          id?: string
          locked_at?: string | null
          locked_by?: string | null
          month?: number
          notes?: string | null
          tenant_id?: string
          total_cogs?: number | null
          total_marketing_spend?: number | null
          total_platform_fees?: number | null
          total_revenue?: number | null
          updated_at?: string | null
          year?: number
        }
        Relationships: [
          {
            foreignKeyName: "fdp_locked_costs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fdp_locked_costs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "fdp_locked_costs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "fdp_locked_costs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      feature_decisions: {
        Row: {
          created_at: string
          data_entities: Json | null
          dependencies: Json | null
          feature_name: string
          id: string
          is_live: boolean | null
          owner: string | null
          persona: string | null
          priority: string | null
          rationale: string | null
          required_tables: Json | null
          reviewed_at: string | null
          reviewed_by: string | null
          route: string
          status: string | null
          system: string
          target_version: string | null
          tenant_id: string | null
          updated_at: string
        }
        Insert: {
          created_at?: string
          data_entities?: Json | null
          dependencies?: Json | null
          feature_name: string
          id?: string
          is_live?: boolean | null
          owner?: string | null
          persona?: string | null
          priority?: string | null
          rationale?: string | null
          required_tables?: Json | null
          reviewed_at?: string | null
          reviewed_by?: string | null
          route: string
          status?: string | null
          system: string
          target_version?: string | null
          tenant_id?: string | null
          updated_at?: string
        }
        Update: {
          created_at?: string
          data_entities?: Json | null
          dependencies?: Json | null
          feature_name?: string
          id?: string
          is_live?: boolean | null
          owner?: string | null
          persona?: string | null
          priority?: string | null
          rationale?: string | null
          required_tables?: Json | null
          reviewed_at?: string | null
          reviewed_by?: string | null
          route?: string
          status?: string | null
          system?: string
          target_version?: string | null
          tenant_id?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "feature_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "feature_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "feature_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "feature_decisions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      finance_expenses_daily: {
        Row: {
          cogs_amount: number | null
          created_at: string
          day: string
          depreciation_amount: number | null
          expense_count: number | null
          id: string
          interest_amount: number | null
          logistics_amount: number | null
          marketing_amount: number | null
          other_amount: number | null
          rent_amount: number | null
          salary_amount: number | null
          tax_amount: number | null
          tenant_id: string
          total_amount: number
          updated_at: string
          utilities_amount: number | null
        }
        Insert: {
          cogs_amount?: number | null
          created_at?: string
          day: string
          depreciation_amount?: number | null
          expense_count?: number | null
          id?: string
          interest_amount?: number | null
          logistics_amount?: number | null
          marketing_amount?: number | null
          other_amount?: number | null
          rent_amount?: number | null
          salary_amount?: number | null
          tax_amount?: number | null
          tenant_id: string
          total_amount?: number
          updated_at?: string
          utilities_amount?: number | null
        }
        Update: {
          cogs_amount?: number | null
          created_at?: string
          day?: string
          depreciation_amount?: number | null
          expense_count?: number | null
          id?: string
          interest_amount?: number | null
          logistics_amount?: number | null
          marketing_amount?: number | null
          other_amount?: number | null
          rent_amount?: number | null
          salary_amount?: number | null
          tax_amount?: number | null
          tenant_id?: string
          total_amount?: number
          updated_at?: string
          utilities_amount?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "finance_expenses_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "finance_expenses_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "finance_expenses_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "finance_expenses_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      finance_monthly_summary: {
        Row: {
          ap_balance: number
          ar_balance: number
          avg_order_value: number
          cac: number
          cash_inflows: number
          cash_outflows: number
          ccc: number
          closing_cash: number
          cogs: number
          computed_at: string
          contribution_margin: number
          created_at: string
          customer_count: number
          dio: number
          dpo: number
          dso: number
          ebitda: number
          gross_margin_percent: number
          gross_profit: number
          id: string
          inventory_balance: number
          marketing_spend: number
          month_end: string
          month_start: string
          net_cash_flow: number
          net_revenue: number
          operating_expenses: number
          order_count: number
          revenue_mom_change: number | null
          revenue_yoy_change: number | null
          roas: number
          tenant_id: string
          year_month: string
        }
        Insert: {
          ap_balance?: number
          ar_balance?: number
          avg_order_value?: number
          cac?: number
          cash_inflows?: number
          cash_outflows?: number
          ccc?: number
          closing_cash?: number
          cogs?: number
          computed_at?: string
          contribution_margin?: number
          created_at?: string
          customer_count?: number
          dio?: number
          dpo?: number
          dso?: number
          ebitda?: number
          gross_margin_percent?: number
          gross_profit?: number
          id?: string
          inventory_balance?: number
          marketing_spend?: number
          month_end: string
          month_start: string
          net_cash_flow?: number
          net_revenue?: number
          operating_expenses?: number
          order_count?: number
          revenue_mom_change?: number | null
          revenue_yoy_change?: number | null
          roas?: number
          tenant_id: string
          year_month: string
        }
        Update: {
          ap_balance?: number
          ar_balance?: number
          avg_order_value?: number
          cac?: number
          cash_inflows?: number
          cash_outflows?: number
          ccc?: number
          closing_cash?: number
          cogs?: number
          computed_at?: string
          contribution_margin?: number
          created_at?: string
          customer_count?: number
          dio?: number
          dpo?: number
          dso?: number
          ebitda?: number
          gross_margin_percent?: number
          gross_profit?: number
          id?: string
          inventory_balance?: number
          marketing_spend?: number
          month_end?: string
          month_start?: string
          net_cash_flow?: number
          net_revenue?: number
          operating_expenses?: number
          order_count?: number
          revenue_mom_change?: number | null
          revenue_yoy_change?: number | null
          roas?: number
          tenant_id?: string
          year_month?: string
        }
        Relationships: [
          {
            foreignKeyName: "finance_monthly_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "finance_monthly_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "finance_monthly_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "finance_monthly_summary_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      financial_periods: {
        Row: {
          closed_at: string | null
          closed_by: string | null
          created_at: string
          end_date: string
          id: string
          is_closed: boolean
          period_month: number
          period_name: string
          period_year: number
          start_date: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          closed_at?: string | null
          closed_by?: string | null
          created_at?: string
          end_date: string
          id?: string
          is_closed?: boolean
          period_month: number
          period_name: string
          period_year: number
          start_date: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          closed_at?: string | null
          closed_by?: string | null
          created_at?: string
          end_date?: string
          id?: string
          is_closed?: boolean
          period_month?: number
          period_name?: string
          period_year?: number
          start_date?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "financial_periods_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "financial_periods_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "financial_periods_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "financial_periods_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      financial_ratio_targets: {
        Row: {
          comparison_type: string | null
          created_at: string | null
          critical_threshold: number | null
          good_threshold: number | null
          id: string
          ratio_code: string
          ratio_name: string
          target_value: number
          tenant_id: string
          unit: string | null
          updated_at: string | null
          warning_threshold: number | null
        }
        Insert: {
          comparison_type?: string | null
          created_at?: string | null
          critical_threshold?: number | null
          good_threshold?: number | null
          id?: string
          ratio_code: string
          ratio_name: string
          target_value: number
          tenant_id: string
          unit?: string | null
          updated_at?: string | null
          warning_threshold?: number | null
        }
        Update: {
          comparison_type?: string | null
          created_at?: string | null
          critical_threshold?: number | null
          good_threshold?: number | null
          id?: string
          ratio_code?: string
          ratio_name?: string
          target_value?: number
          tenant_id?: string
          unit?: string | null
          updated_at?: string | null
          warning_threshold?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "financial_ratio_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "financial_ratio_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "financial_ratio_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "financial_ratio_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      fixed_assets: {
        Row: {
          accumulated_depreciation: number | null
          asset_code: string
          bill_id: string | null
          category: string
          cost_center_id: string | null
          created_at: string
          created_by: string | null
          current_value: number | null
          depreciation_method: string | null
          description: string | null
          disposed_date: string | null
          disposed_value: number | null
          gl_asset_account_id: string | null
          gl_depreciation_account_id: string | null
          gl_expense_account_id: string | null
          id: string
          location: string | null
          name: string
          notes: string | null
          purchase_date: string
          purchase_value: number
          residual_value: number | null
          status: string | null
          tenant_id: string
          updated_at: string
          useful_life_months: number
          vendor_id: string | null
        }
        Insert: {
          accumulated_depreciation?: number | null
          asset_code: string
          bill_id?: string | null
          category: string
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          current_value?: number | null
          depreciation_method?: string | null
          description?: string | null
          disposed_date?: string | null
          disposed_value?: number | null
          gl_asset_account_id?: string | null
          gl_depreciation_account_id?: string | null
          gl_expense_account_id?: string | null
          id?: string
          location?: string | null
          name: string
          notes?: string | null
          purchase_date: string
          purchase_value: number
          residual_value?: number | null
          status?: string | null
          tenant_id: string
          updated_at?: string
          useful_life_months: number
          vendor_id?: string | null
        }
        Update: {
          accumulated_depreciation?: number | null
          asset_code?: string
          bill_id?: string | null
          category?: string
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          current_value?: number | null
          depreciation_method?: string | null
          description?: string | null
          disposed_date?: string | null
          disposed_value?: number | null
          gl_asset_account_id?: string | null
          gl_depreciation_account_id?: string | null
          gl_expense_account_id?: string | null
          id?: string
          location?: string | null
          name?: string
          notes?: string | null
          purchase_date?: string
          purchase_value?: number
          residual_value?: number | null
          status?: string | null
          tenant_id?: string
          updated_at?: string
          useful_life_months?: number
          vendor_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "fixed_assets_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "fixed_assets_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fixed_assets_cost_center_id_fkey"
            columns: ["cost_center_id"]
            isOneToOne: false
            referencedRelation: "cost_centers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fixed_assets_gl_asset_account_id_fkey"
            columns: ["gl_asset_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fixed_assets_gl_depreciation_account_id_fkey"
            columns: ["gl_depreciation_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fixed_assets_gl_expense_account_id_fkey"
            columns: ["gl_expense_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fixed_assets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "fixed_assets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "fixed_assets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "fixed_assets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "fixed_assets_vendor_id_fkey"
            columns: ["vendor_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
        ]
      }
      formula_definitions: {
        Row: {
          category: string
          created_at: string
          description: string | null
          example: string | null
          formula: string
          formula_key: string
          id: string
          is_active: boolean | null
          is_system: boolean | null
          name_en: string
          name_vi: string
          tenant_id: string | null
          updated_at: string
          usage_locations: string[] | null
          variables: Json | null
        }
        Insert: {
          category: string
          created_at?: string
          description?: string | null
          example?: string | null
          formula: string
          formula_key: string
          id?: string
          is_active?: boolean | null
          is_system?: boolean | null
          name_en: string
          name_vi: string
          tenant_id?: string | null
          updated_at?: string
          usage_locations?: string[] | null
          variables?: Json | null
        }
        Update: {
          category?: string
          created_at?: string
          description?: string | null
          example?: string | null
          formula?: string
          formula_key?: string
          id?: string
          is_active?: boolean | null
          is_system?: boolean | null
          name_en?: string
          name_vi?: string
          tenant_id?: string | null
          updated_at?: string
          usage_locations?: string[] | null
          variables?: Json | null
        }
        Relationships: [
          {
            foreignKeyName: "formula_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "formula_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "formula_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "formula_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      formula_settings: {
        Row: {
          ar_bucket_1: number | null
          ar_bucket_2: number | null
          ar_bucket_3: number | null
          ar_bucket_4: number | null
          cash_burn_rate_critical: number | null
          cash_burn_rate_warning: number | null
          cash_reserve_percentage: number | null
          channel_commission_rates: Json | null
          collection_rate_30d: number | null
          collection_rate_60d: number | null
          collection_rate_90d: number | null
          collection_rate_current: number | null
          collection_rate_over90: number | null
          corporate_tax_rate: number | null
          created_at: string
          custom_parameters: Json | null
          default_depreciation_years: number | null
          default_payment_terms_ap: number | null
          default_payment_terms_ar: number | null
          dio_calculation_days: number | null
          dpo_calculation_days: number | null
          dso_calculation_days: number | null
          financing_debt_ratio_max: number | null
          fiscal_year_days: number | null
          fiscal_year_start_month: number | null
          forecast_collection_rate: number | null
          forecast_confidence_level: number | null
          forecast_default_growth_rate: number | null
          id: string
          inventory_dead_stock_days: number | null
          inventory_holding_cost_rate: number | null
          inventory_slow_moving_days: number | null
          inventory_target_turnover: number | null
          investing_budget_percentage: number | null
          min_cash_runway_months: number | null
          minimum_operating_cash: number | null
          operating_cash_ratio_target: number | null
          promotion_max_discount_rate: number | null
          promotion_min_roi: number | null
          promotion_target_roas: number | null
          safe_cash_runway_months: number | null
          supplier_concentration_warning: number | null
          supplier_early_payment_threshold: number | null
          supplier_payment_compliance_target: number | null
          target_collection_rate: number | null
          target_dso: number | null
          target_gross_margin: number | null
          target_net_margin: number | null
          tenant_id: string
          updated_at: string
          vat_rate: number | null
        }
        Insert: {
          ar_bucket_1?: number | null
          ar_bucket_2?: number | null
          ar_bucket_3?: number | null
          ar_bucket_4?: number | null
          cash_burn_rate_critical?: number | null
          cash_burn_rate_warning?: number | null
          cash_reserve_percentage?: number | null
          channel_commission_rates?: Json | null
          collection_rate_30d?: number | null
          collection_rate_60d?: number | null
          collection_rate_90d?: number | null
          collection_rate_current?: number | null
          collection_rate_over90?: number | null
          corporate_tax_rate?: number | null
          created_at?: string
          custom_parameters?: Json | null
          default_depreciation_years?: number | null
          default_payment_terms_ap?: number | null
          default_payment_terms_ar?: number | null
          dio_calculation_days?: number | null
          dpo_calculation_days?: number | null
          dso_calculation_days?: number | null
          financing_debt_ratio_max?: number | null
          fiscal_year_days?: number | null
          fiscal_year_start_month?: number | null
          forecast_collection_rate?: number | null
          forecast_confidence_level?: number | null
          forecast_default_growth_rate?: number | null
          id?: string
          inventory_dead_stock_days?: number | null
          inventory_holding_cost_rate?: number | null
          inventory_slow_moving_days?: number | null
          inventory_target_turnover?: number | null
          investing_budget_percentage?: number | null
          min_cash_runway_months?: number | null
          minimum_operating_cash?: number | null
          operating_cash_ratio_target?: number | null
          promotion_max_discount_rate?: number | null
          promotion_min_roi?: number | null
          promotion_target_roas?: number | null
          safe_cash_runway_months?: number | null
          supplier_concentration_warning?: number | null
          supplier_early_payment_threshold?: number | null
          supplier_payment_compliance_target?: number | null
          target_collection_rate?: number | null
          target_dso?: number | null
          target_gross_margin?: number | null
          target_net_margin?: number | null
          tenant_id: string
          updated_at?: string
          vat_rate?: number | null
        }
        Update: {
          ar_bucket_1?: number | null
          ar_bucket_2?: number | null
          ar_bucket_3?: number | null
          ar_bucket_4?: number | null
          cash_burn_rate_critical?: number | null
          cash_burn_rate_warning?: number | null
          cash_reserve_percentage?: number | null
          channel_commission_rates?: Json | null
          collection_rate_30d?: number | null
          collection_rate_60d?: number | null
          collection_rate_90d?: number | null
          collection_rate_current?: number | null
          collection_rate_over90?: number | null
          corporate_tax_rate?: number | null
          created_at?: string
          custom_parameters?: Json | null
          default_depreciation_years?: number | null
          default_payment_terms_ap?: number | null
          default_payment_terms_ar?: number | null
          dio_calculation_days?: number | null
          dpo_calculation_days?: number | null
          dso_calculation_days?: number | null
          financing_debt_ratio_max?: number | null
          fiscal_year_days?: number | null
          fiscal_year_start_month?: number | null
          forecast_collection_rate?: number | null
          forecast_confidence_level?: number | null
          forecast_default_growth_rate?: number | null
          id?: string
          inventory_dead_stock_days?: number | null
          inventory_holding_cost_rate?: number | null
          inventory_slow_moving_days?: number | null
          inventory_target_turnover?: number | null
          investing_budget_percentage?: number | null
          min_cash_runway_months?: number | null
          minimum_operating_cash?: number | null
          operating_cash_ratio_target?: number | null
          promotion_max_discount_rate?: number | null
          promotion_min_roi?: number | null
          promotion_target_roas?: number | null
          safe_cash_runway_months?: number | null
          supplier_concentration_warning?: number | null
          supplier_early_payment_threshold?: number | null
          supplier_payment_compliance_target?: number | null
          target_collection_rate?: number | null
          target_dso?: number | null
          target_gross_margin?: number | null
          target_net_margin?: number | null
          tenant_id?: string
          updated_at?: string
          vat_rate?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "formula_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "formula_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "formula_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "formula_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      gl_account_defaults: {
        Row: {
          accounts_payable_id: string | null
          accounts_receivable_id: string | null
          bank_id: string | null
          cash_id: string | null
          created_at: string
          id: string
          purchase_expense_id: string | null
          purchase_vat_id: string | null
          sales_discount_id: string | null
          sales_revenue_id: string | null
          sales_vat_id: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          accounts_payable_id?: string | null
          accounts_receivable_id?: string | null
          bank_id?: string | null
          cash_id?: string | null
          created_at?: string
          id?: string
          purchase_expense_id?: string | null
          purchase_vat_id?: string | null
          sales_discount_id?: string | null
          sales_revenue_id?: string | null
          sales_vat_id?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          accounts_payable_id?: string | null
          accounts_receivable_id?: string | null
          bank_id?: string | null
          cash_id?: string | null
          created_at?: string
          id?: string
          purchase_expense_id?: string | null
          purchase_vat_id?: string | null
          sales_discount_id?: string | null
          sales_revenue_id?: string | null
          sales_vat_id?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "gl_account_defaults_accounts_payable_id_fkey"
            columns: ["accounts_payable_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_accounts_receivable_id_fkey"
            columns: ["accounts_receivable_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_bank_id_fkey"
            columns: ["bank_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_cash_id_fkey"
            columns: ["cash_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_purchase_expense_id_fkey"
            columns: ["purchase_expense_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_purchase_vat_id_fkey"
            columns: ["purchase_vat_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_sales_discount_id_fkey"
            columns: ["sales_discount_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_sales_revenue_id_fkey"
            columns: ["sales_revenue_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_sales_vat_id_fkey"
            columns: ["sales_vat_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_account_defaults_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "gl_account_defaults_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "gl_account_defaults_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      gl_accounts: {
        Row: {
          account_code: string
          account_name: string
          account_subtype: string | null
          account_type: string
          created_at: string
          created_by: string | null
          current_balance: number
          description: string | null
          id: string
          is_active: boolean
          is_header: boolean
          is_system: boolean
          level: number
          normal_balance: string
          parent_account_id: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          account_code: string
          account_name: string
          account_subtype?: string | null
          account_type: string
          created_at?: string
          created_by?: string | null
          current_balance?: number
          description?: string | null
          id?: string
          is_active?: boolean
          is_header?: boolean
          is_system?: boolean
          level?: number
          normal_balance: string
          parent_account_id?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          account_code?: string
          account_name?: string
          account_subtype?: string | null
          account_type?: string
          created_at?: string
          created_by?: string | null
          current_balance?: number
          description?: string | null
          id?: string
          is_active?: boolean
          is_header?: boolean
          is_system?: boolean
          level?: number
          normal_balance?: string
          parent_account_id?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "gl_accounts_parent_account_id_fkey"
            columns: ["parent_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "gl_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "gl_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "gl_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      global_source_platforms: {
        Row: {
          auth_type: string | null
          category: string
          code: string
          created_at: string | null
          display_name: string
          id: string
          is_active: boolean | null
          logo_url: string | null
        }
        Insert: {
          auth_type?: string | null
          category: string
          code: string
          created_at?: string | null
          display_name: string
          id?: string
          is_active?: boolean | null
          logo_url?: string | null
        }
        Update: {
          auth_type?: string | null
          category?: string
          code?: string
          created_at?: string | null
          display_name?: string
          id?: string
          is_active?: boolean | null
          logo_url?: string | null
        }
        Relationships: []
      }
      import_jobs: {
        Row: {
          completed_at: string | null
          created_at: string
          created_by: string | null
          error_message: string | null
          file_name: string
          file_type: string
          id: string
          records_failed: number | null
          records_processed: number | null
          records_total: number | null
          source: string | null
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          completed_at?: string | null
          created_at?: string
          created_by?: string | null
          error_message?: string | null
          file_name: string
          file_type: string
          id?: string
          records_failed?: number | null
          records_processed?: number | null
          records_total?: number | null
          source?: string | null
          status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          completed_at?: string | null
          created_at?: string
          created_by?: string | null
          error_message?: string | null
          file_name?: string
          file_type?: string
          id?: string
          records_failed?: number | null
          records_processed?: number | null
          records_total?: number | null
          source?: string | null
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "import_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "import_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "import_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "import_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ingestion_batches: {
        Row: {
          batch_id: string
          completed_at: string | null
          created_at: string | null
          error_message: string | null
          id: string
          metadata: Json | null
          records_failed: number | null
          records_processed: number | null
          records_total: number | null
          source_name: string
          source_type: string
          started_at: string | null
          status: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          batch_id: string
          completed_at?: string | null
          created_at?: string | null
          error_message?: string | null
          id?: string
          metadata?: Json | null
          records_failed?: number | null
          records_processed?: number | null
          records_total?: number | null
          source_name: string
          source_type: string
          started_at?: string | null
          status?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          batch_id?: string
          completed_at?: string | null
          created_at?: string | null
          error_message?: string | null
          id?: string
          metadata?: Json | null
          records_failed?: number | null
          records_processed?: number | null
          records_total?: number | null
          source_name?: string
          source_type?: string
          started_at?: string | null
          status?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "ingestion_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ingestion_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ingestion_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ingestion_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      intelligent_alert_rules: {
        Row: {
          alert_group: string | null
          applicable_channels: string[] | null
          calculation_formula: string
          cooldown_hours: number | null
          created_at: string
          description: string | null
          id: string
          is_enabled: boolean | null
          object_type: string | null
          priority: number | null
          priority_order: number | null
          rule_category: string
          rule_code: string
          rule_name: string
          severity: string
          suggested_actions: Json | null
          tenant_id: string
          threshold_config: Json
          threshold_type: string
          updated_at: string
        }
        Insert: {
          alert_group?: string | null
          applicable_channels?: string[] | null
          calculation_formula: string
          cooldown_hours?: number | null
          created_at?: string
          description?: string | null
          id?: string
          is_enabled?: boolean | null
          object_type?: string | null
          priority?: number | null
          priority_order?: number | null
          rule_category: string
          rule_code: string
          rule_name: string
          severity?: string
          suggested_actions?: Json | null
          tenant_id: string
          threshold_config?: Json
          threshold_type?: string
          updated_at?: string
        }
        Update: {
          alert_group?: string | null
          applicable_channels?: string[] | null
          calculation_formula?: string
          cooldown_hours?: number | null
          created_at?: string
          description?: string | null
          id?: string
          is_enabled?: boolean | null
          object_type?: string | null
          priority?: number | null
          priority_order?: number | null
          rule_category?: string
          rule_code?: string
          rule_name?: string
          severity?: string
          suggested_actions?: Json | null
          tenant_id?: string
          threshold_config?: Json
          threshold_type?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "intelligent_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "intelligent_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "intelligent_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "intelligent_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      inventory_batches: {
        Row: {
          batch_number: string | null
          cost_price: number | null
          created_at: string | null
          expiry_date: string | null
          id: string
          manufacture_date: string | null
          product_id: string | null
          quantity: number | null
          status: string | null
          tenant_id: string
          updated_at: string | null
          warehouse_location: string | null
        }
        Insert: {
          batch_number?: string | null
          cost_price?: number | null
          created_at?: string | null
          expiry_date?: string | null
          id?: string
          manufacture_date?: string | null
          product_id?: string | null
          quantity?: number | null
          status?: string | null
          tenant_id: string
          updated_at?: string | null
          warehouse_location?: string | null
        }
        Update: {
          batch_number?: string | null
          cost_price?: number | null
          created_at?: string | null
          expiry_date?: string | null
          id?: string
          manufacture_date?: string | null
          product_id?: string | null
          quantity?: number | null
          status?: string | null
          tenant_id?: string
          updated_at?: string | null
          warehouse_location?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "inventory_batches_product_id_fkey"
            columns: ["product_id"]
            isOneToOne: false
            referencedRelation: "products"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_batches_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      inventory_items: {
        Row: {
          category: string | null
          created_at: string
          id: string
          last_sold_date: string | null
          notes: string | null
          product_id: string | null
          product_name: string
          quantity: number
          received_date: string
          reorder_point: number | null
          sku: string
          status: string | null
          supplier_id: string | null
          tenant_id: string
          total_value: number | null
          unit_cost: number
          updated_at: string
          warehouse_location: string | null
        }
        Insert: {
          category?: string | null
          created_at?: string
          id?: string
          last_sold_date?: string | null
          notes?: string | null
          product_id?: string | null
          product_name: string
          quantity?: number
          received_date: string
          reorder_point?: number | null
          sku: string
          status?: string | null
          supplier_id?: string | null
          tenant_id: string
          total_value?: number | null
          unit_cost?: number
          updated_at?: string
          warehouse_location?: string | null
        }
        Update: {
          category?: string | null
          created_at?: string
          id?: string
          last_sold_date?: string | null
          notes?: string | null
          product_id?: string | null
          product_name?: string
          quantity?: number
          received_date?: string
          reorder_point?: number | null
          sku?: string
          status?: string | null
          supplier_id?: string | null
          tenant_id?: string
          total_value?: number | null
          unit_cost?: number
          updated_at?: string
          warehouse_location?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "inventory_items_product_id_fkey"
            columns: ["product_id"]
            isOneToOne: false
            referencedRelation: "products"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_items_supplier_id_fkey"
            columns: ["supplier_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      inventory_levels: {
        Row: {
          created_at: string
          id: string
          last_updated: string
          location: string | null
          product_name: string | null
          quantity_on_hand: number
          sku: string
          tenant_id: string
          unit_cost: number | null
          warehouse_id: string | null
        }
        Insert: {
          created_at?: string
          id?: string
          last_updated?: string
          location?: string | null
          product_name?: string | null
          quantity_on_hand?: number
          sku: string
          tenant_id: string
          unit_cost?: number | null
          warehouse_id?: string | null
        }
        Update: {
          created_at?: string
          id?: string
          last_updated?: string
          location?: string | null
          product_name?: string | null
          quantity_on_hand?: number
          sku?: string
          tenant_id?: string
          unit_cost?: number | null
          warehouse_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "inventory_levels_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_levels_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_levels_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_levels_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      inventory_movements: {
        Row: {
          begin_stock: number | null
          branch_id: string | null
          branch_name: string | null
          channel: string | null
          cost_amount: number | null
          created_at: string | null
          end_stock: number | null
          id: string
          movement_date: string
          net_revenue: number | null
          product_code: string
          product_name: string | null
          purchase_qty: number | null
          return_qty: number | null
          sold_qty: number | null
          tenant_id: string
          transfer_in_qty: number | null
          transfer_out_qty: number | null
        }
        Insert: {
          begin_stock?: number | null
          branch_id?: string | null
          branch_name?: string | null
          channel?: string | null
          cost_amount?: number | null
          created_at?: string | null
          end_stock?: number | null
          id?: string
          movement_date: string
          net_revenue?: number | null
          product_code: string
          product_name?: string | null
          purchase_qty?: number | null
          return_qty?: number | null
          sold_qty?: number | null
          tenant_id: string
          transfer_in_qty?: number | null
          transfer_out_qty?: number | null
        }
        Update: {
          begin_stock?: number | null
          branch_id?: string | null
          branch_name?: string | null
          channel?: string | null
          cost_amount?: number | null
          created_at?: string | null
          end_stock?: number | null
          id?: string
          movement_date?: string
          net_revenue?: number | null
          product_code?: string
          product_name?: string | null
          purchase_qty?: number | null
          return_qty?: number | null
          sold_qty?: number | null
          tenant_id?: string
          transfer_in_qty?: number | null
          transfer_out_qty?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "inventory_movements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_movements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_movements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_movements_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      inventory_snapshots: {
        Row: {
          available_quantity: number | null
          channel: string
          created_at: string
          id: string
          metadata: Json | null
          product_id: string
          quantity: number | null
          reserved_quantity: number | null
          sellable_quantity: number | null
          sku: string | null
          snapshot_date: string
          source_table: string | null
          tenant_id: string
          updated_at: string
          warehouse_id: string | null
          warehouse_name: string | null
        }
        Insert: {
          available_quantity?: number | null
          channel: string
          created_at?: string
          id?: string
          metadata?: Json | null
          product_id: string
          quantity?: number | null
          reserved_quantity?: number | null
          sellable_quantity?: number | null
          sku?: string | null
          snapshot_date: string
          source_table?: string | null
          tenant_id: string
          updated_at?: string
          warehouse_id?: string | null
          warehouse_name?: string | null
        }
        Update: {
          available_quantity?: number | null
          channel?: string
          created_at?: string
          id?: string
          metadata?: Json | null
          product_id?: string
          quantity?: number | null
          reserved_quantity?: number | null
          sellable_quantity?: number | null
          sku?: string | null
          snapshot_date?: string
          source_table?: string | null
          tenant_id?: string
          updated_at?: string
          warehouse_id?: string | null
          warehouse_name?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "inventory_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "inventory_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "inventory_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      investments: {
        Row: {
          account_number: string | null
          actual_return: number | null
          created_at: string
          created_by: string | null
          current_value: number
          description: string | null
          expected_return: number | null
          id: string
          institution: string | null
          investment_type: string
          maturity_date: string | null
          name: string
          notes: string | null
          principal_amount: number
          risk_level: string | null
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          account_number?: string | null
          actual_return?: number | null
          created_at?: string
          created_by?: string | null
          current_value?: number
          description?: string | null
          expected_return?: number | null
          id?: string
          institution?: string | null
          investment_type?: string
          maturity_date?: string | null
          name: string
          notes?: string | null
          principal_amount?: number
          risk_level?: string | null
          status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          account_number?: string | null
          actual_return?: number | null
          created_at?: string
          created_by?: string | null
          current_value?: number
          description?: string | null
          expected_return?: number | null
          id?: string
          institution?: string | null
          investment_type?: string
          maturity_date?: string | null
          name?: string
          notes?: string | null
          principal_amount?: number
          risk_level?: string | null
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "investments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "investments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "investments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "investments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      investor_risk_disclosures: {
        Row: {
          approved_at: string | null
          approved_by: string | null
          compliance_statement: string | null
          created_at: string
          created_by: string
          disclosure_period_end: string
          disclosure_period_start: string
          id: string
          key_risks: Json
          mitigations: Json
          published_at: string | null
          risk_appetite_version: number
          status: string
          summary: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          approved_at?: string | null
          approved_by?: string | null
          compliance_statement?: string | null
          created_at?: string
          created_by: string
          disclosure_period_end: string
          disclosure_period_start: string
          id?: string
          key_risks?: Json
          mitigations?: Json
          published_at?: string | null
          risk_appetite_version: number
          status?: string
          summary: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          approved_at?: string | null
          approved_by?: string | null
          compliance_statement?: string | null
          created_at?: string
          created_by?: string
          disclosure_period_end?: string
          disclosure_period_start?: string
          id?: string
          key_risks?: Json
          mitigations?: Json
          published_at?: string | null
          risk_appetite_version?: number
          status?: string
          summary?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "investor_risk_disclosures_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "investor_risk_disclosures_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "investor_risk_disclosures_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "investor_risk_disclosures_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      invoice_items: {
        Row: {
          amount: number
          created_at: string
          description: string
          id: string
          invoice_id: string | null
          product_id: string | null
          quantity: number
          tenant_id: string | null
          unit_price: number
          vat_rate: number | null
        }
        Insert: {
          amount: number
          created_at?: string
          description: string
          id?: string
          invoice_id?: string | null
          product_id?: string | null
          quantity?: number
          tenant_id?: string | null
          unit_price: number
          vat_rate?: number | null
        }
        Update: {
          amount?: number
          created_at?: string
          description?: string
          id?: string
          invoice_id?: string | null
          product_id?: string | null
          quantity?: number
          tenant_id?: string | null
          unit_price?: number
          vat_rate?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "invoice_items_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "invoice_items_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoice_items_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoice_items_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "invoice_items_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "invoice_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoice_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoice_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoice_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      invoice_promotions: {
        Row: {
          code: string | null
          created_at: string
          description: string | null
          discount_amount: number | null
          discount_percent: number | null
          id: string
          invoice_id: string | null
          promotion_type: string
          tenant_id: string | null
        }
        Insert: {
          code?: string | null
          created_at?: string
          description?: string | null
          discount_amount?: number | null
          discount_percent?: number | null
          id?: string
          invoice_id?: string | null
          promotion_type: string
          tenant_id?: string | null
        }
        Update: {
          code?: string | null
          created_at?: string
          description?: string | null
          discount_amount?: number | null
          discount_percent?: number | null
          id?: string
          invoice_id?: string | null
          promotion_type?: string
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "invoice_promotions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "invoice_promotions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoice_promotions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoice_promotions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "invoice_promotions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "invoice_promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoice_promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoice_promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoice_promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      invoices: {
        Row: {
          cost_center_id: string | null
          created_at: string
          created_by: string | null
          credit_note_amount: number | null
          currency_code: string | null
          customer_id: string | null
          debit_note_amount: number | null
          discount_amount: number | null
          due_date: string
          exchange_rate: number | null
          id: string
          invoice_number: string
          issue_date: string
          net_amount: number | null
          notes: string | null
          paid_amount: number | null
          payment_term_id: string | null
          status: string | null
          subtotal: number
          tenant_id: string | null
          total_amount: number
          total_amount_base: number | null
          updated_at: string
          vat_amount: number
        }
        Insert: {
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          credit_note_amount?: number | null
          currency_code?: string | null
          customer_id?: string | null
          debit_note_amount?: number | null
          discount_amount?: number | null
          due_date: string
          exchange_rate?: number | null
          id?: string
          invoice_number: string
          issue_date?: string
          net_amount?: number | null
          notes?: string | null
          paid_amount?: number | null
          payment_term_id?: string | null
          status?: string | null
          subtotal?: number
          tenant_id?: string | null
          total_amount?: number
          total_amount_base?: number | null
          updated_at?: string
          vat_amount?: number
        }
        Update: {
          cost_center_id?: string | null
          created_at?: string
          created_by?: string | null
          credit_note_amount?: number | null
          currency_code?: string | null
          customer_id?: string | null
          debit_note_amount?: number | null
          discount_amount?: number | null
          due_date?: string
          exchange_rate?: number | null
          id?: string
          invoice_number?: string
          issue_date?: string
          net_amount?: number | null
          notes?: string | null
          paid_amount?: number | null
          payment_term_id?: string | null
          status?: string | null
          subtotal?: number
          tenant_id?: string | null
          total_amount?: number
          total_amount_base?: number | null
          updated_at?: string
          vat_amount?: number
        }
        Relationships: [
          {
            foreignKeyName: "invoices_cost_center_id_fkey"
            columns: ["cost_center_id"]
            isOneToOne: false
            referencedRelation: "cost_centers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_payment_term_id_fkey"
            columns: ["payment_term_id"]
            isOneToOne: false
            referencedRelation: "payment_terms"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      job_runs: {
        Row: {
          completed_at: string | null
          created_at: string
          error_message: string | null
          function_name: string
          id: string
          input_params: Json | null
          lock_key: string
          result: Json | null
          retry_count: number | null
          started_at: string
          status: string
          tenant_id: string
        }
        Insert: {
          completed_at?: string | null
          created_at?: string
          error_message?: string | null
          function_name: string
          id?: string
          input_params?: Json | null
          lock_key: string
          result?: Json | null
          retry_count?: number | null
          started_at?: string
          status?: string
          tenant_id: string
        }
        Update: {
          completed_at?: string | null
          created_at?: string
          error_message?: string | null
          function_name?: string
          id?: string
          input_params?: Json | null
          lock_key?: string
          result?: Json | null
          retry_count?: number | null
          started_at?: string
          status?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      journal_entries: {
        Row: {
          approved_at: string | null
          approved_by: string | null
          created_at: string
          created_by: string | null
          description: string
          entry_date: string
          entry_number: string
          id: string
          is_approved: boolean
          notes: string | null
          period_id: string | null
          posted_at: string | null
          posted_by: string | null
          reference: string | null
          source_id: string | null
          source_type: string | null
          status: string
          tenant_id: string
          total_credit: number
          total_debit: number
          updated_at: string
          void_reason: string | null
          voided_at: string | null
          voided_by: string | null
        }
        Insert: {
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          created_by?: string | null
          description: string
          entry_date: string
          entry_number: string
          id?: string
          is_approved?: boolean
          notes?: string | null
          period_id?: string | null
          posted_at?: string | null
          posted_by?: string | null
          reference?: string | null
          source_id?: string | null
          source_type?: string | null
          status?: string
          tenant_id: string
          total_credit?: number
          total_debit?: number
          updated_at?: string
          void_reason?: string | null
          voided_at?: string | null
          voided_by?: string | null
        }
        Update: {
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          created_by?: string | null
          description?: string
          entry_date?: string
          entry_number?: string
          id?: string
          is_approved?: boolean
          notes?: string | null
          period_id?: string | null
          posted_at?: string | null
          posted_by?: string | null
          reference?: string | null
          source_id?: string | null
          source_type?: string | null
          status?: string
          tenant_id?: string
          total_credit?: number
          total_debit?: number
          updated_at?: string
          void_reason?: string | null
          voided_at?: string | null
          voided_by?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "journal_entries_period_id_fkey"
            columns: ["period_id"]
            isOneToOne: false
            referencedRelation: "financial_periods"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "journal_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "journal_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "journal_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "journal_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      journal_entry_lines: {
        Row: {
          account_id: string
          cost_center_id: string | null
          created_at: string
          credit_amount: number
          credit_amount_base: number | null
          currency_code: string | null
          debit_amount: number
          debit_amount_base: number | null
          description: string | null
          exchange_rate: number | null
          id: string
          journal_entry_id: string
          line_number: number
          tenant_id: string
        }
        Insert: {
          account_id: string
          cost_center_id?: string | null
          created_at?: string
          credit_amount?: number
          credit_amount_base?: number | null
          currency_code?: string | null
          debit_amount?: number
          debit_amount_base?: number | null
          description?: string | null
          exchange_rate?: number | null
          id?: string
          journal_entry_id: string
          line_number?: number
          tenant_id: string
        }
        Update: {
          account_id?: string
          cost_center_id?: string | null
          created_at?: string
          credit_amount?: number
          credit_amount_base?: number | null
          currency_code?: string | null
          debit_amount?: number
          debit_amount_base?: number | null
          description?: string | null
          exchange_rate?: number | null
          id?: string
          journal_entry_id?: string
          line_number?: number
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "journal_entry_lines_account_id_fkey"
            columns: ["account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "journal_entry_lines_cost_center_id_fkey"
            columns: ["cost_center_id"]
            isOneToOne: false
            referencedRelation: "cost_centers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "journal_entry_lines_journal_entry_id_fkey"
            columns: ["journal_entry_id"]
            isOneToOne: false
            referencedRelation: "journal_entries"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "journal_entry_lines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "journal_entry_lines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "journal_entry_lines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "journal_entry_lines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      kpi_definition_templates: {
        Row: {
          category: string
          code: string
          created_at: string | null
          description: string | null
          formula: string
          id: string
          industry_benchmarks: Json | null
          name: string
          thresholds: Json | null
        }
        Insert: {
          category: string
          code: string
          created_at?: string | null
          description?: string | null
          formula: string
          id?: string
          industry_benchmarks?: Json | null
          name: string
          thresholds?: Json | null
        }
        Update: {
          category?: string
          code?: string
          created_at?: string | null
          description?: string | null
          formula?: string
          id?: string
          industry_benchmarks?: Json | null
          name?: string
          thresholds?: Json | null
        }
        Relationships: []
      }
      kpi_definitions: {
        Row: {
          calculation_type: string | null
          category: string
          created_at: string | null
          description: string | null
          direction: string | null
          display_order: number | null
          domain: string | null
          formula: string | null
          id: string
          is_enabled: boolean | null
          kpi_code: string
          kpi_name: string
          metadata: Json | null
          precision: number | null
          source_column: string | null
          source_table: string | null
          tenant_id: string
          thresholds: Json | null
          unit: string | null
          updated_at: string | null
        }
        Insert: {
          calculation_type?: string | null
          category: string
          created_at?: string | null
          description?: string | null
          direction?: string | null
          display_order?: number | null
          domain?: string | null
          formula?: string | null
          id?: string
          is_enabled?: boolean | null
          kpi_code: string
          kpi_name: string
          metadata?: Json | null
          precision?: number | null
          source_column?: string | null
          source_table?: string | null
          tenant_id: string
          thresholds?: Json | null
          unit?: string | null
          updated_at?: string | null
        }
        Update: {
          calculation_type?: string | null
          category?: string
          created_at?: string | null
          description?: string | null
          direction?: string | null
          display_order?: number | null
          domain?: string | null
          formula?: string | null
          id?: string
          is_enabled?: boolean | null
          kpi_code?: string
          kpi_name?: string
          metadata?: Json | null
          precision?: number | null
          source_column?: string | null
          source_table?: string | null
          tenant_id?: string
          thresholds?: Json | null
          unit?: string | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "kpi_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "kpi_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_definitions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      kpi_facts_daily: {
        Row: {
          comparison_value: number | null
          created_at: string
          dimension_type: string
          dimension_value: string
          grain_date: string
          id: string
          metric_code: string
          metric_value: number | null
          period_type: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          comparison_value?: number | null
          created_at?: string
          dimension_type?: string
          dimension_value?: string
          grain_date: string
          id?: string
          metric_code: string
          metric_value?: number | null
          period_type?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          comparison_value?: number | null
          created_at?: string
          dimension_type?: string
          dimension_value?: string
          grain_date?: string
          id?: string
          metric_code?: string
          metric_value?: number | null
          period_type?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "kpi_facts_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "kpi_facts_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_facts_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_facts_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      kpi_targets: {
        Row: {
          actual_value: number | null
          created_at: string | null
          id: string
          kpi_code: string
          kpi_name: string | null
          notes: string | null
          owner_id: string | null
          period_type: string
          period_value: string
          status: string | null
          target_value: number
          tenant_id: string
          updated_at: string | null
          variance: number | null
          variance_percent: number | null
        }
        Insert: {
          actual_value?: number | null
          created_at?: string | null
          id?: string
          kpi_code: string
          kpi_name?: string | null
          notes?: string | null
          owner_id?: string | null
          period_type: string
          period_value: string
          status?: string | null
          target_value: number
          tenant_id: string
          updated_at?: string | null
          variance?: number | null
          variance_percent?: number | null
        }
        Update: {
          actual_value?: number | null
          created_at?: string | null
          id?: string
          kpi_code?: string
          kpi_name?: string | null
          notes?: string | null
          owner_id?: string | null
          period_type?: string
          period_value?: string
          status?: string | null
          target_value?: number
          tenant_id?: string
          updated_at?: string | null
          variance?: number | null
          variance_percent?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "kpi_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "kpi_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      kpi_thresholds: {
        Row: {
          condition: string
          created_at: string | null
          id: string
          is_active: boolean | null
          kpi_code: string
          severity: string | null
          tenant_id: string
          threshold_value: number
        }
        Insert: {
          condition: string
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          kpi_code: string
          severity?: string | null
          tenant_id: string
          threshold_value: number
        }
        Update: {
          condition?: string
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          kpi_code?: string
          severity?: string | null
          tenant_id?: string
          threshold_value?: number
        }
        Relationships: [
          {
            foreignKeyName: "kpi_thresholds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "kpi_thresholds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_thresholds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "kpi_thresholds_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ltv_industry_assumptions: {
        Row: {
          assumptions: Json
          created_at: string | null
          id: string
          industry_code: string
          industry_name: string
          updated_at: string | null
        }
        Insert: {
          assumptions: Json
          created_at?: string | null
          id?: string
          industry_code: string
          industry_name: string
          updated_at?: string | null
        }
        Update: {
          assumptions?: Json
          created_at?: string | null
          id?: string
          industry_code?: string
          industry_name?: string
          updated_at?: string | null
        }
        Relationships: []
      }
      market_data: {
        Row: {
          category: string | null
          channel: string | null
          competitor_count: number | null
          created_at: string | null
          data_date: string
          data_source: string | null
          id: string
          market_share_change: number | null
          market_share_percent: number | null
          market_total_revenue: number | null
          notes: string | null
          our_ranking: number | null
          our_revenue: number | null
          prev_market_share_percent: number | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          category?: string | null
          channel?: string | null
          competitor_count?: number | null
          created_at?: string | null
          data_date: string
          data_source?: string | null
          id?: string
          market_share_change?: number | null
          market_share_percent?: number | null
          market_total_revenue?: number | null
          notes?: string | null
          our_ranking?: number | null
          our_revenue?: number | null
          prev_market_share_percent?: number | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          category?: string | null
          channel?: string | null
          competitor_count?: number | null
          created_at?: string | null
          data_date?: string
          data_source?: string | null
          id?: string
          market_share_change?: number | null
          market_share_percent?: number | null
          market_total_revenue?: number | null
          notes?: string | null
          our_ranking?: number | null
          our_revenue?: number | null
          prev_market_share_percent?: number | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "market_data_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "market_data_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "market_data_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "market_data_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      marketing_expenses: {
        Row: {
          amount: number
          campaign_id: string | null
          campaign_name: string | null
          channel: string
          clicks: number | null
          conversions: number | null
          created_at: string
          expense_date: string
          id: string
          impressions: number | null
          raw_data: Json | null
          tenant_id: string
        }
        Insert: {
          amount?: number
          campaign_id?: string | null
          campaign_name?: string | null
          channel: string
          clicks?: number | null
          conversions?: number | null
          created_at?: string
          expense_date: string
          id?: string
          impressions?: number | null
          raw_data?: Json | null
          tenant_id: string
        }
        Update: {
          amount?: number
          campaign_id?: string | null
          campaign_name?: string | null
          channel?: string
          clicks?: number | null
          conversions?: number | null
          created_at?: string
          expense_date?: string
          id?: string
          impressions?: number | null
          raw_data?: Json | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mdp_channel_roi: {
        Row: {
          attributed_orders: number | null
          attributed_revenue: number | null
          cac: number | null
          channel: string
          contribution_margin: number | null
          created_at: string
          id: string
          new_customers: number | null
          period_end: string
          period_start: string
          profit_roas: number | null
          recommendation_reason: string | null
          recommended_budget_change: number | null
          roas: number | null
          tenant_id: string
          total_spend: number | null
          updated_at: string
        }
        Insert: {
          attributed_orders?: number | null
          attributed_revenue?: number | null
          cac?: number | null
          channel: string
          contribution_margin?: number | null
          created_at?: string
          id?: string
          new_customers?: number | null
          period_end: string
          period_start: string
          profit_roas?: number | null
          recommendation_reason?: string | null
          recommended_budget_change?: number | null
          roas?: number | null
          tenant_id: string
          total_spend?: number | null
          updated_at?: string
        }
        Update: {
          attributed_orders?: number | null
          attributed_revenue?: number | null
          cac?: number | null
          channel?: string
          contribution_margin?: number | null
          created_at?: string
          id?: string
          new_customers?: number | null
          period_end?: string
          period_start?: string
          profit_roas?: number | null
          recommendation_reason?: string | null
          recommended_budget_change?: number | null
          roas?: number | null
          tenant_id?: string
          total_spend?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mdp_config: {
        Row: {
          config_key: string
          config_value: Json
          created_at: string | null
          description: string | null
          id: string
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          config_key: string
          config_value: Json
          created_at?: string | null
          description?: string | null
          id?: string
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          config_key?: string
          config_value?: Json
          created_at?: string | null
          description?: string | null
          id?: string
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "mdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "mdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mdp_customer_acquisition_source: {
        Row: {
          acquisition_channel: string
          acquisition_cost: number | null
          acquisition_date: string
          ad_group_id: string | null
          campaign_id: string | null
          campaign_name: string | null
          created_at: string
          customer_id: string
          first_order_id: string | null
          id: string
          synced_at: string | null
          synced_to_cdp: boolean | null
          tenant_id: string
        }
        Insert: {
          acquisition_channel: string
          acquisition_cost?: number | null
          acquisition_date: string
          ad_group_id?: string | null
          campaign_id?: string | null
          campaign_name?: string | null
          created_at?: string
          customer_id: string
          first_order_id?: string | null
          id?: string
          synced_at?: string | null
          synced_to_cdp?: boolean | null
          tenant_id: string
        }
        Update: {
          acquisition_channel?: string
          acquisition_cost?: number | null
          acquisition_date?: string
          ad_group_id?: string | null
          campaign_id?: string | null
          campaign_name?: string | null
          created_at?: string
          customer_id?: string
          first_order_id?: string | null
          id?: string
          synced_at?: string | null
          synced_to_cdp?: boolean | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "mdp_customer_acquisition_source_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "mdp_customer_acquisition_source_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_customer_acquisition_source_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_customer_acquisition_source_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mdp_seasonal_patterns: {
        Row: {
          analysis_period_end: string | null
          analysis_period_start: string | null
          confidence_score: number | null
          created_at: string
          id: string
          is_active: boolean | null
          order_multiplier: number | null
          pattern_type: string
          period_key: string
          revenue_multiplier: number | null
          sample_size: number | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          analysis_period_end?: string | null
          analysis_period_start?: string | null
          confidence_score?: number | null
          created_at?: string
          id?: string
          is_active?: boolean | null
          order_multiplier?: number | null
          pattern_type: string
          period_key: string
          revenue_multiplier?: number | null
          sample_size?: number | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          analysis_period_end?: string | null
          analysis_period_start?: string | null
          confidence_score?: number | null
          created_at?: string
          id?: string
          is_active?: boolean | null
          order_multiplier?: number | null
          pattern_type?: string
          period_key?: string
          revenue_multiplier?: number | null
          sample_size?: number | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "mdp_seasonal_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "mdp_seasonal_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_seasonal_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_seasonal_patterns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      metric_calculation_log: {
        Row: {
          calculated_at: string | null
          calculated_value: number | null
          calculation_input: Json | null
          data_quality_score: number | null
          execution_time_ms: number | null
          id: string
          is_cached: boolean | null
          metric_code: string
          source_location: string
          tenant_id: string
        }
        Insert: {
          calculated_at?: string | null
          calculated_value?: number | null
          calculation_input?: Json | null
          data_quality_score?: number | null
          execution_time_ms?: number | null
          id?: string
          is_cached?: boolean | null
          metric_code: string
          source_location: string
          tenant_id: string
        }
        Update: {
          calculated_at?: string | null
          calculated_value?: number | null
          calculation_input?: Json | null
          data_quality_score?: number | null
          execution_time_ms?: number | null
          id?: string
          is_cached?: boolean | null
          metric_code?: string
          source_location?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "metric_calculation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "metric_calculation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "metric_calculation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "metric_calculation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      metric_contracts: {
        Row: {
          breaking_change_notes: string | null
          created_at: string | null
          created_by: string | null
          deprecation_date: string | null
          description: string | null
          display_name: string
          domain: string
          grain: string
          id: string
          is_actionable: boolean | null
          metric_code: string
          metric_version: number
          source_view: string
          tenant_id: string | null
          updated_at: string | null
        }
        Insert: {
          breaking_change_notes?: string | null
          created_at?: string | null
          created_by?: string | null
          deprecation_date?: string | null
          description?: string | null
          display_name: string
          domain: string
          grain: string
          id?: string
          is_actionable?: boolean | null
          metric_code: string
          metric_version?: number
          source_view: string
          tenant_id?: string | null
          updated_at?: string | null
        }
        Update: {
          breaking_change_notes?: string | null
          created_at?: string | null
          created_by?: string | null
          deprecation_date?: string | null
          description?: string | null
          display_name?: string
          domain?: string
          grain?: string
          id?: string
          is_actionable?: boolean | null
          metric_code?: string
          metric_version?: number
          source_view?: string
          tenant_id?: string | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "metric_contracts_created_by_fkey"
            columns: ["created_by"]
            isOneToOne: false
            referencedRelation: "profiles"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "metric_contracts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "metric_contracts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "metric_contracts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "metric_contracts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      metric_registry: {
        Row: {
          bounds: Json | null
          business_context: string | null
          category: string
          change_log: Json | null
          compute_frequency: string | null
          created_at: string | null
          dependencies: string[] | null
          deprecation_date: string | null
          description: string | null
          effective_from: string | null
          effective_until: string | null
          formula: string
          formula_sql: string | null
          id: string
          is_aggregatable: boolean | null
          last_computed_at: string | null
          metric_code: string
          metric_name: string
          metric_name_vi: string
          module: string
          owner: string | null
          precision_level: number | null
          replacement_metric_code: string | null
          requires_tenant_filter: boolean | null
          source_view: string
          time_window: string | null
          unit: string
          updated_at: string | null
          validation_rules: Json | null
          version: string | null
        }
        Insert: {
          bounds?: Json | null
          business_context?: string | null
          category: string
          change_log?: Json | null
          compute_frequency?: string | null
          created_at?: string | null
          dependencies?: string[] | null
          deprecation_date?: string | null
          description?: string | null
          effective_from?: string | null
          effective_until?: string | null
          formula: string
          formula_sql?: string | null
          id?: string
          is_aggregatable?: boolean | null
          last_computed_at?: string | null
          metric_code: string
          metric_name: string
          metric_name_vi: string
          module: string
          owner?: string | null
          precision_level?: number | null
          replacement_metric_code?: string | null
          requires_tenant_filter?: boolean | null
          source_view: string
          time_window?: string | null
          unit: string
          updated_at?: string | null
          validation_rules?: Json | null
          version?: string | null
        }
        Update: {
          bounds?: Json | null
          business_context?: string | null
          category?: string
          change_log?: Json | null
          compute_frequency?: string | null
          created_at?: string | null
          dependencies?: string[] | null
          deprecation_date?: string | null
          description?: string | null
          effective_from?: string | null
          effective_until?: string | null
          formula?: string
          formula_sql?: string | null
          id?: string
          is_aggregatable?: boolean | null
          last_computed_at?: string | null
          metric_code?: string
          metric_name?: string
          metric_name_vi?: string
          module?: string
          owner?: string | null
          precision_level?: number | null
          replacement_metric_code?: string | null
          requires_tenant_filter?: boolean | null
          source_view?: string
          time_window?: string | null
          unit?: string
          updated_at?: string | null
          validation_rules?: Json | null
          version?: string | null
        }
        Relationships: []
      }
      metric_trend_snapshots: {
        Row: {
          created_at: string | null
          dimension_key: string | null
          id: string
          metric_code: string
          metric_value: number
          period_date: string
          period_type: string | null
          tenant_id: string
        }
        Insert: {
          created_at?: string | null
          dimension_key?: string | null
          id?: string
          metric_code: string
          metric_value: number
          period_date: string
          period_type?: string | null
          tenant_id: string
        }
        Update: {
          created_at?: string | null
          dimension_key?: string | null
          id?: string
          metric_code?: string
          metric_value?: number
          period_date?: string
          period_type?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "metric_trend_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "metric_trend_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "metric_trend_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "metric_trend_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      metric_version_history: {
        Row: {
          change_reason: string | null
          changed_by: string | null
          created_at: string | null
          effective_from: string
          effective_until: string | null
          formula_sql: string | null
          id: string
          metric_code: string
          version: string
        }
        Insert: {
          change_reason?: string | null
          changed_by?: string | null
          created_at?: string | null
          effective_from: string
          effective_until?: string | null
          formula_sql?: string | null
          id?: string
          metric_code: string
          version: string
        }
        Update: {
          change_reason?: string | null
          changed_by?: string | null
          created_at?: string | null
          effective_from?: string
          effective_until?: string | null
          formula_sql?: string | null
          id?: string
          metric_code?: string
          version?: string
        }
        Relationships: []
      }
      ml_calibration_snapshots: {
        Row: {
          accuracy: number
          calibration_error: number
          created_at: string
          id: string
          model_version: string
          sample_size: number
          tenant_id: string
        }
        Insert: {
          accuracy: number
          calibration_error: number
          created_at?: string
          id?: string
          model_version: string
          sample_size: number
          tenant_id: string
        }
        Update: {
          accuracy?: number
          calibration_error?: number
          created_at?: string
          id?: string
          model_version?: string
          sample_size?: number
          tenant_id?: string
        }
        Relationships: []
      }
      ml_drift_events: {
        Row: {
          detected_at: string
          drift_metric: string
          drift_value: number
          id: string
          model_version: string
          resolution_notes: string | null
          resolved_at: string | null
          resolved_by: string | null
          severity: string
          status: string
          tenant_id: string
          threshold: number
        }
        Insert: {
          detected_at?: string
          drift_metric: string
          drift_value: number
          id?: string
          model_version: string
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          severity?: string
          status?: string
          tenant_id: string
          threshold: number
        }
        Update: {
          detected_at?: string
          drift_metric?: string
          drift_value?: number
          id?: string
          model_version?: string
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          severity?: string
          status?: string
          tenant_id?: string
          threshold?: number
        }
        Relationships: []
      }
      ml_drift_signals: {
        Row: {
          acknowledged_at: string | null
          acknowledged_by: string | null
          auto_action_taken: string | null
          baseline_value: number | null
          current_value: number | null
          delta: number | null
          details: Json
          detected_at: string
          drift_type: string
          id: string
          metric: string
          model_version: string
          severity: string
          tenant_id: string
        }
        Insert: {
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          auto_action_taken?: string | null
          baseline_value?: number | null
          current_value?: number | null
          delta?: number | null
          details: Json
          detected_at?: string
          drift_type: string
          id?: string
          metric: string
          model_version: string
          severity: string
          tenant_id: string
        }
        Update: {
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          auto_action_taken?: string | null
          baseline_value?: number | null
          current_value?: number | null
          delta?: number | null
          details?: Json
          detected_at?: string
          drift_type?: string
          id?: string
          metric?: string
          model_version?: string
          severity?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ml_drift_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ml_drift_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ml_drift_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ml_drift_signals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ml_performance_snapshots: {
        Row: {
          accuracy: number
          calibration_error: number
          confirmed_correct: number
          confirmed_incorrect: number
          created_at: string
          false_auto_rate: number
          guardrail_block_rate: number
          id: string
          model_version: string
          period_end: string
          period_start: string
          tenant_id: string
          total_predictions: number
          unknown_outcomes: number
        }
        Insert: {
          accuracy: number
          calibration_error: number
          confirmed_correct: number
          confirmed_incorrect: number
          created_at?: string
          false_auto_rate: number
          guardrail_block_rate: number
          id?: string
          model_version: string
          period_end: string
          period_start: string
          tenant_id: string
          total_predictions: number
          unknown_outcomes: number
        }
        Update: {
          accuracy?: number
          calibration_error?: number
          confirmed_correct?: number
          confirmed_incorrect?: number
          created_at?: string
          false_auto_rate?: number
          guardrail_block_rate?: number
          id?: string
          model_version?: string
          period_end?: string
          period_start?: string
          tenant_id?: string
          total_predictions?: number
          unknown_outcomes?: number
        }
        Relationships: [
          {
            foreignKeyName: "ml_performance_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ml_performance_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ml_performance_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ml_performance_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ml_prediction_logs: {
        Row: {
          created_at: string
          exception_id: string
          explanation: Json
          features_hash: string
          final_confidence: number
          id: string
          model_version: string
          predicted_confidence: number
          suggestion_id: string
          tenant_id: string
        }
        Insert: {
          created_at?: string
          exception_id: string
          explanation: Json
          features_hash: string
          final_confidence: number
          id?: string
          model_version: string
          predicted_confidence: number
          suggestion_id: string
          tenant_id: string
        }
        Update: {
          created_at?: string
          exception_id?: string
          explanation?: Json
          features_hash?: string
          final_confidence?: number
          id?: string
          model_version?: string
          predicted_confidence?: number
          suggestion_id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ml_prediction_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ml_prediction_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ml_prediction_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ml_prediction_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ml_training_samples: {
        Row: {
          created_at: string
          exception_type: string
          features: Json
          id: string
          label: boolean
          outcome_source: string | null
          suggestion_id: string | null
          tenant_id: string
        }
        Insert: {
          created_at?: string
          exception_type: string
          features: Json
          id?: string
          label: boolean
          outcome_source?: string | null
          suggestion_id?: string | null
          tenant_id: string
        }
        Update: {
          created_at?: string
          exception_type?: string
          features?: Json
          id?: string
          label?: boolean
          outcome_source?: string | null
          suggestion_id?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "ml_training_samples_suggestion_id_fkey"
            columns: ["suggestion_id"]
            isOneToOne: false
            referencedRelation: "reconciliation_suggestions"
            referencedColumns: ["id"]
          },
        ]
      }
      module_health_status: {
        Row: {
          active_alerts_count: number | null
          created_at: string | null
          error_message: string | null
          health_score: number | null
          id: string
          last_error_at: string | null
          last_sync_at: string | null
          metadata: Json | null
          module_code: string
          pending_decisions_count: number | null
          status: string
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          active_alerts_count?: number | null
          created_at?: string | null
          error_message?: string | null
          health_score?: number | null
          id?: string
          last_error_at?: string | null
          last_sync_at?: string | null
          metadata?: Json | null
          module_code: string
          pending_decisions_count?: number | null
          status?: string
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          active_alerts_count?: number | null
          created_at?: string | null
          error_message?: string | null
          health_score?: number | null
          id?: string
          last_error_at?: string | null
          last_sync_at?: string | null
          metadata?: Json | null
          module_code?: string
          pending_decisions_count?: number | null
          status?: string
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "module_health_status_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "module_health_status_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "module_health_status_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "module_health_status_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      monte_carlo_results: {
        Row: {
          created_at: string
          created_by: string | null
          distribution_data: Json | null
          id: string
          max_ebitda: number | null
          mean_ebitda: number | null
          min_ebitda: number | null
          p10_ebitda: number | null
          p50_ebitda: number | null
          p90_ebitda: number | null
          scenario_id: string | null
          simulation_count: number
          std_dev_ebitda: number | null
          tenant_id: string | null
        }
        Insert: {
          created_at?: string
          created_by?: string | null
          distribution_data?: Json | null
          id?: string
          max_ebitda?: number | null
          mean_ebitda?: number | null
          min_ebitda?: number | null
          p10_ebitda?: number | null
          p50_ebitda?: number | null
          p90_ebitda?: number | null
          scenario_id?: string | null
          simulation_count?: number
          std_dev_ebitda?: number | null
          tenant_id?: string | null
        }
        Update: {
          created_at?: string
          created_by?: string | null
          distribution_data?: Json | null
          id?: string
          max_ebitda?: number | null
          mean_ebitda?: number | null
          min_ebitda?: number | null
          p10_ebitda?: number | null
          p50_ebitda?: number | null
          p90_ebitda?: number | null
          scenario_id?: string | null
          simulation_count?: number
          std_dev_ebitda?: number | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "monte_carlo_results_scenario_id_fkey"
            columns: ["scenario_id"]
            isOneToOne: false
            referencedRelation: "scenarios"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "monte_carlo_results_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "monte_carlo_results_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "monte_carlo_results_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "monte_carlo_results_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      notification_recipients: {
        Row: {
          created_at: string
          email: string | null
          id: string
          is_active: boolean | null
          name: string
          phone: string | null
          role: string
          slack_user_id: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          created_at?: string
          email?: string | null
          id?: string
          is_active?: boolean | null
          name: string
          phone?: string | null
          role?: string
          slack_user_id?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          created_at?: string
          email?: string | null
          id?: string
          is_active?: boolean | null
          name?: string
          phone?: string | null
          role?: string
          slack_user_id?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "notification_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "notification_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "notification_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "notification_recipients_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      notifications: {
        Row: {
          action_url: string | null
          alert_instance_id: string | null
          category: string | null
          created_at: string
          expires_at: string | null
          id: string
          is_read: boolean
          message: string | null
          metadata: Json | null
          read_at: string | null
          tenant_id: string
          title: string
          type: string
          user_id: string
        }
        Insert: {
          action_url?: string | null
          alert_instance_id?: string | null
          category?: string | null
          created_at?: string
          expires_at?: string | null
          id?: string
          is_read?: boolean
          message?: string | null
          metadata?: Json | null
          read_at?: string | null
          tenant_id: string
          title: string
          type?: string
          user_id: string
        }
        Update: {
          action_url?: string | null
          alert_instance_id?: string | null
          category?: string | null
          created_at?: string
          expires_at?: string | null
          id?: string
          is_read?: boolean
          message?: string | null
          metadata?: Json | null
          read_at?: string | null
          tenant_id?: string
          title?: string
          type?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "notifications_alert_instance_id_fkey"
            columns: ["alert_instance_id"]
            isOneToOne: false
            referencedRelation: "alert_instances"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "notifications_alert_instance_id_fkey"
            columns: ["alert_instance_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_pending_escalation"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "notifications_alert_instance_id_fkey"
            columns: ["alert_instance_id"]
            isOneToOne: false
            referencedRelation: "v_alerts_with_resolution"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      object_calculated_metrics: {
        Row: {
          avg_daily_sales: number | null
          avg_response_time_minutes: number | null
          calculation_inputs: Json | null
          conversion_rate: number | null
          created_at: string
          current_stock: number | null
          daily_revenue: number | null
          days_of_stock: number | null
          days_since_last_sale: number | null
          dos_status: string | null
          external_id: string | null
          gross_margin_percent: number | null
          id: string
          last_calculated_at: string
          margin_status: string | null
          object_id: string | null
          object_name: string
          object_type: string
          refund_rate: number | null
          reorder_point: number | null
          return_rate: number | null
          revenue_status: string | null
          revenue_variance_percent: number | null
          sales_velocity: number | null
          stockout_risk_days: number | null
          target_progress: number | null
          target_revenue: number | null
          tenant_id: string
          trend_direction: string | null
          trend_percent: number | null
          updated_at: string
          velocity_change_percent: number | null
          velocity_status: string | null
        }
        Insert: {
          avg_daily_sales?: number | null
          avg_response_time_minutes?: number | null
          calculation_inputs?: Json | null
          conversion_rate?: number | null
          created_at?: string
          current_stock?: number | null
          daily_revenue?: number | null
          days_of_stock?: number | null
          days_since_last_sale?: number | null
          dos_status?: string | null
          external_id?: string | null
          gross_margin_percent?: number | null
          id?: string
          last_calculated_at?: string
          margin_status?: string | null
          object_id?: string | null
          object_name: string
          object_type: string
          refund_rate?: number | null
          reorder_point?: number | null
          return_rate?: number | null
          revenue_status?: string | null
          revenue_variance_percent?: number | null
          sales_velocity?: number | null
          stockout_risk_days?: number | null
          target_progress?: number | null
          target_revenue?: number | null
          tenant_id: string
          trend_direction?: string | null
          trend_percent?: number | null
          updated_at?: string
          velocity_change_percent?: number | null
          velocity_status?: string | null
        }
        Update: {
          avg_daily_sales?: number | null
          avg_response_time_minutes?: number | null
          calculation_inputs?: Json | null
          conversion_rate?: number | null
          created_at?: string
          current_stock?: number | null
          daily_revenue?: number | null
          days_of_stock?: number | null
          days_since_last_sale?: number | null
          dos_status?: string | null
          external_id?: string | null
          gross_margin_percent?: number | null
          id?: string
          last_calculated_at?: string
          margin_status?: string | null
          object_id?: string | null
          object_name?: string
          object_type?: string
          refund_rate?: number | null
          reorder_point?: number | null
          return_rate?: number | null
          revenue_status?: string | null
          revenue_variance_percent?: number | null
          sales_velocity?: number | null
          stockout_risk_days?: number | null
          target_progress?: number | null
          target_revenue?: number | null
          tenant_id?: string
          trend_direction?: string | null
          trend_percent?: number | null
          updated_at?: string
          velocity_change_percent?: number | null
          velocity_status?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "object_calculated_metrics_object_id_fkey"
            columns: ["object_id"]
            isOneToOne: false
            referencedRelation: "alert_objects"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "object_calculated_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "object_calculated_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "object_calculated_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "object_calculated_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      order_auto_approval_rules: {
        Row: {
          created_at: string
          created_by: string | null
          id: string
          is_enabled: boolean
          max_amount: number | null
          source: string
          tenant_id: string | null
          updated_at: string
        }
        Insert: {
          created_at?: string
          created_by?: string | null
          id?: string
          is_enabled?: boolean
          max_amount?: number | null
          source: string
          tenant_id?: string | null
          updated_at?: string
        }
        Update: {
          created_at?: string
          created_by?: string | null
          id?: string
          is_enabled?: boolean
          max_amount?: number | null
          source?: string
          tenant_id?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "order_auto_approval_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "order_auto_approval_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "order_auto_approval_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "order_auto_approval_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      order_returns: {
        Row: {
          approved_at: string | null
          collected_at: string | null
          completed_at: string | null
          created_at: string | null
          handling_notes: string | null
          id: string
          order_id: string | null
          refund_amount: number | null
          return_created_at: string | null
          return_reason: string | null
          return_type: string | null
          status: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          approved_at?: string | null
          collected_at?: string | null
          completed_at?: string | null
          created_at?: string | null
          handling_notes?: string | null
          id?: string
          order_id?: string | null
          refund_amount?: number | null
          return_created_at?: string | null
          return_reason?: string | null
          return_type?: string | null
          status?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          approved_at?: string | null
          collected_at?: string | null
          completed_at?: string | null
          created_at?: string | null
          handling_notes?: string | null
          id?: string
          order_id?: string | null
          refund_amount?: number | null
          return_created_at?: string | null
          return_reason?: string | null
          return_type?: string | null
          status?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "order_returns_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "order_returns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "order_returns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "order_returns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "order_returns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      orders: {
        Row: {
          carrier_code: string | null
          cod_collected_at: string | null
          confirmed_at: string | null
          created_at: string
          customer_id: string | null
          customer_name: string
          delivered_at: string | null
          id: string
          invoice_id: string | null
          metadata: Json | null
          notes: string | null
          order_date: string
          order_number: string
          platform_sla_days: number | null
          shipped_at: string | null
          source: string
          status: string
          tenant_id: string | null
          total_amount: number
          updated_at: string
        }
        Insert: {
          carrier_code?: string | null
          cod_collected_at?: string | null
          confirmed_at?: string | null
          created_at?: string
          customer_id?: string | null
          customer_name: string
          delivered_at?: string | null
          id?: string
          invoice_id?: string | null
          metadata?: Json | null
          notes?: string | null
          order_date?: string
          order_number: string
          platform_sla_days?: number | null
          shipped_at?: string | null
          source: string
          status?: string
          tenant_id?: string | null
          total_amount?: number
          updated_at?: string
        }
        Update: {
          carrier_code?: string | null
          cod_collected_at?: string | null
          confirmed_at?: string | null
          created_at?: string
          customer_id?: string | null
          customer_name?: string
          delivered_at?: string | null
          id?: string
          invoice_id?: string | null
          metadata?: Json | null
          notes?: string | null
          order_date?: string
          order_number?: string
          platform_sla_days?: number | null
          shipped_at?: string | null
          source?: string
          status?: string
          tenant_id?: string | null
          total_amount?: number
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "orders_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "orders_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "orders_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "orders_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "orders_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      organization_members: {
        Row: {
          created_at: string | null
          id: string
          is_active: boolean | null
          organization_id: string
          tenant_id: string
          user_id: string
        }
        Insert: {
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          organization_id: string
          tenant_id: string
          user_id: string
        }
        Update: {
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          organization_id?: string
          tenant_id?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "organization_members_organization_id_fkey"
            columns: ["organization_id"]
            isOneToOne: false
            referencedRelation: "organizations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "organization_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "organization_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "organization_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "organization_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      organizations: {
        Row: {
          created_at: string | null
          id: string
          is_active: boolean | null
          logo_url: string | null
          name: string
          settings: Json | null
          slug: string
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          logo_url?: string | null
          name: string
          settings?: Json | null
          slug: string
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          logo_url?: string | null
          name?: string
          settings?: Json | null
          slug?: string
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "organizations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "organizations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "organizations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "organizations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      page_reviews: {
        Row: {
          id: string
          notes: string | null
          reviewed_status: string | null
          route: string
          system: string
          tenant_id: string | null
          updated_at: string
          updated_by: string | null
        }
        Insert: {
          id?: string
          notes?: string | null
          reviewed_status?: string | null
          route: string
          system: string
          tenant_id?: string | null
          updated_at?: string
          updated_by?: string | null
        }
        Update: {
          id?: string
          notes?: string | null
          reviewed_status?: string | null
          route?: string
          system?: string
          tenant_id?: string | null
          updated_at?: string
          updated_by?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "page_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "page_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "page_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "page_reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      payment_terms: {
        Row: {
          code: string
          created_at: string
          days: number
          discount_days: number | null
          discount_percent: number | null
          id: string
          is_active: boolean
          is_default: boolean | null
          name: string
          tenant_id: string
        }
        Insert: {
          code: string
          created_at?: string
          days?: number
          discount_days?: number | null
          discount_percent?: number | null
          id?: string
          is_active?: boolean
          is_default?: boolean | null
          name: string
          tenant_id: string
        }
        Update: {
          code?: string
          created_at?: string
          days?: number
          discount_days?: number | null
          discount_percent?: number | null
          id?: string
          is_active?: boolean
          is_default?: boolean | null
          name?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "payment_terms_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "payment_terms_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "payment_terms_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "payment_terms_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      payments: {
        Row: {
          amount: number
          created_at: string
          created_by: string | null
          id: string
          invoice_id: string | null
          notes: string | null
          payment_date: string
          payment_method: string | null
          reference_code: string | null
          tenant_id: string | null
        }
        Insert: {
          amount: number
          created_at?: string
          created_by?: string | null
          id?: string
          invoice_id?: string | null
          notes?: string | null
          payment_date?: string
          payment_method?: string | null
          reference_code?: string | null
          tenant_id?: string | null
        }
        Update: {
          amount?: number
          created_at?: string
          created_by?: string | null
          id?: string
          invoice_id?: string | null
          notes?: string | null
          payment_date?: string
          payment_method?: string | null
          reference_code?: string | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "payments_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "payments_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "payments_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "payments_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "payments_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      pl_report_cache: {
        Row: {
          calculated_at: string | null
          category_data: Json | null
          cogs: number | null
          comparison_data: Json | null
          contract_revenue: number | null
          created_at: string | null
          gross_margin: number | null
          gross_profit: number | null
          gross_sales: number | null
          id: string
          income_before_tax: number | null
          income_tax: number | null
          integrated_revenue: number | null
          interest_expense: number | null
          invoice_revenue: number | null
          net_income: number | null
          net_margin: number | null
          net_sales: number | null
          operating_income: number | null
          operating_margin: number | null
          opex_data_source: Json | null
          opex_depreciation: number | null
          opex_insurance: number | null
          opex_logistics: number | null
          opex_maintenance: number | null
          opex_marketing: number | null
          opex_other: number | null
          opex_professional: number | null
          opex_rent: number | null
          opex_salaries: number | null
          opex_supplies: number | null
          opex_utilities: number | null
          other_income: number | null
          period_month: number | null
          period_quarter: number | null
          period_type: string | null
          period_year: number
          sales_discounts: number | null
          sales_returns: number | null
          tenant_id: string
          total_opex: number | null
          total_opex_actual: number | null
          total_opex_estimated: number | null
          updated_at: string | null
        }
        Insert: {
          calculated_at?: string | null
          category_data?: Json | null
          cogs?: number | null
          comparison_data?: Json | null
          contract_revenue?: number | null
          created_at?: string | null
          gross_margin?: number | null
          gross_profit?: number | null
          gross_sales?: number | null
          id?: string
          income_before_tax?: number | null
          income_tax?: number | null
          integrated_revenue?: number | null
          interest_expense?: number | null
          invoice_revenue?: number | null
          net_income?: number | null
          net_margin?: number | null
          net_sales?: number | null
          operating_income?: number | null
          operating_margin?: number | null
          opex_data_source?: Json | null
          opex_depreciation?: number | null
          opex_insurance?: number | null
          opex_logistics?: number | null
          opex_maintenance?: number | null
          opex_marketing?: number | null
          opex_other?: number | null
          opex_professional?: number | null
          opex_rent?: number | null
          opex_salaries?: number | null
          opex_supplies?: number | null
          opex_utilities?: number | null
          other_income?: number | null
          period_month?: number | null
          period_quarter?: number | null
          period_type?: string | null
          period_year: number
          sales_discounts?: number | null
          sales_returns?: number | null
          tenant_id: string
          total_opex?: number | null
          total_opex_actual?: number | null
          total_opex_estimated?: number | null
          updated_at?: string | null
        }
        Update: {
          calculated_at?: string | null
          category_data?: Json | null
          cogs?: number | null
          comparison_data?: Json | null
          contract_revenue?: number | null
          created_at?: string | null
          gross_margin?: number | null
          gross_profit?: number | null
          gross_sales?: number | null
          id?: string
          income_before_tax?: number | null
          income_tax?: number | null
          integrated_revenue?: number | null
          interest_expense?: number | null
          invoice_revenue?: number | null
          net_income?: number | null
          net_margin?: number | null
          net_sales?: number | null
          operating_income?: number | null
          operating_margin?: number | null
          opex_data_source?: Json | null
          opex_depreciation?: number | null
          opex_insurance?: number | null
          opex_logistics?: number | null
          opex_maintenance?: number | null
          opex_marketing?: number | null
          opex_other?: number | null
          opex_professional?: number | null
          opex_rent?: number | null
          opex_salaries?: number | null
          opex_supplies?: number | null
          opex_utilities?: number | null
          other_income?: number | null
          period_month?: number | null
          period_quarter?: number | null
          period_type?: string | null
          period_year?: number
          sales_discounts?: number | null
          sales_returns?: number | null
          tenant_id?: string
          total_opex?: number | null
          total_opex_actual?: number | null
          total_opex_estimated?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      plan_modules: {
        Row: {
          created_at: string
          id: string
          is_included: boolean | null
          module_id: string
          plan_id: string
        }
        Insert: {
          created_at?: string
          id?: string
          is_included?: boolean | null
          module_id: string
          plan_id: string
        }
        Update: {
          created_at?: string
          id?: string
          is_included?: boolean | null
          module_id?: string
          plan_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "plan_modules_module_id_fkey"
            columns: ["module_id"]
            isOneToOne: false
            referencedRelation: "platform_modules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "plan_modules_plan_id_fkey"
            columns: ["plan_id"]
            isOneToOne: false
            referencedRelation: "platform_plans"
            referencedColumns: ["id"]
          },
        ]
      }
      platform_ads_daily: {
        Row: {
          acos: number | null
          add_to_cart: number | null
          atc_rate: number | null
          budget_month: number | null
          budget_utilization: number | null
          checkout_rate: number | null
          checkouts: number | null
          clicks: number | null
          cpa: number | null
          cpa_trend: number | null
          cpc: number | null
          cpm: number | null
          created_at: string | null
          ctr: number | null
          cvr: number | null
          id: string
          impressions: number | null
          orders: number | null
          platform: string
          quality_score: number | null
          reach: number | null
          relevance_score: number | null
          report_date: string
          revenue: number | null
          roas: number | null
          roas_trend: number | null
          spend_mtd: number | null
          spend_today: number | null
          spend_trend: number | null
          tenant_id: string
        }
        Insert: {
          acos?: number | null
          add_to_cart?: number | null
          atc_rate?: number | null
          budget_month?: number | null
          budget_utilization?: number | null
          checkout_rate?: number | null
          checkouts?: number | null
          clicks?: number | null
          cpa?: number | null
          cpa_trend?: number | null
          cpc?: number | null
          cpm?: number | null
          created_at?: string | null
          ctr?: number | null
          cvr?: number | null
          id?: string
          impressions?: number | null
          orders?: number | null
          platform: string
          quality_score?: number | null
          reach?: number | null
          relevance_score?: number | null
          report_date?: string
          revenue?: number | null
          roas?: number | null
          roas_trend?: number | null
          spend_mtd?: number | null
          spend_today?: number | null
          spend_trend?: number | null
          tenant_id: string
        }
        Update: {
          acos?: number | null
          add_to_cart?: number | null
          atc_rate?: number | null
          budget_month?: number | null
          budget_utilization?: number | null
          checkout_rate?: number | null
          checkouts?: number | null
          clicks?: number | null
          cpa?: number | null
          cpa_trend?: number | null
          cpc?: number | null
          cpm?: number | null
          created_at?: string | null
          ctr?: number | null
          cvr?: number | null
          id?: string
          impressions?: number | null
          orders?: number | null
          platform?: string
          quality_score?: number | null
          reach?: number | null
          relevance_score?: number | null
          report_date?: string
          revenue?: number | null
          roas?: number | null
          roas_trend?: number | null
          spend_mtd?: number | null
          spend_today?: number | null
          spend_trend?: number | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      platform_modules: {
        Row: {
          code: string
          color: string | null
          created_at: string
          description: string | null
          icon: string | null
          id: string
          is_active: boolean | null
          is_core: boolean | null
          name: string
          sort_order: number | null
          updated_at: string
        }
        Insert: {
          code: string
          color?: string | null
          created_at?: string
          description?: string | null
          icon?: string | null
          id?: string
          is_active?: boolean | null
          is_core?: boolean | null
          name: string
          sort_order?: number | null
          updated_at?: string
        }
        Update: {
          code?: string
          color?: string | null
          created_at?: string
          description?: string | null
          icon?: string | null
          id?: string
          is_active?: boolean | null
          is_core?: boolean | null
          name?: string
          sort_order?: number | null
          updated_at?: string
        }
        Relationships: []
      }
      platform_plans: {
        Row: {
          code: string
          created_at: string
          description: string | null
          features: Json | null
          id: string
          is_active: boolean | null
          max_users: number | null
          name: string
          price_monthly: number | null
          price_yearly: number | null
          sort_order: number | null
          updated_at: string
        }
        Insert: {
          code: string
          created_at?: string
          description?: string | null
          features?: Json | null
          id?: string
          is_active?: boolean | null
          max_users?: number | null
          name: string
          price_monthly?: number | null
          price_yearly?: number | null
          sort_order?: number | null
          updated_at?: string
        }
        Update: {
          code?: string
          created_at?: string
          description?: string | null
          features?: Json | null
          id?: string
          is_active?: boolean | null
          max_users?: number | null
          name?: string
          price_monthly?: number | null
          price_yearly?: number | null
          sort_order?: number | null
          updated_at?: string
        }
        Relationships: []
      }
      platform_violations: {
        Row: {
          action_required: string | null
          affected_products: string[] | null
          channel: string
          created_at: string | null
          deadline: string | null
          description: string | null
          detected_at: string | null
          id: string
          penalty_amount: number | null
          resolved_at: string | null
          severity: string | null
          status: string | null
          tenant_id: string
          updated_at: string | null
          violation_code: string | null
          violation_type: string
        }
        Insert: {
          action_required?: string | null
          affected_products?: string[] | null
          channel: string
          created_at?: string | null
          deadline?: string | null
          description?: string | null
          detected_at?: string | null
          id?: string
          penalty_amount?: number | null
          resolved_at?: string | null
          severity?: string | null
          status?: string | null
          tenant_id: string
          updated_at?: string | null
          violation_code?: string | null
          violation_type: string
        }
        Update: {
          action_required?: string | null
          affected_products?: string[] | null
          channel?: string
          created_at?: string | null
          deadline?: string | null
          description?: string | null
          detected_at?: string | null
          id?: string
          penalty_amount?: number | null
          resolved_at?: string | null
          severity?: string | null
          status?: string | null
          tenant_id?: string
          updated_at?: string | null
          violation_code?: string | null
          violation_type?: string
        }
        Relationships: [
          {
            foreignKeyName: "platform_violations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "platform_violations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "platform_violations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "platform_violations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      pos_terminals: {
        Row: {
          created_at: string | null
          id: string
          ip_address: string | null
          is_active: boolean | null
          last_heartbeat_at: string | null
          last_transaction_at: string | null
          offline_since: string | null
          software_version: string | null
          status: string | null
          store_id: string | null
          tenant_id: string
          terminal_code: string
          terminal_name: string | null
          total_downtime_minutes: number | null
          updated_at: string | null
        }
        Insert: {
          created_at?: string | null
          id?: string
          ip_address?: string | null
          is_active?: boolean | null
          last_heartbeat_at?: string | null
          last_transaction_at?: string | null
          offline_since?: string | null
          software_version?: string | null
          status?: string | null
          store_id?: string | null
          tenant_id: string
          terminal_code: string
          terminal_name?: string | null
          total_downtime_minutes?: number | null
          updated_at?: string | null
        }
        Update: {
          created_at?: string | null
          id?: string
          ip_address?: string | null
          is_active?: boolean | null
          last_heartbeat_at?: string | null
          last_transaction_at?: string | null
          offline_since?: string | null
          software_version?: string | null
          status?: string | null
          store_id?: string | null
          tenant_id?: string
          terminal_code?: string
          terminal_name?: string | null
          total_downtime_minutes?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "pos_terminals_store_id_fkey"
            columns: ["store_id"]
            isOneToOne: false
            referencedRelation: "stores"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "pos_terminals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "pos_terminals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "pos_terminals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "pos_terminals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      prediction_accuracy_log: {
        Row: {
          accuracy_percent: number | null
          actual_value: number | null
          created_at: string | null
          evaluation_date: string
          id: string
          metadata: Json | null
          predicted_value: number | null
          prediction_id: string
          tenant_id: string
          variance: number | null
        }
        Insert: {
          accuracy_percent?: number | null
          actual_value?: number | null
          created_at?: string | null
          evaluation_date: string
          id?: string
          metadata?: Json | null
          predicted_value?: number | null
          prediction_id: string
          tenant_id: string
          variance?: number | null
        }
        Update: {
          accuracy_percent?: number | null
          actual_value?: number | null
          created_at?: string | null
          evaluation_date?: string
          id?: string
          metadata?: Json | null
          predicted_value?: number | null
          prediction_id?: string
          tenant_id?: string
          variance?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "prediction_accuracy_log_prediction_id_fkey"
            columns: ["prediction_id"]
            isOneToOne: false
            referencedRelation: "ai_predictions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "prediction_accuracy_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "prediction_accuracy_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "prediction_accuracy_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "prediction_accuracy_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      predictive_alert_rules: {
        Row: {
          breach_threshold: number
          consecutive_periods: number | null
          cooldown_hours: number | null
          created_at: string | null
          decision_framing_template: Json | null
          description: string | null
          dimension_filter: string | null
          id: string
          is_enabled: boolean | null
          lookback_periods: number | null
          metric_code: string
          min_acceleration_trigger: number | null
          min_data_points: number | null
          min_slope_trigger: number | null
          priority: number | null
          rule_code: string
          rule_name: string
          severity: string | null
          suggested_actions: Json | null
          tenant_id: string
          threshold_direction: string | null
          trend_type: string | null
          updated_at: string | null
        }
        Insert: {
          breach_threshold: number
          consecutive_periods?: number | null
          cooldown_hours?: number | null
          created_at?: string | null
          decision_framing_template?: Json | null
          description?: string | null
          dimension_filter?: string | null
          id?: string
          is_enabled?: boolean | null
          lookback_periods?: number | null
          metric_code: string
          min_acceleration_trigger?: number | null
          min_data_points?: number | null
          min_slope_trigger?: number | null
          priority?: number | null
          rule_code: string
          rule_name: string
          severity?: string | null
          suggested_actions?: Json | null
          tenant_id: string
          threshold_direction?: string | null
          trend_type?: string | null
          updated_at?: string | null
        }
        Update: {
          breach_threshold?: number
          consecutive_periods?: number | null
          cooldown_hours?: number | null
          created_at?: string | null
          decision_framing_template?: Json | null
          description?: string | null
          dimension_filter?: string | null
          id?: string
          is_enabled?: boolean | null
          lookback_periods?: number | null
          metric_code?: string
          min_acceleration_trigger?: number | null
          min_data_points?: number | null
          min_slope_trigger?: number | null
          priority?: number | null
          rule_code?: string
          rule_name?: string
          severity?: string | null
          suggested_actions?: Json | null
          tenant_id?: string
          threshold_direction?: string | null
          trend_type?: string | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "predictive_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "predictive_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "predictive_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "predictive_alert_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      product_master: {
        Row: {
          attributes: Json | null
          avg_margin_percent: number | null
          avg_selling_price: number | null
          barcode: string | null
          brand: string | null
          category: string | null
          channel_skus: Json | null
          cost_price: number | null
          created_at: string | null
          current_stock: number | null
          gl_cogs_account_id: string | null
          gl_inventory_account_id: string | null
          gl_revenue_account_id: string | null
          id: string
          internal_product_id: string | null
          is_active: boolean | null
          last_calculated_at: string | null
          lead_time_days: number | null
          max_stock: number | null
          min_stock: number | null
          product_name: string
          reorder_point: number | null
          selling_price: number | null
          sku: string
          subcategory: string | null
          supplier_id: string | null
          tenant_id: string
          total_profit: number | null
          total_revenue: number | null
          total_sold: number | null
          unit: string | null
          updated_at: string | null
        }
        Insert: {
          attributes?: Json | null
          avg_margin_percent?: number | null
          avg_selling_price?: number | null
          barcode?: string | null
          brand?: string | null
          category?: string | null
          channel_skus?: Json | null
          cost_price?: number | null
          created_at?: string | null
          current_stock?: number | null
          gl_cogs_account_id?: string | null
          gl_inventory_account_id?: string | null
          gl_revenue_account_id?: string | null
          id?: string
          internal_product_id?: string | null
          is_active?: boolean | null
          last_calculated_at?: string | null
          lead_time_days?: number | null
          max_stock?: number | null
          min_stock?: number | null
          product_name: string
          reorder_point?: number | null
          selling_price?: number | null
          sku: string
          subcategory?: string | null
          supplier_id?: string | null
          tenant_id: string
          total_profit?: number | null
          total_revenue?: number | null
          total_sold?: number | null
          unit?: string | null
          updated_at?: string | null
        }
        Update: {
          attributes?: Json | null
          avg_margin_percent?: number | null
          avg_selling_price?: number | null
          barcode?: string | null
          brand?: string | null
          category?: string | null
          channel_skus?: Json | null
          cost_price?: number | null
          created_at?: string | null
          current_stock?: number | null
          gl_cogs_account_id?: string | null
          gl_inventory_account_id?: string | null
          gl_revenue_account_id?: string | null
          id?: string
          internal_product_id?: string | null
          is_active?: boolean | null
          last_calculated_at?: string | null
          lead_time_days?: number | null
          max_stock?: number | null
          min_stock?: number | null
          product_name?: string
          reorder_point?: number | null
          selling_price?: number | null
          sku?: string
          subcategory?: string | null
          supplier_id?: string | null
          tenant_id?: string
          total_profit?: number | null
          total_revenue?: number | null
          total_sold?: number | null
          unit?: string | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "product_master_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "product_master_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "product_master_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "product_master_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      product_metrics: {
        Row: {
          avg_daily_orders: number | null
          avg_daily_quantity: number | null
          avg_daily_revenue: number | null
          brand: string | null
          category: string | null
          channel_breakdown: Json | null
          created_at: string
          current_stock: number | null
          days_of_stock: number | null
          gross_margin: number | null
          gross_margin_percent: number | null
          gross_profit_30d: number | null
          id: string
          is_profitable: boolean | null
          last_calculated_at: string | null
          last_order_date: string | null
          product_id: string | null
          product_name: string
          profit_per_unit: number | null
          profit_status: string | null
          sku: string
          tenant_id: string
          total_cost_30d: number | null
          total_orders_30d: number | null
          total_quantity_30d: number | null
          total_revenue_30d: number | null
          unit_cost: number
          unit_price: number
          updated_at: string
        }
        Insert: {
          avg_daily_orders?: number | null
          avg_daily_quantity?: number | null
          avg_daily_revenue?: number | null
          brand?: string | null
          category?: string | null
          channel_breakdown?: Json | null
          created_at?: string
          current_stock?: number | null
          days_of_stock?: number | null
          gross_margin?: number | null
          gross_margin_percent?: number | null
          gross_profit_30d?: number | null
          id?: string
          is_profitable?: boolean | null
          last_calculated_at?: string | null
          last_order_date?: string | null
          product_id?: string | null
          product_name: string
          profit_per_unit?: number | null
          profit_status?: string | null
          sku: string
          tenant_id: string
          total_cost_30d?: number | null
          total_orders_30d?: number | null
          total_quantity_30d?: number | null
          total_revenue_30d?: number | null
          unit_cost?: number
          unit_price?: number
          updated_at?: string
        }
        Update: {
          avg_daily_orders?: number | null
          avg_daily_quantity?: number | null
          avg_daily_revenue?: number | null
          brand?: string | null
          category?: string | null
          channel_breakdown?: Json | null
          created_at?: string
          current_stock?: number | null
          days_of_stock?: number | null
          gross_margin?: number | null
          gross_margin_percent?: number | null
          gross_profit_30d?: number | null
          id?: string
          is_profitable?: boolean | null
          last_calculated_at?: string | null
          last_order_date?: string | null
          product_id?: string | null
          product_name?: string
          profit_per_unit?: number | null
          profit_status?: string | null
          sku?: string
          tenant_id?: string
          total_cost_30d?: number | null
          total_orders_30d?: number | null
          total_quantity_30d?: number | null
          total_revenue_30d?: number | null
          unit_cost?: number
          unit_price?: number
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "product_metrics_product_id_fkey"
            columns: ["product_id"]
            isOneToOne: false
            referencedRelation: "products"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "product_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "product_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "product_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "product_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      products: {
        Row: {
          avg_daily_sales: number | null
          brand: string | null
          category: string | null
          cost_price: number | null
          created_at: string | null
          current_stock: number | null
          description: string | null
          gross_margin: number | null
          gross_margin_percent: number | null
          id: string
          is_active: boolean | null
          is_profitable: boolean | null
          last_sale_date: string | null
          name: string
          platform_stock: Json | null
          prev_sales_velocity: number | null
          reorder_point: number | null
          sales_velocity: number | null
          selling_price: number | null
          sku: string | null
          subcategory: string | null
          tenant_id: string
          unit: string | null
          updated_at: string | null
        }
        Insert: {
          avg_daily_sales?: number | null
          brand?: string | null
          category?: string | null
          cost_price?: number | null
          created_at?: string | null
          current_stock?: number | null
          description?: string | null
          gross_margin?: number | null
          gross_margin_percent?: number | null
          id?: string
          is_active?: boolean | null
          is_profitable?: boolean | null
          last_sale_date?: string | null
          name: string
          platform_stock?: Json | null
          prev_sales_velocity?: number | null
          reorder_point?: number | null
          sales_velocity?: number | null
          selling_price?: number | null
          sku?: string | null
          subcategory?: string | null
          tenant_id: string
          unit?: string | null
          updated_at?: string | null
        }
        Update: {
          avg_daily_sales?: number | null
          brand?: string | null
          category?: string | null
          cost_price?: number | null
          created_at?: string | null
          current_stock?: number | null
          description?: string | null
          gross_margin?: number | null
          gross_margin_percent?: number | null
          id?: string
          is_active?: boolean | null
          is_profitable?: boolean | null
          last_sale_date?: string | null
          name?: string
          platform_stock?: Json | null
          prev_sales_velocity?: number | null
          reorder_point?: number | null
          sales_velocity?: number | null
          selling_price?: number | null
          sku?: string | null
          subcategory?: string | null
          tenant_id?: string
          unit?: string | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "products_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      profiles: {
        Row: {
          active_tenant_id: string | null
          avatar_url: string | null
          company: string | null
          created_at: string
          department: string | null
          full_name: string | null
          id: string
          onboarding_completed_at: string | null
          onboarding_status: string | null
          phone: string | null
          position: string | null
          updated_at: string
          user_role: string | null
        }
        Insert: {
          active_tenant_id?: string | null
          avatar_url?: string | null
          company?: string | null
          created_at?: string
          department?: string | null
          full_name?: string | null
          id: string
          onboarding_completed_at?: string | null
          onboarding_status?: string | null
          phone?: string | null
          position?: string | null
          updated_at?: string
          user_role?: string | null
        }
        Update: {
          active_tenant_id?: string | null
          avatar_url?: string | null
          company?: string | null
          created_at?: string
          department?: string | null
          full_name?: string | null
          id?: string
          onboarding_completed_at?: string | null
          onboarding_status?: string | null
          phone?: string | null
          position?: string | null
          updated_at?: string
          user_role?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "profiles_active_tenant_id_fkey"
            columns: ["active_tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "profiles_active_tenant_id_fkey"
            columns: ["active_tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "profiles_active_tenant_id_fkey"
            columns: ["active_tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "profiles_active_tenant_id_fkey"
            columns: ["active_tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      promotion_campaigns: {
        Row: {
          acos: number | null
          actual_cost: number | null
          add_to_cart: number | null
          atc_rate: number | null
          budget: number | null
          campaign_name: string
          campaign_type: string | null
          channel: string | null
          clicks: number | null
          cpa: number | null
          cpc: number | null
          cpm: number | null
          created_at: string | null
          ctr: number | null
          cvr: number | null
          end_date: string | null
          id: string
          impressions: number | null
          platform_icon: string | null
          quality_score: number | null
          relevance_score: number | null
          roas: number | null
          start_date: string | null
          status: string | null
          tenant_id: string
          total_discount_given: number | null
          total_orders: number | null
          total_revenue: number | null
          updated_at: string | null
        }
        Insert: {
          acos?: number | null
          actual_cost?: number | null
          add_to_cart?: number | null
          atc_rate?: number | null
          budget?: number | null
          campaign_name: string
          campaign_type?: string | null
          channel?: string | null
          clicks?: number | null
          cpa?: number | null
          cpc?: number | null
          cpm?: number | null
          created_at?: string | null
          ctr?: number | null
          cvr?: number | null
          end_date?: string | null
          id?: string
          impressions?: number | null
          platform_icon?: string | null
          quality_score?: number | null
          relevance_score?: number | null
          roas?: number | null
          start_date?: string | null
          status?: string | null
          tenant_id: string
          total_discount_given?: number | null
          total_orders?: number | null
          total_revenue?: number | null
          updated_at?: string | null
        }
        Update: {
          acos?: number | null
          actual_cost?: number | null
          add_to_cart?: number | null
          atc_rate?: number | null
          budget?: number | null
          campaign_name?: string
          campaign_type?: string | null
          channel?: string | null
          clicks?: number | null
          cpa?: number | null
          cpc?: number | null
          cpm?: number | null
          created_at?: string | null
          ctr?: number | null
          cvr?: number | null
          end_date?: string | null
          id?: string
          impressions?: number | null
          platform_icon?: string | null
          quality_score?: number | null
          relevance_score?: number | null
          roas?: number | null
          start_date?: string | null
          status?: string | null
          tenant_id?: string
          total_discount_given?: number | null
          total_orders?: number | null
          total_revenue?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      promotion_performance: {
        Row: {
          avg_order_value: number | null
          cogs: number | null
          created_at: string
          discount_given: number | null
          gross_profit: number | null
          gross_revenue: number | null
          id: string
          net_revenue: number | null
          new_customers: number | null
          orders_count: number | null
          performance_date: string
          promotion_id: string
          repeat_customers: number | null
          tenant_id: string
        }
        Insert: {
          avg_order_value?: number | null
          cogs?: number | null
          created_at?: string
          discount_given?: number | null
          gross_profit?: number | null
          gross_revenue?: number | null
          id?: string
          net_revenue?: number | null
          new_customers?: number | null
          orders_count?: number | null
          performance_date: string
          promotion_id: string
          repeat_customers?: number | null
          tenant_id: string
        }
        Update: {
          avg_order_value?: number | null
          cogs?: number | null
          created_at?: string
          discount_given?: number | null
          gross_profit?: number | null
          gross_revenue?: number | null
          id?: string
          net_revenue?: number | null
          new_customers?: number | null
          orders_count?: number | null
          performance_date?: string
          promotion_id?: string
          repeat_customers?: number | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "promotion_performance_promotion_id_fkey"
            columns: ["promotion_id"]
            isOneToOne: false
            referencedRelation: "promotions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotion_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotion_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_performance_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      promotions: {
        Row: {
          actual_orders: number | null
          actual_revenue: number | null
          actual_spend: number | null
          budget: number | null
          channel: string | null
          created_at: string
          created_by: string | null
          discount_value: number | null
          end_date: string
          id: string
          max_discount: number | null
          min_order_value: number | null
          notes: string | null
          promotion_code: string | null
          promotion_name: string
          promotion_type: string
          start_date: string
          status: string | null
          target_orders: number | null
          target_revenue: number | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          actual_orders?: number | null
          actual_revenue?: number | null
          actual_spend?: number | null
          budget?: number | null
          channel?: string | null
          created_at?: string
          created_by?: string | null
          discount_value?: number | null
          end_date: string
          id?: string
          max_discount?: number | null
          min_order_value?: number | null
          notes?: string | null
          promotion_code?: string | null
          promotion_name: string
          promotion_type: string
          start_date: string
          status?: string | null
          target_orders?: number | null
          target_revenue?: number | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          actual_orders?: number | null
          actual_revenue?: number | null
          actual_spend?: number | null
          budget?: number | null
          channel?: string | null
          created_at?: string
          created_by?: string | null
          discount_value?: number | null
          end_date?: string
          id?: string
          max_discount?: number | null
          min_order_value?: number | null
          notes?: string | null
          promotion_code?: string | null
          promotion_name?: string
          promotion_type?: string
          start_date?: string
          status?: string | null
          target_orders?: number | null
          target_revenue?: number | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      purchase_order_items: {
        Row: {
          created_at: string | null
          id: string
          product_id: string | null
          product_name: string | null
          purchase_order_id: string
          quantity_ordered: number | null
          quantity_received: number | null
          sku: string | null
          tenant_id: string
          total_price: number | null
          unit_price: number | null
        }
        Insert: {
          created_at?: string | null
          id?: string
          product_id?: string | null
          product_name?: string | null
          purchase_order_id: string
          quantity_ordered?: number | null
          quantity_received?: number | null
          sku?: string | null
          tenant_id: string
          total_price?: number | null
          unit_price?: number | null
        }
        Update: {
          created_at?: string | null
          id?: string
          product_id?: string | null
          product_name?: string | null
          purchase_order_id?: string
          quantity_ordered?: number | null
          quantity_received?: number | null
          sku?: string | null
          tenant_id?: string
          total_price?: number | null
          unit_price?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "purchase_order_items_product_id_fkey"
            columns: ["product_id"]
            isOneToOne: false
            referencedRelation: "products"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "purchase_order_items_purchase_order_id_fkey"
            columns: ["purchase_order_id"]
            isOneToOne: false
            referencedRelation: "purchase_orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "purchase_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "purchase_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "purchase_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "purchase_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      purchase_orders: {
        Row: {
          actual_delivery_date: string | null
          created_at: string | null
          expected_delivery_date: string | null
          expected_lead_time_days: number | null
          id: string
          is_on_time: boolean | null
          items_count: number | null
          items_received: number | null
          lead_time_days: number | null
          notes: string | null
          order_date: string | null
          po_number: string
          received_amount: number | null
          status: string | null
          tenant_id: string
          total_amount: number | null
          updated_at: string | null
          vendor_id: string | null
          vendor_name: string | null
        }
        Insert: {
          actual_delivery_date?: string | null
          created_at?: string | null
          expected_delivery_date?: string | null
          expected_lead_time_days?: number | null
          id?: string
          is_on_time?: boolean | null
          items_count?: number | null
          items_received?: number | null
          lead_time_days?: number | null
          notes?: string | null
          order_date?: string | null
          po_number: string
          received_amount?: number | null
          status?: string | null
          tenant_id: string
          total_amount?: number | null
          updated_at?: string | null
          vendor_id?: string | null
          vendor_name?: string | null
        }
        Update: {
          actual_delivery_date?: string | null
          created_at?: string | null
          expected_delivery_date?: string | null
          expected_lead_time_days?: number | null
          id?: string
          is_on_time?: boolean | null
          items_count?: number | null
          items_received?: number | null
          lead_time_days?: number | null
          notes?: string | null
          order_date?: string | null
          po_number?: string
          received_amount?: number | null
          status?: string | null
          tenant_id?: string
          total_amount?: number | null
          updated_at?: string | null
          vendor_id?: string | null
          vendor_name?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "purchase_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "purchase_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "purchase_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "purchase_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "purchase_orders_vendor_id_fkey"
            columns: ["vendor_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
        ]
      }
      push_subscriptions: {
        Row: {
          auth_key: string
          created_at: string
          device_info: Json | null
          endpoint: string
          id: string
          is_active: boolean
          p256dh_key: string
          tenant_id: string
          updated_at: string
          user_id: string
        }
        Insert: {
          auth_key: string
          created_at?: string
          device_info?: Json | null
          endpoint: string
          id?: string
          is_active?: boolean
          p256dh_key: string
          tenant_id: string
          updated_at?: string
          user_id: string
        }
        Update: {
          auth_key?: string
          created_at?: string
          device_info?: Json | null
          endpoint?: string
          id?: string
          is_active?: boolean
          p256dh_key?: string
          tenant_id?: string
          updated_at?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "push_subscriptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "push_subscriptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "push_subscriptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "push_subscriptions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      reconciliation_kpi_snapshots: {
        Row: {
          auto_confirmed_count: number
          avg_confidence: number | null
          cash_acceleration_amount: number | null
          cash_acceleration_days: number | null
          created_at: string
          estimated_cost_saved: number | null
          estimated_minutes_saved: number | null
          false_auto_count: number
          id: string
          manual_confirmed_count: number
          period_end: string
          period_start: string
          tenant_id: string
          total_suggestions: number
        }
        Insert: {
          auto_confirmed_count?: number
          avg_confidence?: number | null
          cash_acceleration_amount?: number | null
          cash_acceleration_days?: number | null
          created_at?: string
          estimated_cost_saved?: number | null
          estimated_minutes_saved?: number | null
          false_auto_count?: number
          id?: string
          manual_confirmed_count?: number
          period_end: string
          period_start: string
          tenant_id: string
          total_suggestions?: number
        }
        Update: {
          auto_confirmed_count?: number
          avg_confidence?: number | null
          cash_acceleration_amount?: number | null
          cash_acceleration_days?: number | null
          created_at?: string
          estimated_cost_saved?: number | null
          estimated_minutes_saved?: number | null
          false_auto_count?: number
          id?: string
          manual_confirmed_count?: number
          period_end?: string
          period_start?: string
          tenant_id?: string
          total_suggestions?: number
        }
        Relationships: [
          {
            foreignKeyName: "reconciliation_kpi_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_kpi_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_kpi_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_kpi_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      reconciliation_links: {
        Row: {
          bank_transaction_id: string | null
          confidence: number
          created_at: string
          created_by: string | null
          currency: string | null
          id: string
          is_voided: boolean
          match_evidence: Json | null
          match_type: string
          settlement_amount: number
          settlement_date: string
          target_id: string
          target_type: string
          tenant_id: string
          void_reason: string | null
          voided_at: string | null
          voided_by: string | null
        }
        Insert: {
          bank_transaction_id?: string | null
          confidence?: number
          created_at?: string
          created_by?: string | null
          currency?: string | null
          id?: string
          is_voided?: boolean
          match_evidence?: Json | null
          match_type: string
          settlement_amount: number
          settlement_date?: string
          target_id: string
          target_type?: string
          tenant_id: string
          void_reason?: string | null
          voided_at?: string | null
          voided_by?: string | null
        }
        Update: {
          bank_transaction_id?: string | null
          confidence?: number
          created_at?: string
          created_by?: string | null
          currency?: string | null
          id?: string
          is_voided?: boolean
          match_evidence?: Json | null
          match_type?: string
          settlement_amount?: number
          settlement_date?: string
          target_id?: string
          target_type?: string
          tenant_id?: string
          void_reason?: string | null
          voided_at?: string | null
          voided_by?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "reconciliation_links_bank_transaction_id_fkey"
            columns: ["bank_transaction_id"]
            isOneToOne: false
            referencedRelation: "bank_transactions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_links_bank_transaction_id_fkey"
            columns: ["bank_transaction_id"]
            isOneToOne: false
            referencedRelation: "v_bank_txn_match_state"
            referencedColumns: ["bank_transaction_id"]
          },
          {
            foreignKeyName: "reconciliation_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      reconciliation_ml_features: {
        Row: {
          created_at: string
          exception_type: string
          features: Json
          id: string
          label: string | null
          suggestion_id: string
          suggestion_type: string
          tenant_id: string
        }
        Insert: {
          created_at?: string
          exception_type: string
          features: Json
          id?: string
          label?: string | null
          suggestion_id: string
          suggestion_type: string
          tenant_id: string
        }
        Update: {
          created_at?: string
          exception_type?: string
          features?: Json
          id?: string
          label?: string | null
          suggestion_id?: string
          suggestion_type?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "reconciliation_ml_features_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_ml_features_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_ml_features_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_ml_features_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      reconciliation_ml_predictions: {
        Row: {
          created_at: string
          explanation: Json
          features_hash: string | null
          final_confidence: number | null
          id: string
          is_latest: boolean
          model_version: string
          predicted_confidence: number
          suggestion_id: string
          tenant_id: string
        }
        Insert: {
          created_at?: string
          explanation: Json
          features_hash?: string | null
          final_confidence?: number | null
          id?: string
          is_latest?: boolean
          model_version: string
          predicted_confidence: number
          suggestion_id: string
          tenant_id: string
        }
        Update: {
          created_at?: string
          explanation?: Json
          features_hash?: string | null
          final_confidence?: number | null
          id?: string
          is_latest?: boolean
          model_version?: string
          predicted_confidence?: number
          suggestion_id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "reconciliation_ml_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_ml_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_ml_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_ml_predictions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      reconciliation_suggestion_outcomes: {
        Row: {
          confidence_at_time: number
          created_at: string
          decided_at: string
          decided_by: string | null
          exception_id: string
          final_result: string
          id: string
          outcome: string
          rationale_snapshot: Json
          suggestion_id: string
          tenant_id: string
        }
        Insert: {
          confidence_at_time: number
          created_at?: string
          decided_at?: string
          decided_by?: string | null
          exception_id: string
          final_result: string
          id?: string
          outcome: string
          rationale_snapshot?: Json
          suggestion_id: string
          tenant_id: string
        }
        Update: {
          confidence_at_time?: number
          created_at?: string
          decided_at?: string
          decided_by?: string | null
          exception_id?: string
          final_result?: string
          id?: string
          outcome?: string
          rationale_snapshot?: Json
          suggestion_id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "reconciliation_suggestion_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_suggestion_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestion_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestion_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      reconciliation_suggestions: {
        Row: {
          bank_transaction_id: string | null
          confidence: number
          created_at: string
          currency: string
          exception_id: string
          id: string
          invoice_id: string | null
          rationale: Json
          suggested_amount: number
          suggestion_type: string
          tenant_id: string
        }
        Insert: {
          bank_transaction_id?: string | null
          confidence?: number
          created_at?: string
          currency?: string
          exception_id: string
          id?: string
          invoice_id?: string | null
          rationale?: Json
          suggested_amount: number
          suggestion_type: string
          tenant_id: string
        }
        Update: {
          bank_transaction_id?: string | null
          confidence?: number
          created_at?: string
          currency?: string
          exception_id?: string
          id?: string
          invoice_id?: string | null
          rationale?: Json
          suggested_amount?: number
          suggestion_type?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "reconciliation_suggestions_bank_transaction_id_fkey"
            columns: ["bank_transaction_id"]
            isOneToOne: false
            referencedRelation: "bank_transactions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_bank_transaction_id_fkey"
            columns: ["bank_transaction_id"]
            isOneToOne: false
            referencedRelation: "v_bank_txn_match_state"
            referencedColumns: ["bank_transaction_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_exception_id_fkey"
            columns: ["exception_id"]
            isOneToOne: false
            referencedRelation: "exceptions_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_invoice_id_fkey"
            columns: ["invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reconciliation_suggestions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      recurring_templates: {
        Row: {
          auto_post: boolean | null
          created_at: string
          created_by: string | null
          end_date: string | null
          frequency: string
          id: string
          is_active: boolean
          last_run_date: string | null
          name: string
          next_run_date: string | null
          start_date: string
          template_data: Json
          template_type: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          auto_post?: boolean | null
          created_at?: string
          created_by?: string | null
          end_date?: string | null
          frequency: string
          id?: string
          is_active?: boolean
          last_run_date?: string | null
          name: string
          next_run_date?: string | null
          start_date: string
          template_data?: Json
          template_type: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          auto_post?: boolean | null
          created_at?: string
          created_by?: string | null
          end_date?: string | null
          frequency?: string
          id?: string
          is_active?: boolean
          last_run_date?: string | null
          name?: string
          next_run_date?: string | null
          start_date?: string
          template_data?: Json
          template_type?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "recurring_templates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "recurring_templates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "recurring_templates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "recurring_templates_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      revenue_allocation_bridge: {
        Row: {
          cdp_scenario_id: string | null
          cdp_scenario_name: string | null
          created_at: string | null
          fdp_scenario_id: string | null
          id: string
          monthly_allocation: Json | null
          quarterly_weights: Json | null
          status: string | null
          synced_at: string | null
          tenant_id: string
          total_equity_12m: number | null
          updated_at: string | null
        }
        Insert: {
          cdp_scenario_id?: string | null
          cdp_scenario_name?: string | null
          created_at?: string | null
          fdp_scenario_id?: string | null
          id?: string
          monthly_allocation?: Json | null
          quarterly_weights?: Json | null
          status?: string | null
          synced_at?: string | null
          tenant_id: string
          total_equity_12m?: number | null
          updated_at?: string | null
        }
        Update: {
          cdp_scenario_id?: string | null
          cdp_scenario_name?: string | null
          created_at?: string | null
          fdp_scenario_id?: string | null
          id?: string
          monthly_allocation?: Json | null
          quarterly_weights?: Json | null
          status?: string | null
          synced_at?: string | null
          tenant_id?: string
          total_equity_12m?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "revenue_allocation_bridge_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "revenue_allocation_bridge_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "revenue_allocation_bridge_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "revenue_allocation_bridge_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      revenue_entries: {
        Row: {
          amount: number
          created_at: string
          created_by: string | null
          entry_date: string
          id: string
          notes: string | null
          revenue_id: string | null
          tenant_id: string | null
        }
        Insert: {
          amount?: number
          created_at?: string
          created_by?: string | null
          entry_date?: string
          id?: string
          notes?: string | null
          revenue_id?: string | null
          tenant_id?: string | null
        }
        Update: {
          amount?: number
          created_at?: string
          created_by?: string | null
          entry_date?: string
          id?: string
          notes?: string | null
          revenue_id?: string | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "revenue_entries_revenue_id_fkey"
            columns: ["revenue_id"]
            isOneToOne: false
            referencedRelation: "revenues"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "revenue_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "revenue_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "revenue_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "revenue_entries_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      revenues: {
        Row: {
          amount: number
          contract_name: string
          created_at: string
          created_by: string | null
          customer_id: string | null
          customer_name: string | null
          description: string | null
          end_date: string | null
          id: string
          is_active: boolean | null
          notes: string | null
          recurring_day: number | null
          revenue_type: Database["public"]["Enums"]["revenue_type"]
          source: Database["public"]["Enums"]["revenue_source"]
          start_date: string
          tenant_id: string | null
          updated_at: string
        }
        Insert: {
          amount?: number
          contract_name: string
          created_at?: string
          created_by?: string | null
          customer_id?: string | null
          customer_name?: string | null
          description?: string | null
          end_date?: string | null
          id?: string
          is_active?: boolean | null
          notes?: string | null
          recurring_day?: number | null
          revenue_type?: Database["public"]["Enums"]["revenue_type"]
          source?: Database["public"]["Enums"]["revenue_source"]
          start_date?: string
          tenant_id?: string | null
          updated_at?: string
        }
        Update: {
          amount?: number
          contract_name?: string
          created_at?: string
          created_by?: string | null
          customer_id?: string | null
          customer_name?: string | null
          description?: string | null
          end_date?: string | null
          id?: string
          is_active?: boolean | null
          notes?: string | null
          recurring_day?: number | null
          revenue_type?: Database["public"]["Enums"]["revenue_type"]
          source?: Database["public"]["Enums"]["revenue_source"]
          start_date?: string
          tenant_id?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "revenues_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "revenues_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "revenues_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "revenues_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "revenues_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "revenues_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      reviews: {
        Row: {
          channel: string | null
          created_at: string | null
          customer_id: string | null
          id: string
          is_responded: boolean | null
          order_id: string | null
          platform_review_id: string | null
          product_id: string | null
          rating: number | null
          responded_at: string | null
          responded_by: string | null
          response_content: string | null
          review_content: string | null
          review_date: string | null
          review_images: string[] | null
          sentiment: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          channel?: string | null
          created_at?: string | null
          customer_id?: string | null
          id?: string
          is_responded?: boolean | null
          order_id?: string | null
          platform_review_id?: string | null
          product_id?: string | null
          rating?: number | null
          responded_at?: string | null
          responded_by?: string | null
          response_content?: string | null
          review_content?: string | null
          review_date?: string | null
          review_images?: string[] | null
          sentiment?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          channel?: string | null
          created_at?: string | null
          customer_id?: string | null
          id?: string
          is_responded?: boolean | null
          order_id?: string | null
          platform_review_id?: string | null
          product_id?: string | null
          rating?: number | null
          responded_at?: string | null
          responded_by?: string | null
          response_content?: string | null
          review_content?: string | null
          review_date?: string | null
          review_images?: string[] | null
          sentiment?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "reviews_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reviews_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reviews_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reviews_product_id_fkey"
            columns: ["product_id"]
            isOneToOne: false
            referencedRelation: "products"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "reviews_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      risk_appetite_rules: {
        Row: {
          action_on_breach: string
          created_at: string
          id: string
          is_enabled: boolean
          metric_code: string
          metric_label: string
          operator: string
          risk_appetite_id: string
          risk_domain: string
          severity: string
          tenant_id: string
          threshold: number
          unit: string
          updated_at: string
        }
        Insert: {
          action_on_breach: string
          created_at?: string
          id?: string
          is_enabled?: boolean
          metric_code: string
          metric_label: string
          operator: string
          risk_appetite_id: string
          risk_domain: string
          severity: string
          tenant_id: string
          threshold: number
          unit: string
          updated_at?: string
        }
        Update: {
          action_on_breach?: string
          created_at?: string
          id?: string
          is_enabled?: boolean
          metric_code?: string
          metric_label?: string
          operator?: string
          risk_appetite_id?: string
          risk_domain?: string
          severity?: string
          tenant_id?: string
          threshold?: number
          unit?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "risk_appetite_rules_risk_appetite_id_fkey"
            columns: ["risk_appetite_id"]
            isOneToOne: false
            referencedRelation: "risk_appetites"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_appetite_rules_risk_appetite_id_fkey"
            columns: ["risk_appetite_id"]
            isOneToOne: false
            referencedRelation: "v_active_risk_appetite"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_appetite_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_appetite_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_appetite_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_appetite_rules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      risk_appetites: {
        Row: {
          approved_at: string | null
          approved_by: string | null
          created_at: string
          defined_by: string
          description: string | null
          effective_from: string
          effective_to: string | null
          id: string
          name: string
          status: string
          tenant_id: string
          updated_at: string
          version: number
        }
        Insert: {
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          defined_by: string
          description?: string | null
          effective_from: string
          effective_to?: string | null
          id?: string
          name?: string
          status: string
          tenant_id: string
          updated_at?: string
          version: number
        }
        Update: {
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string
          defined_by?: string
          description?: string | null
          effective_from?: string
          effective_to?: string | null
          id?: string
          name?: string
          status?: string
          tenant_id?: string
          updated_at?: string
          version?: number
        }
        Relationships: [
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      risk_breach_events: {
        Row: {
          action_result: Json | null
          action_taken: string
          breached_at: string
          created_at: string
          id: string
          is_resolved: boolean
          metric_code: string
          metric_value: number
          resolution_notes: string | null
          resolved_at: string | null
          resolved_by: string | null
          risk_appetite_id: string
          rule_id: string
          severity: string
          tenant_id: string
          threshold: number
        }
        Insert: {
          action_result?: Json | null
          action_taken: string
          breached_at?: string
          created_at?: string
          id?: string
          is_resolved?: boolean
          metric_code: string
          metric_value: number
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          risk_appetite_id: string
          rule_id: string
          severity: string
          tenant_id: string
          threshold: number
        }
        Update: {
          action_result?: Json | null
          action_taken?: string
          breached_at?: string
          created_at?: string
          id?: string
          is_resolved?: boolean
          metric_code?: string
          metric_value?: number
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          risk_appetite_id?: string
          rule_id?: string
          severity?: string
          tenant_id?: string
          threshold?: number
        }
        Relationships: [
          {
            foreignKeyName: "risk_breach_events_risk_appetite_id_fkey"
            columns: ["risk_appetite_id"]
            isOneToOne: false
            referencedRelation: "risk_appetites"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_breach_events_risk_appetite_id_fkey"
            columns: ["risk_appetite_id"]
            isOneToOne: false
            referencedRelation: "v_active_risk_appetite"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_breach_events_rule_id_fkey"
            columns: ["rule_id"]
            isOneToOne: false
            referencedRelation: "risk_appetite_rules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_breach_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_breach_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_breach_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_breach_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      risk_scores: {
        Row: {
          calculation_details: Json | null
          created_at: string | null
          credit_score: number | null
          id: string
          liquidity_score: number | null
          market_score: number | null
          operational_score: number | null
          overall_score: number | null
          score_date: string
          tenant_id: string
        }
        Insert: {
          calculation_details?: Json | null
          created_at?: string | null
          credit_score?: number | null
          id?: string
          liquidity_score?: number | null
          market_score?: number | null
          operational_score?: number | null
          overall_score?: number | null
          score_date?: string
          tenant_id: string
        }
        Update: {
          calculation_details?: Json | null
          created_at?: string | null
          credit_score?: number | null
          id?: string
          liquidity_score?: number | null
          market_score?: number | null
          operational_score?: number | null
          overall_score?: number | null
          score_date?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      risk_stress_results: {
        Row: {
          created_at: string
          id: string
          period_month: string
          scenario_id: string
          stress_parameters: Json | null
          stressed_cash_settled: number | null
          stressed_open_exceptions: number | null
          tenant_id: string
        }
        Insert: {
          created_at?: string
          id?: string
          period_month: string
          scenario_id: string
          stress_parameters?: Json | null
          stressed_cash_settled?: number | null
          stressed_open_exceptions?: number | null
          tenant_id: string
        }
        Update: {
          created_at?: string
          id?: string
          period_month?: string
          scenario_id?: string
          stress_parameters?: Json | null
          stressed_cash_settled?: number | null
          stressed_open_exceptions?: number | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "risk_stress_results_scenario_id_fkey"
            columns: ["scenario_id"]
            isOneToOne: false
            referencedRelation: "board_scenarios"
            referencedColumns: ["id"]
          },
        ]
      }
      risk_stress_tests: {
        Row: {
          base_risk_appetite_id: string | null
          baseline_metrics: Json | null
          created_at: string
          created_by: string
          description: string | null
          detailed_impacts: Json | null
          id: string
          impact_summary: Json
          simulated_at: string
          simulated_metrics: Json | null
          simulated_risk_appetite: Json
          tenant_id: string
          test_name: string
        }
        Insert: {
          base_risk_appetite_id?: string | null
          baseline_metrics?: Json | null
          created_at?: string
          created_by: string
          description?: string | null
          detailed_impacts?: Json | null
          id?: string
          impact_summary: Json
          simulated_at?: string
          simulated_metrics?: Json | null
          simulated_risk_appetite: Json
          tenant_id: string
          test_name: string
        }
        Update: {
          base_risk_appetite_id?: string | null
          baseline_metrics?: Json | null
          created_at?: string
          created_by?: string
          description?: string | null
          detailed_impacts?: Json | null
          id?: string
          impact_summary?: Json
          simulated_at?: string
          simulated_metrics?: Json | null
          simulated_risk_appetite?: Json
          tenant_id?: string
          test_name?: string
        }
        Relationships: [
          {
            foreignKeyName: "risk_stress_tests_base_risk_appetite_id_fkey"
            columns: ["base_risk_appetite_id"]
            isOneToOne: false
            referencedRelation: "risk_appetites"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_stress_tests_base_risk_appetite_id_fkey"
            columns: ["base_risk_appetite_id"]
            isOneToOne: false
            referencedRelation: "v_active_risk_appetite"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_stress_tests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_stress_tests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_stress_tests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_stress_tests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      rolling_forecasts: {
        Row: {
          actual_amount: number | null
          category: string | null
          channel: string | null
          confidence_level: string | null
          created_at: string
          current_forecast: number
          forecast_month: string
          forecast_type: string
          id: string
          last_revised_at: string | null
          last_revised_by: string | null
          notes: string | null
          original_budget: number
          tenant_id: string
          updated_at: string
          variance_amount: number | null
          variance_percent: number | null
        }
        Insert: {
          actual_amount?: number | null
          category?: string | null
          channel?: string | null
          confidence_level?: string | null
          created_at?: string
          current_forecast?: number
          forecast_month: string
          forecast_type?: string
          id?: string
          last_revised_at?: string | null
          last_revised_by?: string | null
          notes?: string | null
          original_budget?: number
          tenant_id: string
          updated_at?: string
          variance_amount?: number | null
          variance_percent?: number | null
        }
        Update: {
          actual_amount?: number | null
          category?: string | null
          channel?: string | null
          confidence_level?: string | null
          created_at?: string
          current_forecast?: number
          forecast_month?: string
          forecast_type?: string
          id?: string
          last_revised_at?: string | null
          last_revised_by?: string | null
          notes?: string | null
          original_budget?: number
          tenant_id?: string
          updated_at?: string
          variance_amount?: number | null
          variance_percent?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      scenario_monthly_actuals: {
        Row: {
          actual_value: number | null
          created_at: string
          created_by: string | null
          id: string
          metric_type: string
          month: number
          notes: string | null
          tenant_id: string
          updated_at: string
          year: number
        }
        Insert: {
          actual_value?: number | null
          created_at?: string
          created_by?: string | null
          id?: string
          metric_type: string
          month: number
          notes?: string | null
          tenant_id: string
          updated_at?: string
          year: number
        }
        Update: {
          actual_value?: number | null
          created_at?: string
          created_by?: string | null
          id?: string
          metric_type?: string
          month?: number
          notes?: string | null
          tenant_id?: string
          updated_at?: string
          year?: number
        }
        Relationships: [
          {
            foreignKeyName: "scenario_monthly_actuals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "scenario_monthly_actuals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scenario_monthly_actuals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scenario_monthly_actuals_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      scenario_monthly_plans: {
        Row: {
          created_at: string
          created_by: string | null
          id: string
          metric_type: string
          month_1: number | null
          month_10: number | null
          month_11: number | null
          month_12: number | null
          month_2: number | null
          month_3: number | null
          month_4: number | null
          month_5: number | null
          month_6: number | null
          month_7: number | null
          month_8: number | null
          month_9: number | null
          scenario_id: string
          tenant_id: string
          total_target: number | null
          updated_at: string
          year: number
        }
        Insert: {
          created_at?: string
          created_by?: string | null
          id?: string
          metric_type: string
          month_1?: number | null
          month_10?: number | null
          month_11?: number | null
          month_12?: number | null
          month_2?: number | null
          month_3?: number | null
          month_4?: number | null
          month_5?: number | null
          month_6?: number | null
          month_7?: number | null
          month_8?: number | null
          month_9?: number | null
          scenario_id: string
          tenant_id: string
          total_target?: number | null
          updated_at?: string
          year: number
        }
        Update: {
          created_at?: string
          created_by?: string | null
          id?: string
          metric_type?: string
          month_1?: number | null
          month_10?: number | null
          month_11?: number | null
          month_12?: number | null
          month_2?: number | null
          month_3?: number | null
          month_4?: number | null
          month_5?: number | null
          month_6?: number | null
          month_7?: number | null
          month_8?: number | null
          month_9?: number | null
          scenario_id?: string
          tenant_id?: string
          total_target?: number | null
          updated_at?: string
          year?: number
        }
        Relationships: [
          {
            foreignKeyName: "scenario_monthly_plans_scenario_id_fkey"
            columns: ["scenario_id"]
            isOneToOne: false
            referencedRelation: "scenarios"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "scenario_monthly_plans_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "scenario_monthly_plans_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scenario_monthly_plans_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scenario_monthly_plans_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      scenarios: {
        Row: {
          base_costs: number | null
          base_revenue: number | null
          calculated_ebitda: number | null
          cost_change: number | null
          created_at: string
          created_by: string | null
          description: string | null
          id: string
          is_primary: boolean | null
          name: string
          revenue_change: number | null
          tenant_id: string | null
          updated_at: string
        }
        Insert: {
          base_costs?: number | null
          base_revenue?: number | null
          calculated_ebitda?: number | null
          cost_change?: number | null
          created_at?: string
          created_by?: string | null
          description?: string | null
          id?: string
          is_primary?: boolean | null
          name: string
          revenue_change?: number | null
          tenant_id?: string | null
          updated_at?: string
        }
        Update: {
          base_costs?: number | null
          base_revenue?: number | null
          calculated_ebitda?: number | null
          cost_change?: number | null
          created_at?: string
          created_by?: string | null
          description?: string | null
          id?: string
          is_primary?: boolean | null
          name?: string
          revenue_change?: number | null
          tenant_id?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      scheduled_notifications: {
        Row: {
          created_at: string
          id: string
          is_active: boolean
          last_run_at: string | null
          message: string | null
          metadata: Json | null
          next_run_at: string | null
          schedule_day_of_month: number | null
          schedule_day_of_week: number | null
          schedule_time: string
          schedule_type: string
          target_users: string[] | null
          tenant_id: string
          title: string
          type: string
          updated_at: string
        }
        Insert: {
          created_at?: string
          id?: string
          is_active?: boolean
          last_run_at?: string | null
          message?: string | null
          metadata?: Json | null
          next_run_at?: string | null
          schedule_day_of_month?: number | null
          schedule_day_of_week?: number | null
          schedule_time: string
          schedule_type: string
          target_users?: string[] | null
          tenant_id: string
          title: string
          type?: string
          updated_at?: string
        }
        Update: {
          created_at?: string
          id?: string
          is_active?: boolean
          last_run_at?: string | null
          message?: string | null
          metadata?: Json | null
          next_run_at?: string | null
          schedule_day_of_month?: number | null
          schedule_day_of_week?: number | null
          schedule_time?: string
          schedule_type?: string
          target_users?: string[] | null
          tenant_id?: string
          title?: string
          type?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "scheduled_notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "scheduled_notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scheduled_notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "scheduled_notifications_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      settlement_allocations: {
        Row: {
          allocated_amount: number
          allocation_type: string | null
          created_at: string
          id: string
          notes: string | null
          reconciliation_link_id: string
          tenant_id: string
        }
        Insert: {
          allocated_amount: number
          allocation_type?: string | null
          created_at?: string
          id?: string
          notes?: string | null
          reconciliation_link_id: string
          tenant_id: string
        }
        Update: {
          allocated_amount?: number
          allocation_type?: string | null
          created_at?: string
          id?: string
          notes?: string | null
          reconciliation_link_id?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "settlement_allocations_reconciliation_link_id_fkey"
            columns: ["reconciliation_link_id"]
            isOneToOne: false
            referencedRelation: "reconciliation_links"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "settlement_allocations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "settlement_allocations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "settlement_allocations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "settlement_allocations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      shipments: {
        Row: {
          actual_delivery_date: string | null
          attempt_count: number | null
          carrier_code: string | null
          carrier_name: string | null
          cod_amount: number | null
          cod_collected: boolean | null
          created_at: string | null
          delivered_at: string | null
          delivery_days: number | null
          expected_delivery_date: string | null
          failed_at: string | null
          failure_reason: string | null
          id: string
          in_transit_at: string | null
          is_on_time: boolean | null
          order_id: string | null
          picked_up_at: string | null
          shipping_fee: number | null
          status: string | null
          tenant_id: string
          tracking_number: string | null
          updated_at: string | null
        }
        Insert: {
          actual_delivery_date?: string | null
          attempt_count?: number | null
          carrier_code?: string | null
          carrier_name?: string | null
          cod_amount?: number | null
          cod_collected?: boolean | null
          created_at?: string | null
          delivered_at?: string | null
          delivery_days?: number | null
          expected_delivery_date?: string | null
          failed_at?: string | null
          failure_reason?: string | null
          id?: string
          in_transit_at?: string | null
          is_on_time?: boolean | null
          order_id?: string | null
          picked_up_at?: string | null
          shipping_fee?: number | null
          status?: string | null
          tenant_id: string
          tracking_number?: string | null
          updated_at?: string | null
        }
        Update: {
          actual_delivery_date?: string | null
          attempt_count?: number | null
          carrier_code?: string | null
          carrier_name?: string | null
          cod_amount?: number | null
          cod_collected?: boolean | null
          created_at?: string | null
          delivered_at?: string | null
          delivery_days?: number | null
          expected_delivery_date?: string | null
          failed_at?: string | null
          failure_reason?: string | null
          id?: string
          in_transit_at?: string | null
          is_on_time?: boolean | null
          order_id?: string | null
          picked_up_at?: string | null
          shipping_fee?: number | null
          status?: string | null
          tenant_id?: string
          tracking_number?: string | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "shipments_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "shipments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "shipments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "shipments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "shipments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      sku_profitability_cache: {
        Row: {
          aov: number | null
          calculated_at: string
          channel: string
          cogs: number | null
          created_at: string
          fees: number | null
          id: string
          margin_percent: number | null
          period_end: string
          period_start: string
          product_name: string | null
          profit: number | null
          quantity: number | null
          revenue: number | null
          sku: string
          status: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          aov?: number | null
          calculated_at?: string
          channel: string
          cogs?: number | null
          created_at?: string
          fees?: number | null
          id?: string
          margin_percent?: number | null
          period_end: string
          period_start: string
          product_name?: string | null
          profit?: number | null
          quantity?: number | null
          revenue?: number | null
          sku: string
          status?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          aov?: number | null
          calculated_at?: string
          channel?: string
          cogs?: number | null
          created_at?: string
          fees?: number | null
          id?: string
          margin_percent?: number | null
          period_end?: string
          period_start?: string
          product_name?: string | null
          profit?: number | null
          quantity?: number | null
          revenue?: number | null
          sku?: string
          status?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "sku_profitability_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "sku_profitability_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sku_profitability_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sku_profitability_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      soc_control_attestations: {
        Row: {
          control_description: string
          control_id: string
          control_name: string
          created_at: string
          evidence_reference: string | null
          evidence_type: string
          id: string
          implementation_status: string
          last_tested_at: string | null
          notes: string | null
          tenant_id: string
          test_result: string | null
          tested_by: string | null
          updated_at: string
        }
        Insert: {
          control_description: string
          control_id: string
          control_name: string
          created_at?: string
          evidence_reference?: string | null
          evidence_type: string
          id?: string
          implementation_status: string
          last_tested_at?: string | null
          notes?: string | null
          tenant_id: string
          test_result?: string | null
          tested_by?: string | null
          updated_at?: string
        }
        Update: {
          control_description?: string
          control_id?: string
          control_name?: string
          created_at?: string
          evidence_reference?: string | null
          evidence_type?: string
          id?: string
          implementation_status?: string
          last_tested_at?: string | null
          notes?: string | null
          tenant_id?: string
          test_result?: string | null
          tested_by?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "soc_control_attestations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "soc_control_attestations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "soc_control_attestations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "soc_control_attestations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      soc_controls: {
        Row: {
          category: string
          control_code: string
          control_name: string
          created_at: string
          description: string
          id: string
          is_active: boolean
          last_validated_at: string | null
          mapped_column: string | null
          mapped_table: string
          tenant_id: string | null
          updated_at: string
          validation_query: string | null
          validation_status: string | null
        }
        Insert: {
          category?: string
          control_code: string
          control_name: string
          created_at?: string
          description: string
          id?: string
          is_active?: boolean
          last_validated_at?: string | null
          mapped_column?: string | null
          mapped_table: string
          tenant_id?: string | null
          updated_at?: string
          validation_query?: string | null
          validation_status?: string | null
        }
        Update: {
          category?: string
          control_code?: string
          control_name?: string
          created_at?: string
          description?: string
          id?: string
          is_active?: boolean
          last_validated_at?: string | null
          mapped_column?: string | null
          mapped_table?: string
          tenant_id?: string | null
          updated_at?: string
          validation_query?: string | null
          validation_status?: string | null
        }
        Relationships: []
      }
      soc_validation_logs: {
        Row: {
          control_id: string | null
          created_at: string
          evidence_hash: string | null
          id: string
          notes: string | null
          tenant_id: string
          validated_by: string
          validation_result: string
        }
        Insert: {
          control_id?: string | null
          created_at?: string
          evidence_hash?: string | null
          id?: string
          notes?: string | null
          tenant_id: string
          validated_by?: string
          validation_result: string
        }
        Update: {
          control_id?: string | null
          created_at?: string
          evidence_hash?: string | null
          id?: string
          notes?: string | null
          tenant_id?: string
          validated_by?: string
          validation_result?: string
        }
        Relationships: [
          {
            foreignKeyName: "soc_validation_logs_control_id_fkey"
            columns: ["control_id"]
            isOneToOne: false
            referencedRelation: "soc_controls"
            referencedColumns: ["id"]
          },
        ]
      }
      social_mentions: {
        Row: {
          author_handle: string | null
          author_name: string | null
          content: string | null
          created_at: string | null
          detected_at: string | null
          engagement_count: number | null
          id: string
          is_responded: boolean | null
          mention_type: string | null
          platform: string
          post_url: string | null
          priority: string | null
          reach_count: number | null
          responded_at: string | null
          response_content: string | null
          sentiment: string | null
          sentiment_score: number | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          author_handle?: string | null
          author_name?: string | null
          content?: string | null
          created_at?: string | null
          detected_at?: string | null
          engagement_count?: number | null
          id?: string
          is_responded?: boolean | null
          mention_type?: string | null
          platform: string
          post_url?: string | null
          priority?: string | null
          reach_count?: number | null
          responded_at?: string | null
          response_content?: string | null
          sentiment?: string | null
          sentiment_score?: number | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          author_handle?: string | null
          author_name?: string | null
          content?: string | null
          created_at?: string | null
          detected_at?: string | null
          engagement_count?: number | null
          id?: string
          is_responded?: boolean | null
          mention_type?: string | null
          platform?: string
          post_url?: string | null
          priority?: string | null
          reach_count?: number | null
          responded_at?: string | null
          response_content?: string | null
          sentiment?: string | null
          sentiment_score?: number | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "social_mentions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "social_mentions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "social_mentions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "social_mentions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      ssot_violation_log: {
        Row: {
          actual_value: number | null
          detected_at: string | null
          deviation_percent: number | null
          expected_value: number | null
          id: string
          metric_code: string | null
          resolution_notes: string | null
          resolved_at: string | null
          severity: string | null
          source_file: string | null
          tenant_id: string | null
          violation_type: string
        }
        Insert: {
          actual_value?: number | null
          detected_at?: string | null
          deviation_percent?: number | null
          expected_value?: number | null
          id?: string
          metric_code?: string | null
          resolution_notes?: string | null
          resolved_at?: string | null
          severity?: string | null
          source_file?: string | null
          tenant_id?: string | null
          violation_type: string
        }
        Update: {
          actual_value?: number | null
          detected_at?: string | null
          deviation_percent?: number | null
          expected_value?: number | null
          id?: string
          metric_code?: string | null
          resolution_notes?: string | null
          resolved_at?: string | null
          severity?: string | null
          source_file?: string | null
          tenant_id?: string | null
          violation_type?: string
        }
        Relationships: [
          {
            foreignKeyName: "ssot_violation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ssot_violation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ssot_violation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ssot_violation_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      store_daily_metrics: {
        Row: {
          avg_transaction_value: number | null
          card_revenue: number | null
          cash_revenue: number | null
          close_time: string | null
          created_at: string | null
          customer_count: number | null
          daily_target: number | null
          ewallet_revenue: number | null
          id: string
          metrics_date: string
          open_time: string | null
          staff_count: number | null
          store_id: string | null
          target_achieved_percent: number | null
          tenant_id: string
          total_revenue: number | null
          total_transactions: number | null
        }
        Insert: {
          avg_transaction_value?: number | null
          card_revenue?: number | null
          cash_revenue?: number | null
          close_time?: string | null
          created_at?: string | null
          customer_count?: number | null
          daily_target?: number | null
          ewallet_revenue?: number | null
          id?: string
          metrics_date: string
          open_time?: string | null
          staff_count?: number | null
          store_id?: string | null
          target_achieved_percent?: number | null
          tenant_id: string
          total_revenue?: number | null
          total_transactions?: number | null
        }
        Update: {
          avg_transaction_value?: number | null
          card_revenue?: number | null
          cash_revenue?: number | null
          close_time?: string | null
          created_at?: string | null
          customer_count?: number | null
          daily_target?: number | null
          ewallet_revenue?: number | null
          id?: string
          metrics_date?: string
          open_time?: string | null
          staff_count?: number | null
          store_id?: string | null
          target_achieved_percent?: number | null
          tenant_id?: string
          total_revenue?: number | null
          total_transactions?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "store_daily_metrics_store_id_fkey"
            columns: ["store_id"]
            isOneToOne: false
            referencedRelation: "stores"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "store_daily_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "store_daily_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "store_daily_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "store_daily_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      stores: {
        Row: {
          address: string | null
          area_sqm: number | null
          created_at: string | null
          current_daily_sales: number | null
          daily_sales_target: number | null
          id: string
          is_active: boolean | null
          last_transaction_at: string | null
          manager_name: string | null
          phone: string | null
          rent_per_sqm: number | null
          store_code: string | null
          store_name: string
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          address?: string | null
          area_sqm?: number | null
          created_at?: string | null
          current_daily_sales?: number | null
          daily_sales_target?: number | null
          id?: string
          is_active?: boolean | null
          last_transaction_at?: string | null
          manager_name?: string | null
          phone?: string | null
          rent_per_sqm?: number | null
          store_code?: string | null
          store_name: string
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          address?: string | null
          area_sqm?: number | null
          created_at?: string | null
          current_daily_sales?: number | null
          daily_sales_target?: number | null
          id?: string
          is_active?: boolean | null
          last_transaction_at?: string | null
          manager_name?: string | null
          phone?: string | null
          rent_per_sqm?: number | null
          store_code?: string | null
          store_name?: string
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "stores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "stores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "stores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "stores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      strategic_initiatives: {
        Row: {
          budget: number | null
          category: string
          created_at: string
          created_by: string | null
          description: string | null
          end_date: string | null
          id: string
          kpis: string[] | null
          milestones: Json | null
          notes: string | null
          owner: string | null
          priority: string
          progress: number | null
          spent: number | null
          start_date: string | null
          status: string
          tenant_id: string
          title: string
          updated_at: string
        }
        Insert: {
          budget?: number | null
          category: string
          created_at?: string
          created_by?: string | null
          description?: string | null
          end_date?: string | null
          id?: string
          kpis?: string[] | null
          milestones?: Json | null
          notes?: string | null
          owner?: string | null
          priority?: string
          progress?: number | null
          spent?: number | null
          start_date?: string | null
          status?: string
          tenant_id: string
          title: string
          updated_at?: string
        }
        Update: {
          budget?: number | null
          category?: string
          created_at?: string
          created_by?: string | null
          description?: string | null
          end_date?: string | null
          id?: string
          kpis?: string[] | null
          milestones?: Json | null
          notes?: string | null
          owner?: string | null
          priority?: string
          progress?: number | null
          spent?: number | null
          start_date?: string | null
          status?: string
          tenant_id?: string
          title?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "strategic_initiatives_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "strategic_initiatives_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "strategic_initiatives_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "strategic_initiatives_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      supplier_payment_schedules: {
        Row: {
          bill_id: string | null
          cash_available_on_early_date: number | null
          created_at: string
          due_date: string
          early_payment_date: string | null
          early_payment_discount_amount: number | null
          early_payment_discount_percent: number | null
          id: string
          net_amount_if_early: number | null
          net_benefit: number | null
          notes: string | null
          opportunity_cost: number | null
          original_amount: number
          paid_amount: number | null
          paid_date: string | null
          payment_status: string | null
          recommended_action: string | null
          tenant_id: string
          updated_at: string
          vendor_id: string
        }
        Insert: {
          bill_id?: string | null
          cash_available_on_early_date?: number | null
          created_at?: string
          due_date: string
          early_payment_date?: string | null
          early_payment_discount_amount?: number | null
          early_payment_discount_percent?: number | null
          id?: string
          net_amount_if_early?: number | null
          net_benefit?: number | null
          notes?: string | null
          opportunity_cost?: number | null
          original_amount: number
          paid_amount?: number | null
          paid_date?: string | null
          payment_status?: string | null
          recommended_action?: string | null
          tenant_id: string
          updated_at?: string
          vendor_id: string
        }
        Update: {
          bill_id?: string | null
          cash_available_on_early_date?: number | null
          created_at?: string
          due_date?: string
          early_payment_date?: string | null
          early_payment_discount_amount?: number | null
          early_payment_discount_percent?: number | null
          id?: string
          net_amount_if_early?: number | null
          net_benefit?: number | null
          notes?: string | null
          opportunity_cost?: number | null
          original_amount?: number
          paid_amount?: number | null
          paid_date?: string | null
          payment_status?: string | null
          recommended_action?: string | null
          tenant_id?: string
          updated_at?: string
          vendor_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "supplier_payment_schedules_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "supplier_payment_schedules_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "supplier_payment_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "supplier_payment_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "supplier_payment_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "supplier_payment_schedules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "supplier_payment_schedules_vendor_id_fkey"
            columns: ["vendor_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
        ]
      }
      support_tickets: {
        Row: {
          assigned_to: string | null
          category: string | null
          channel: string | null
          closed_at: string | null
          created_at: string | null
          customer_id: string | null
          description: string | null
          first_response_at: string | null
          id: string
          order_id: string | null
          priority: string | null
          resolution_time_minutes: number | null
          resolved_at: string | null
          response_time_minutes: number | null
          status: string | null
          subject: string | null
          tenant_id: string
          ticket_number: string | null
          updated_at: string | null
        }
        Insert: {
          assigned_to?: string | null
          category?: string | null
          channel?: string | null
          closed_at?: string | null
          created_at?: string | null
          customer_id?: string | null
          description?: string | null
          first_response_at?: string | null
          id?: string
          order_id?: string | null
          priority?: string | null
          resolution_time_minutes?: number | null
          resolved_at?: string | null
          response_time_minutes?: number | null
          status?: string | null
          subject?: string | null
          tenant_id: string
          ticket_number?: string | null
          updated_at?: string | null
        }
        Update: {
          assigned_to?: string | null
          category?: string | null
          channel?: string | null
          closed_at?: string | null
          created_at?: string | null
          customer_id?: string | null
          description?: string | null
          first_response_at?: string | null
          id?: string
          order_id?: string | null
          priority?: string | null
          resolution_time_minutes?: number | null
          resolved_at?: string | null
          response_time_minutes?: number | null
          status?: string | null
          subject?: string | null
          tenant_id?: string
          ticket_number?: string | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "support_tickets_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "support_tickets_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "support_tickets_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "support_tickets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "support_tickets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "support_tickets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "support_tickets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      sync_checkpoints: {
        Row: {
          checkpoint_type: string
          checkpoint_value: string
          connector_id: string
          created_at: string | null
          id: string
          records_synced: number | null
          tenant_id: string
        }
        Insert: {
          checkpoint_type: string
          checkpoint_value: string
          connector_id: string
          created_at?: string | null
          id?: string
          records_synced?: number | null
          tenant_id: string
        }
        Update: {
          checkpoint_type?: string
          checkpoint_value?: string
          connector_id?: string
          created_at?: string | null
          id?: string
          records_synced?: number | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "sync_checkpoints_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "sync_checkpoints_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_checkpoints_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_checkpoints_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      sync_errors: {
        Row: {
          created_at: string | null
          error_details: Json | null
          error_message: string
          error_type: string
          id: string
          is_resolved: boolean | null
          job_id: string | null
          record_id: string | null
          resolved_at: string | null
          source: string | null
          table_name: string | null
          tenant_id: string
        }
        Insert: {
          created_at?: string | null
          error_details?: Json | null
          error_message: string
          error_type: string
          id?: string
          is_resolved?: boolean | null
          job_id?: string | null
          record_id?: string | null
          resolved_at?: string | null
          source?: string | null
          table_name?: string | null
          tenant_id: string
        }
        Update: {
          created_at?: string | null
          error_details?: Json | null
          error_message?: string
          error_type?: string
          id?: string
          is_resolved?: boolean | null
          job_id?: string | null
          record_id?: string | null
          resolved_at?: string | null
          source?: string | null
          table_name?: string | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "sync_errors_job_id_fkey"
            columns: ["job_id"]
            isOneToOne: false
            referencedRelation: "sync_jobs"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "sync_errors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "sync_errors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_errors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_errors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      sync_jobs: {
        Row: {
          completed_at: string | null
          created_at: string | null
          error_message: string | null
          id: string
          job_type: string
          metadata: Json | null
          records_synced: number | null
          source: string
          started_at: string | null
          status: string | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          completed_at?: string | null
          created_at?: string | null
          error_message?: string | null
          id?: string
          job_type: string
          metadata?: Json | null
          records_synced?: number | null
          source: string
          started_at?: string | null
          status?: string | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          completed_at?: string | null
          created_at?: string | null
          error_message?: string | null
          id?: string
          job_type?: string
          metadata?: Json | null
          records_synced?: number | null
          source?: string
          started_at?: string | null
          status?: string | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "sync_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "sync_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_jobs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      sync_logs: {
        Row: {
          completed_at: string | null
          created_at: string | null
          duration_seconds: number | null
          error_details: Json | null
          error_message: string | null
          id: string
          integration_id: string
          records_created: number | null
          records_failed: number | null
          records_fetched: number | null
          records_updated: number | null
          request_params: Json | null
          started_at: string | null
          status: Database["public"]["Enums"]["sync_status"] | null
          sync_mode: string | null
          sync_type: string
          tenant_id: string
          triggered_by: string | null
        }
        Insert: {
          completed_at?: string | null
          created_at?: string | null
          duration_seconds?: number | null
          error_details?: Json | null
          error_message?: string | null
          id?: string
          integration_id: string
          records_created?: number | null
          records_failed?: number | null
          records_fetched?: number | null
          records_updated?: number | null
          request_params?: Json | null
          started_at?: string | null
          status?: Database["public"]["Enums"]["sync_status"] | null
          sync_mode?: string | null
          sync_type: string
          tenant_id: string
          triggered_by?: string | null
        }
        Update: {
          completed_at?: string | null
          created_at?: string | null
          duration_seconds?: number | null
          error_details?: Json | null
          error_message?: string | null
          id?: string
          integration_id?: string
          records_created?: number | null
          records_failed?: number | null
          records_fetched?: number | null
          records_updated?: number | null
          request_params?: Json | null
          started_at?: string | null
          status?: Database["public"]["Enums"]["sync_status"] | null
          sync_mode?: string | null
          sync_type?: string
          tenant_id?: string
          triggered_by?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "sync_logs_integration_id_fkey"
            columns: ["integration_id"]
            isOneToOne: false
            referencedRelation: "connector_integrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "sync_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "sync_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "sync_logs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tasks: {
        Row: {
          assignee_id: string | null
          assignee_name: string | null
          completed_at: string | null
          created_at: string
          created_by: string | null
          department: string | null
          description: string | null
          due_date: string | null
          id: string
          metadata: Json | null
          priority: string
          progress: number | null
          resolution_notes: string | null
          source_alert_type: string | null
          source_id: string | null
          source_type: string | null
          status: string
          tenant_id: string
          title: string
          updated_at: string
        }
        Insert: {
          assignee_id?: string | null
          assignee_name?: string | null
          completed_at?: string | null
          created_at?: string
          created_by?: string | null
          department?: string | null
          description?: string | null
          due_date?: string | null
          id?: string
          metadata?: Json | null
          priority?: string
          progress?: number | null
          resolution_notes?: string | null
          source_alert_type?: string | null
          source_id?: string | null
          source_type?: string | null
          status?: string
          tenant_id: string
          title: string
          updated_at?: string
        }
        Update: {
          assignee_id?: string | null
          assignee_name?: string | null
          completed_at?: string | null
          created_at?: string
          created_by?: string | null
          department?: string | null
          description?: string | null
          due_date?: string | null
          id?: string
          metadata?: Json | null
          priority?: string
          progress?: number | null
          resolution_notes?: string | null
          source_alert_type?: string | null
          source_id?: string | null
          source_type?: string | null
          status?: string
          tenant_id?: string
          title?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "tasks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tasks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tasks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tasks_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tax_codes: {
        Row: {
          code: string
          created_at: string
          gl_account_id: string | null
          id: string
          is_active: boolean
          name: string
          rate: number
          tax_type: string
          tenant_id: string
        }
        Insert: {
          code: string
          created_at?: string
          gl_account_id?: string | null
          id?: string
          is_active?: boolean
          name: string
          rate?: number
          tax_type?: string
          tenant_id: string
        }
        Update: {
          code?: string
          created_at?: string
          gl_account_id?: string | null
          id?: string
          is_active?: boolean
          name?: string
          rate?: number
          tax_type?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "tax_codes_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tax_codes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tax_codes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tax_codes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tax_codes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tax_filings: {
        Row: {
          created_at: string
          created_by: string | null
          document_url: string | null
          filing_number: string | null
          id: string
          name: string
          notes: string | null
          status: string
          submitted_date: string | null
          tax_obligation_id: string | null
          tenant_id: string
          updated_at: string
        }
        Insert: {
          created_at?: string
          created_by?: string | null
          document_url?: string | null
          filing_number?: string | null
          id?: string
          name: string
          notes?: string | null
          status?: string
          submitted_date?: string | null
          tax_obligation_id?: string | null
          tenant_id: string
          updated_at?: string
        }
        Update: {
          created_at?: string
          created_by?: string | null
          document_url?: string | null
          filing_number?: string | null
          id?: string
          name?: string
          notes?: string | null
          status?: string
          submitted_date?: string | null
          tax_obligation_id?: string | null
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "tax_filings_tax_obligation_id_fkey"
            columns: ["tax_obligation_id"]
            isOneToOne: false
            referencedRelation: "tax_obligations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tax_filings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tax_filings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tax_filings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tax_filings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tax_obligations: {
        Row: {
          amount: number
          created_at: string
          due_date: string
          id: string
          name: string
          notes: string | null
          paid_amount: number
          period: string
          progress: number
          status: string
          tax_type: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          amount?: number
          created_at?: string
          due_date: string
          id?: string
          name: string
          notes?: string | null
          paid_amount?: number
          period: string
          progress?: number
          status?: string
          tax_type: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          amount?: number
          created_at?: string
          due_date?: string
          id?: string
          name?: string
          notes?: string | null
          paid_amount?: number
          period?: string
          progress?: number
          status?: string
          tax_type?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "tax_obligations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tax_obligations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tax_obligations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tax_obligations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      team_members: {
        Row: {
          avatar_url: string | null
          created_at: string
          department: string
          email: string
          id: string
          join_date: string
          location: string | null
          name: string
          performance: number | null
          phone: string | null
          role: string
          status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          avatar_url?: string | null
          created_at?: string
          department: string
          email: string
          id?: string
          join_date?: string
          location?: string | null
          name: string
          performance?: number | null
          phone?: string | null
          role: string
          status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          avatar_url?: string | null
          created_at?: string
          department?: string
          email?: string
          id?: string
          join_date?: string
          location?: string | null
          name?: string
          performance?: number | null
          phone?: string | null
          role?: string
          status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "team_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "team_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "team_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "team_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_events: {
        Row: {
          created_at: string
          duration_ms: number | null
          event_name: string
          event_type: string
          id: string
          metadata: Json | null
          module: string | null
          route: string | null
          session_id: string | null
          tenant_id: string
          user_id: string | null
        }
        Insert: {
          created_at?: string
          duration_ms?: number | null
          event_name: string
          event_type: string
          id?: string
          metadata?: Json | null
          module?: string | null
          route?: string | null
          session_id?: string | null
          tenant_id: string
          user_id?: string | null
        }
        Update: {
          created_at?: string
          duration_ms?: number | null
          event_name?: string
          event_type?: string
          id?: string
          metadata?: Json | null
          module?: string | null
          route?: string | null
          session_id?: string | null
          tenant_id?: string
          user_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "tenant_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_events_user_id_fkey"
            columns: ["user_id"]
            isOneToOne: false
            referencedRelation: "profiles"
            referencedColumns: ["id"]
          },
        ]
      }
      tenant_health: {
        Row: {
          avg_session_duration_min: number | null
          churn_risk_score: number | null
          created_at: string
          daily_active_users: number | null
          data_freshness_days: number | null
          date: string
          engagement_trend: string | null
          health_score: number | null
          id: string
          last_activity_at: string | null
          modules_used: string[] | null
          monthly_active_users: number | null
          onboarding_percent: number | null
          onboarding_step: string | null
          tenant_id: string
          total_decisions: number | null
          total_exports: number | null
          total_page_views: number | null
          updated_at: string
          weekly_active_users: number | null
        }
        Insert: {
          avg_session_duration_min?: number | null
          churn_risk_score?: number | null
          created_at?: string
          daily_active_users?: number | null
          data_freshness_days?: number | null
          date: string
          engagement_trend?: string | null
          health_score?: number | null
          id?: string
          last_activity_at?: string | null
          modules_used?: string[] | null
          monthly_active_users?: number | null
          onboarding_percent?: number | null
          onboarding_step?: string | null
          tenant_id: string
          total_decisions?: number | null
          total_exports?: number | null
          total_page_views?: number | null
          updated_at?: string
          weekly_active_users?: number | null
        }
        Update: {
          avg_session_duration_min?: number | null
          churn_risk_score?: number | null
          created_at?: string
          daily_active_users?: number | null
          data_freshness_days?: number | null
          date?: string
          engagement_trend?: string | null
          health_score?: number | null
          id?: string
          last_activity_at?: string | null
          modules_used?: string[] | null
          monthly_active_users?: number | null
          onboarding_percent?: number | null
          onboarding_step?: string | null
          tenant_id?: string
          total_decisions?: number | null
          total_exports?: number | null
          total_page_views?: number | null
          updated_at?: string
          weekly_active_users?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "tenant_health_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_health_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_health_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_health_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_ltv_config: {
        Row: {
          created_at: string | null
          custom_assumptions: Json | null
          id: string
          industry_code: string | null
          is_custom: boolean | null
          tenant_id: string
          updated_at: string | null
        }
        Insert: {
          created_at?: string | null
          custom_assumptions?: Json | null
          id?: string
          industry_code?: string | null
          is_custom?: boolean | null
          tenant_id: string
          updated_at?: string | null
        }
        Update: {
          created_at?: string | null
          custom_assumptions?: Json | null
          id?: string
          industry_code?: string | null
          is_custom?: boolean | null
          tenant_id?: string
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "tenant_ltv_config_industry_code_fkey"
            columns: ["industry_code"]
            isOneToOne: false
            referencedRelation: "ltv_industry_assumptions"
            referencedColumns: ["industry_code"]
          },
          {
            foreignKeyName: "tenant_ltv_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_ltv_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_ltv_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_ltv_config_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_members: {
        Row: {
          created_at: string | null
          id: string
          is_active: boolean | null
          role: string | null
          tenant_id: string
          user_id: string
        }
        Insert: {
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          role?: string | null
          tenant_id: string
          user_id: string
        }
        Update: {
          created_at?: string | null
          id?: string
          is_active?: boolean | null
          role?: string | null
          tenant_id?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "tenant_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_members_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_migration_log: {
        Row: {
          applied_at: string | null
          created_at: string | null
          error_message: string | null
          id: string
          migration_id: string
          status: string
          tenant_id: string
        }
        Insert: {
          applied_at?: string | null
          created_at?: string | null
          error_message?: string | null
          id?: string
          migration_id: string
          status?: string
          tenant_id: string
        }
        Update: {
          applied_at?: string | null
          created_at?: string | null
          error_message?: string | null
          id?: string
          migration_id?: string
          status?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "tenant_migration_log_migration_id_fkey"
            columns: ["migration_id"]
            isOneToOne: false
            referencedRelation: "tenant_schema_migrations"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_migration_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_migration_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_migration_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_migration_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_ml_settings: {
        Row: {
          created_at: string
          enabled_at: string | null
          enabled_by: string | null
          last_fallback_at: string | null
          last_fallback_reason: string | null
          min_confidence_threshold: number
          ml_enabled: boolean
          ml_model_version: string
          ml_status: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          created_at?: string
          enabled_at?: string | null
          enabled_by?: string | null
          last_fallback_at?: string | null
          last_fallback_reason?: string | null
          min_confidence_threshold?: number
          ml_enabled?: boolean
          ml_model_version?: string
          ml_status?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          created_at?: string
          enabled_at?: string | null
          enabled_by?: string | null
          last_fallback_at?: string | null
          last_fallback_reason?: string | null
          min_confidence_threshold?: number
          ml_enabled?: boolean
          ml_model_version?: string
          ml_status?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "tenant_ml_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_ml_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_ml_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_ml_settings_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_modules: {
        Row: {
          created_at: string
          enabled_at: string | null
          enabled_by: string | null
          expires_at: string | null
          id: string
          is_enabled: boolean | null
          module_id: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          created_at?: string
          enabled_at?: string | null
          enabled_by?: string | null
          expires_at?: string | null
          id?: string
          is_enabled?: boolean | null
          module_id: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          created_at?: string
          enabled_at?: string | null
          enabled_by?: string | null
          expires_at?: string | null
          id?: string
          is_enabled?: boolean | null
          module_id?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "tenant_modules_module_id_fkey"
            columns: ["module_id"]
            isOneToOne: false
            referencedRelation: "platform_modules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_modules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_modules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_modules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_modules_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_roles: {
        Row: {
          created_at: string | null
          id: string
          permissions: Json | null
          role_name: string
          tenant_id: string
        }
        Insert: {
          created_at?: string | null
          id?: string
          permissions?: Json | null
          role_name: string
          tenant_id: string
        }
        Update: {
          created_at?: string | null
          id?: string
          permissions?: Json | null
          role_name?: string
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "tenant_roles_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_roles_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_roles_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_roles_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenant_schema_migrations: {
        Row: {
          applied_to_template_at: string | null
          created_at: string | null
          description: string | null
          id: string
          migration_name: string
          migration_sql: string
        }
        Insert: {
          applied_to_template_at?: string | null
          created_at?: string | null
          description?: string | null
          id?: string
          migration_name: string
          migration_sql: string
        }
        Update: {
          applied_to_template_at?: string | null
          created_at?: string | null
          description?: string | null
          id?: string
          migration_name?: string
          migration_sql?: string
        }
        Relationships: []
      }
      tenant_users: {
        Row: {
          created_at: string | null
          id: string
          invited_at: string | null
          invited_by: string | null
          is_active: boolean | null
          joined_at: string | null
          role: Database["public"]["Enums"]["tenant_role"]
          tenant_id: string
          updated_at: string | null
          user_id: string
        }
        Insert: {
          created_at?: string | null
          id?: string
          invited_at?: string | null
          invited_by?: string | null
          is_active?: boolean | null
          joined_at?: string | null
          role?: Database["public"]["Enums"]["tenant_role"]
          tenant_id: string
          updated_at?: string | null
          user_id: string
        }
        Update: {
          created_at?: string | null
          id?: string
          invited_at?: string | null
          invited_by?: string | null
          is_active?: boolean | null
          joined_at?: string | null
          role?: Database["public"]["Enums"]["tenant_role"]
          tenant_id?: string
          updated_at?: string | null
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "tenant_users_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "tenant_users_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_users_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "tenant_users_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      tenants: {
        Row: {
          company_scale: string | null
          created_at: string | null
          data_sources: Json | null
          id: string
          industry: string | null
          is_active: boolean | null
          logo_url: string | null
          monthly_revenue_range: string | null
          name: string
          onboarding_status: string | null
          plan: string | null
          schema_provisioned: boolean | null
          schema_provisioned_at: string | null
          settings: Json | null
          slug: string
          tier: Database["public"]["Enums"]["tenant_tier"]
          updated_at: string | null
        }
        Insert: {
          company_scale?: string | null
          created_at?: string | null
          data_sources?: Json | null
          id?: string
          industry?: string | null
          is_active?: boolean | null
          logo_url?: string | null
          monthly_revenue_range?: string | null
          name: string
          onboarding_status?: string | null
          plan?: string | null
          schema_provisioned?: boolean | null
          schema_provisioned_at?: string | null
          settings?: Json | null
          slug: string
          tier?: Database["public"]["Enums"]["tenant_tier"]
          updated_at?: string | null
        }
        Update: {
          company_scale?: string | null
          created_at?: string | null
          data_sources?: Json | null
          id?: string
          industry?: string | null
          is_active?: boolean | null
          logo_url?: string | null
          monthly_revenue_range?: string | null
          name?: string
          onboarding_status?: string | null
          plan?: string | null
          schema_provisioned?: boolean | null
          schema_provisioned_at?: string | null
          settings?: Json | null
          slug?: string
          tier?: Database["public"]["Enums"]["tenant_tier"]
          updated_at?: string | null
        }
        Relationships: []
      }
      user_data_assessments: {
        Row: {
          completed_at: string | null
          created_at: string
          id: string
          import_plan: Json | null
          module_key: string
          skipped_at: string | null
          status: string | null
          survey_responses: Json | null
          tenant_id: string
          updated_at: string
          user_id: string
        }
        Insert: {
          completed_at?: string | null
          created_at?: string
          id?: string
          import_plan?: Json | null
          module_key: string
          skipped_at?: string | null
          status?: string | null
          survey_responses?: Json | null
          tenant_id: string
          updated_at?: string
          user_id: string
        }
        Update: {
          completed_at?: string | null
          created_at?: string
          id?: string
          import_plan?: Json | null
          module_key?: string
          skipped_at?: string | null
          status?: string | null
          survey_responses?: Json | null
          tenant_id?: string
          updated_at?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "user_data_assessments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "user_data_assessments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "user_data_assessments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "user_data_assessments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      user_roles: {
        Row: {
          id: string
          role: Database["public"]["Enums"]["app_role"]
          user_id: string
        }
        Insert: {
          id?: string
          role?: Database["public"]["Enums"]["app_role"]
          user_id: string
        }
        Update: {
          id?: string
          role?: Database["public"]["Enums"]["app_role"]
          user_id?: string
        }
        Relationships: []
      }
      variance_analysis: {
        Row: {
          action_taken: string | null
          actual_amount: number
          analysis_period: string
          budget_amount: number
          category: string
          channel: string | null
          created_at: string
          id: string
          is_significant: boolean | null
          period_type: string
          prior_period_amount: number | null
          prior_year_amount: number | null
          requires_action: boolean | null
          subcategory: string | null
          tenant_id: string
          updated_at: string
          variance_drivers: Json | null
          variance_pct_budget: number | null
          variance_to_budget: number | null
          variance_to_prior: number | null
          yoy_variance: number | null
          yoy_variance_pct: number | null
        }
        Insert: {
          action_taken?: string | null
          actual_amount?: number
          analysis_period: string
          budget_amount?: number
          category: string
          channel?: string | null
          created_at?: string
          id?: string
          is_significant?: boolean | null
          period_type?: string
          prior_period_amount?: number | null
          prior_year_amount?: number | null
          requires_action?: boolean | null
          subcategory?: string | null
          tenant_id: string
          updated_at?: string
          variance_drivers?: Json | null
          variance_pct_budget?: number | null
          variance_to_budget?: number | null
          variance_to_prior?: number | null
          yoy_variance?: number | null
          yoy_variance_pct?: number | null
        }
        Update: {
          action_taken?: string | null
          actual_amount?: number
          analysis_period?: string
          budget_amount?: number
          category?: string
          channel?: string | null
          created_at?: string
          id?: string
          is_significant?: boolean | null
          period_type?: string
          prior_period_amount?: number | null
          prior_year_amount?: number | null
          requires_action?: boolean | null
          subcategory?: string | null
          tenant_id?: string
          updated_at?: string
          variance_drivers?: Json | null
          variance_pct_budget?: number | null
          variance_to_budget?: number | null
          variance_to_prior?: number | null
          yoy_variance?: number | null
          yoy_variance_pct?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      variance_decision_cards: {
        Row: {
          assigned_to: string | null
          card_type: string
          completed_at: string | null
          created_at: string | null
          description: string | null
          id: string
          impact_amount: number | null
          priority: number | null
          recommended_action: string | null
          status: string | null
          target_module: string
          tenant_id: string
          title: string
          updated_at: string | null
          variance_alert_id: string | null
        }
        Insert: {
          assigned_to?: string | null
          card_type: string
          completed_at?: string | null
          created_at?: string | null
          description?: string | null
          id?: string
          impact_amount?: number | null
          priority?: number | null
          recommended_action?: string | null
          status?: string | null
          target_module: string
          tenant_id: string
          title: string
          updated_at?: string | null
          variance_alert_id?: string | null
        }
        Update: {
          assigned_to?: string | null
          card_type?: string
          completed_at?: string | null
          created_at?: string | null
          description?: string | null
          id?: string
          impact_amount?: number | null
          priority?: number | null
          recommended_action?: string | null
          status?: string | null
          target_module?: string
          tenant_id?: string
          title?: string
          updated_at?: string | null
          variance_alert_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "variance_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "variance_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "variance_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "variance_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      vendor_payments: {
        Row: {
          amount: number
          bank_account_id: string | null
          bill_id: string | null
          created_at: string
          created_by: string | null
          id: string
          journal_entry_id: string | null
          notes: string | null
          payment_date: string
          payment_method: string | null
          payment_number: string
          reference_code: string | null
          tenant_id: string
          vendor_id: string | null
        }
        Insert: {
          amount: number
          bank_account_id?: string | null
          bill_id?: string | null
          created_at?: string
          created_by?: string | null
          id?: string
          journal_entry_id?: string | null
          notes?: string | null
          payment_date?: string
          payment_method?: string | null
          payment_number: string
          reference_code?: string | null
          tenant_id: string
          vendor_id?: string | null
        }
        Update: {
          amount?: number
          bank_account_id?: string | null
          bill_id?: string | null
          created_at?: string
          created_by?: string | null
          id?: string
          journal_entry_id?: string | null
          notes?: string | null
          payment_date?: string
          payment_method?: string | null
          payment_number?: string
          reference_code?: string | null
          tenant_id?: string
          vendor_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "vendor_payments_bank_account_id_fkey"
            columns: ["bank_account_id"]
            isOneToOne: false
            referencedRelation: "bank_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vendor_payments_bank_account_id_fkey"
            columns: ["bank_account_id"]
            isOneToOne: false
            referencedRelation: "cash_position"
            referencedColumns: ["bank_account_id"]
          },
          {
            foreignKeyName: "vendor_payments_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "vendor_payments_bill_id_fkey"
            columns: ["bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vendor_payments_journal_entry_id_fkey"
            columns: ["journal_entry_id"]
            isOneToOne: false
            referencedRelation: "journal_entries"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vendor_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vendor_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "vendor_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "vendor_payments_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "vendor_payments_vendor_id_fkey"
            columns: ["vendor_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
        ]
      }
      vendors: {
        Row: {
          address: string | null
          bank_account: string | null
          bank_name: string | null
          code: string
          contact_person: string | null
          created_at: string
          created_by: string | null
          currency_code: string | null
          email: string | null
          gl_payable_account_id: string | null
          id: string
          name: string
          notes: string | null
          payment_term_id: string | null
          payment_terms: number | null
          phone: string | null
          status: string | null
          tax_code: string | null
          tenant_id: string | null
          updated_at: string
          vendor_type: string | null
        }
        Insert: {
          address?: string | null
          bank_account?: string | null
          bank_name?: string | null
          code: string
          contact_person?: string | null
          created_at?: string
          created_by?: string | null
          currency_code?: string | null
          email?: string | null
          gl_payable_account_id?: string | null
          id?: string
          name: string
          notes?: string | null
          payment_term_id?: string | null
          payment_terms?: number | null
          phone?: string | null
          status?: string | null
          tax_code?: string | null
          tenant_id?: string | null
          updated_at?: string
          vendor_type?: string | null
        }
        Update: {
          address?: string | null
          bank_account?: string | null
          bank_name?: string | null
          code?: string
          contact_person?: string | null
          created_at?: string
          created_by?: string | null
          currency_code?: string | null
          email?: string | null
          gl_payable_account_id?: string | null
          id?: string
          name?: string
          notes?: string | null
          payment_term_id?: string | null
          payment_terms?: number | null
          phone?: string | null
          status?: string | null
          tax_code?: string | null
          tenant_id?: string | null
          updated_at?: string
          vendor_type?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "vendors_gl_payable_account_id_fkey"
            columns: ["gl_payable_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vendors_payment_term_id_fkey"
            columns: ["payment_term_id"]
            isOneToOne: false
            referencedRelation: "payment_terms"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vendors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vendors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "vendors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "vendors_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      vertical_configs: {
        Row: {
          created_at: string
          id: string
          is_active: boolean | null
          locked_until: string | null
          tenant_id: string
          thresholds: Json
          updated_at: string
          vertical: string
        }
        Insert: {
          created_at?: string
          id?: string
          is_active?: boolean | null
          locked_until?: string | null
          tenant_id: string
          thresholds?: Json
          updated_at?: string
          vertical: string
        }
        Update: {
          created_at?: string
          id?: string
          is_active?: boolean | null
          locked_until?: string | null
          tenant_id?: string
          thresholds?: Json
          updated_at?: string
          vertical?: string
        }
        Relationships: [
          {
            foreignKeyName: "vertical_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "vertical_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "vertical_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "vertical_configs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      view_refresh_queue: {
        Row: {
          error_message: string | null
          id: string
          processed_at: string | null
          queued_at: string | null
          status: string | null
          tenant_id: string
          triggered_by: string | null
          view_name: string
        }
        Insert: {
          error_message?: string | null
          id?: string
          processed_at?: string | null
          queued_at?: string | null
          status?: string | null
          tenant_id: string
          triggered_by?: string | null
          view_name: string
        }
        Update: {
          error_message?: string | null
          id?: string
          processed_at?: string | null
          queued_at?: string | null
          status?: string | null
          tenant_id?: string
          triggered_by?: string | null
          view_name?: string
        }
        Relationships: [
          {
            foreignKeyName: "view_refresh_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "view_refresh_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "view_refresh_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "view_refresh_queue_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      voucher_usage: {
        Row: {
          campaign_id: string | null
          created_at: string | null
          customer_id: string | null
          discount_amount: number | null
          discount_type: string | null
          id: string
          order_id: string | null
          tenant_id: string
          used_at: string | null
          voucher_code: string
        }
        Insert: {
          campaign_id?: string | null
          created_at?: string | null
          customer_id?: string | null
          discount_amount?: number | null
          discount_type?: string | null
          id?: string
          order_id?: string | null
          tenant_id: string
          used_at?: string | null
          voucher_code: string
        }
        Update: {
          campaign_id?: string | null
          created_at?: string | null
          customer_id?: string | null
          discount_amount?: number | null
          discount_type?: string | null
          id?: string
          order_id?: string | null
          tenant_id?: string
          used_at?: string | null
          voucher_code?: string
        }
        Relationships: [
          {
            foreignKeyName: "voucher_usage_campaign_id_fkey"
            columns: ["campaign_id"]
            isOneToOne: false
            referencedRelation: "promotion_campaigns"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "voucher_usage_campaign_id_fkey"
            columns: ["campaign_id"]
            isOneToOne: false
            referencedRelation: "v_mdp_campaign_performance"
            referencedColumns: ["campaign_id"]
          },
          {
            foreignKeyName: "voucher_usage_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "voucher_usage_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "voucher_usage_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "voucher_usage_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "voucher_usage_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "voucher_usage_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "voucher_usage_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      warehouse_capacity: {
        Row: {
          address: string | null
          created_at: string | null
          current_staff_count: number | null
          current_utilization: number | null
          id: string
          is_active: boolean | null
          max_orders_per_day: number | null
          max_orders_per_hour: number | null
          max_storage_units: number | null
          tenant_id: string
          updated_at: string | null
          warehouse_code: string
          warehouse_name: string | null
        }
        Insert: {
          address?: string | null
          created_at?: string | null
          current_staff_count?: number | null
          current_utilization?: number | null
          id?: string
          is_active?: boolean | null
          max_orders_per_day?: number | null
          max_orders_per_hour?: number | null
          max_storage_units?: number | null
          tenant_id: string
          updated_at?: string | null
          warehouse_code: string
          warehouse_name?: string | null
        }
        Update: {
          address?: string | null
          created_at?: string | null
          current_staff_count?: number | null
          current_utilization?: number | null
          id?: string
          is_active?: boolean | null
          max_orders_per_day?: number | null
          max_orders_per_hour?: number | null
          max_storage_units?: number | null
          tenant_id?: string
          updated_at?: string | null
          warehouse_code?: string
          warehouse_name?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "warehouse_capacity_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "warehouse_capacity_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "warehouse_capacity_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "warehouse_capacity_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      warehouse_operations: {
        Row: {
          avg_pack_time_minutes: number | null
          avg_pick_time_minutes: number | null
          backlog_orders: number | null
          capacity_used_percent: number | null
          created_at: string | null
          id: string
          operation_date: string
          orders_packed: number | null
          orders_per_staff: number | null
          orders_picked: number | null
          orders_shipped: number | null
          pack_accuracy_rate: number | null
          pick_accuracy_rate: number | null
          staff_count: number | null
          tenant_id: string
          total_orders_received: number | null
          updated_at: string | null
          warehouse_location: string | null
        }
        Insert: {
          avg_pack_time_minutes?: number | null
          avg_pick_time_minutes?: number | null
          backlog_orders?: number | null
          capacity_used_percent?: number | null
          created_at?: string | null
          id?: string
          operation_date: string
          orders_packed?: number | null
          orders_per_staff?: number | null
          orders_picked?: number | null
          orders_shipped?: number | null
          pack_accuracy_rate?: number | null
          pick_accuracy_rate?: number | null
          staff_count?: number | null
          tenant_id: string
          total_orders_received?: number | null
          updated_at?: string | null
          warehouse_location?: string | null
        }
        Update: {
          avg_pack_time_minutes?: number | null
          avg_pick_time_minutes?: number | null
          backlog_orders?: number | null
          capacity_used_percent?: number | null
          created_at?: string | null
          id?: string
          operation_date?: string
          orders_packed?: number | null
          orders_per_staff?: number | null
          orders_picked?: number | null
          orders_shipped?: number | null
          pack_accuracy_rate?: number | null
          pick_accuracy_rate?: number | null
          staff_count?: number | null
          tenant_id?: string
          total_orders_received?: number | null
          updated_at?: string | null
          warehouse_location?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "warehouse_operations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "warehouse_operations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "warehouse_operations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "warehouse_operations_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      website_analytics: {
        Row: {
          analytics_date: string
          avg_load_time_ms: number | null
          avg_session_duration_seconds: number | null
          bounce_rate: number | null
          cart_abandonment_rate: number | null
          cart_adds: number | null
          checkout_errors_count: number | null
          checkouts_completed: number | null
          checkouts_started: number | null
          conversion_rate: number | null
          created_at: string | null
          id: string
          page_views: number | null
          pages_per_session: number | null
          payment_errors_count: number | null
          revenue: number | null
          sessions: number | null
          tenant_id: string
          transactions: number | null
          unique_visitors: number | null
          updated_at: string | null
        }
        Insert: {
          analytics_date: string
          avg_load_time_ms?: number | null
          avg_session_duration_seconds?: number | null
          bounce_rate?: number | null
          cart_abandonment_rate?: number | null
          cart_adds?: number | null
          checkout_errors_count?: number | null
          checkouts_completed?: number | null
          checkouts_started?: number | null
          conversion_rate?: number | null
          created_at?: string | null
          id?: string
          page_views?: number | null
          pages_per_session?: number | null
          payment_errors_count?: number | null
          revenue?: number | null
          sessions?: number | null
          tenant_id: string
          transactions?: number | null
          unique_visitors?: number | null
          updated_at?: string | null
        }
        Update: {
          analytics_date?: string
          avg_load_time_ms?: number | null
          avg_session_duration_seconds?: number | null
          bounce_rate?: number | null
          cart_abandonment_rate?: number | null
          cart_adds?: number | null
          checkout_errors_count?: number | null
          checkouts_completed?: number | null
          checkouts_started?: number | null
          conversion_rate?: number | null
          created_at?: string | null
          id?: string
          page_views?: number | null
          pages_per_session?: number | null
          payment_errors_count?: number | null
          revenue?: number | null
          sessions?: number | null
          tenant_id?: string
          transactions?: number | null
          unique_visitors?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "website_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "website_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "website_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "website_analytics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      what_if_scenarios: {
        Row: {
          control_mode: string | null
          created_at: string
          created_by: string | null
          description: string | null
          id: string
          is_favorite: boolean | null
          monthly_trend_data: Json | null
          name: string
          params: Json
          results: Json
          retail_params: Json | null
          tenant_id: string | null
          updated_at: string
        }
        Insert: {
          control_mode?: string | null
          created_at?: string
          created_by?: string | null
          description?: string | null
          id?: string
          is_favorite?: boolean | null
          monthly_trend_data?: Json | null
          name: string
          params?: Json
          results?: Json
          retail_params?: Json | null
          tenant_id?: string | null
          updated_at?: string
        }
        Update: {
          control_mode?: string | null
          created_at?: string
          created_by?: string | null
          description?: string | null
          id?: string
          is_favorite?: boolean | null
          monthly_trend_data?: Json | null
          name?: string
          params?: Json
          results?: Json
          retail_params?: Json | null
          tenant_id?: string | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "what_if_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "what_if_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "what_if_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "what_if_scenarios_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      whatif_metrics_cache: {
        Row: {
          avg_order_value: number
          calculated_at: string
          channel_metrics: Json
          created_at: string
          data_end_date: string | null
          data_start_date: string | null
          id: string
          marketing_cost: number
          monthly_growth_rate: number
          order_count: number
          overhead_cost: number
          return_rate: number
          tenant_id: string
          total_cogs: number
          total_fees: number
          total_orders: number
          total_revenue: number
          updated_at: string
        }
        Insert: {
          avg_order_value?: number
          calculated_at?: string
          channel_metrics?: Json
          created_at?: string
          data_end_date?: string | null
          data_start_date?: string | null
          id?: string
          marketing_cost?: number
          monthly_growth_rate?: number
          order_count?: number
          overhead_cost?: number
          return_rate?: number
          tenant_id: string
          total_cogs?: number
          total_fees?: number
          total_orders?: number
          total_revenue?: number
          updated_at?: string
        }
        Update: {
          avg_order_value?: number
          calculated_at?: string
          channel_metrics?: Json
          created_at?: string
          data_end_date?: string | null
          data_start_date?: string | null
          id?: string
          marketing_cost?: number
          monthly_growth_rate?: number
          order_count?: number
          overhead_cost?: number
          return_rate?: number
          tenant_id?: string
          total_cogs?: number
          total_fees?: number
          total_orders?: number
          total_revenue?: number
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "whatif_metrics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "whatif_metrics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "whatif_metrics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "whatif_metrics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      working_capital_daily: {
        Row: {
          ap_turnover: number | null
          ar_turnover: number | null
          cash_balance: number | null
          ccc: number | null
          created_at: string
          day: string
          dio: number | null
          dpo: number | null
          dso: number | null
          id: string
          inventory: number | null
          inventory_turnover: number | null
          net_working_capital: number | null
          overdue_ap: number | null
          overdue_ar: number | null
          tenant_id: string
          total_ap: number | null
          total_ar: number | null
          updated_at: string
        }
        Insert: {
          ap_turnover?: number | null
          ar_turnover?: number | null
          cash_balance?: number | null
          ccc?: number | null
          created_at?: string
          day: string
          dio?: number | null
          dpo?: number | null
          dso?: number | null
          id?: string
          inventory?: number | null
          inventory_turnover?: number | null
          net_working_capital?: number | null
          overdue_ap?: number | null
          overdue_ar?: number | null
          tenant_id: string
          total_ap?: number | null
          total_ar?: number | null
          updated_at?: string
        }
        Update: {
          ap_turnover?: number | null
          ar_turnover?: number | null
          cash_balance?: number | null
          ccc?: number | null
          created_at?: string
          day?: string
          dio?: number | null
          dpo?: number | null
          dso?: number | null
          id?: string
          inventory?: number | null
          inventory_turnover?: number | null
          net_working_capital?: number | null
          overdue_ap?: number | null
          overdue_ar?: number | null
          tenant_id?: string
          total_ap?: number | null
          total_ar?: number | null
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "working_capital_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "working_capital_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "working_capital_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "working_capital_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      working_capital_metrics: {
        Row: {
          accounts_payable: number | null
          accounts_receivable: number | null
          ap_turnover: number | null
          ar_turnover: number | null
          ccc_days: number | null
          created_at: string
          current_assets: number | null
          current_liabilities: number | null
          dio_days: number | null
          dpo_days: number | null
          dso_days: number | null
          id: string
          inventory_turnover: number | null
          inventory_value: number | null
          metric_date: string
          net_working_capital: number | null
          potential_cash_release: number | null
          target_dio: number | null
          target_dpo: number | null
          target_dso: number | null
          tenant_id: string
        }
        Insert: {
          accounts_payable?: number | null
          accounts_receivable?: number | null
          ap_turnover?: number | null
          ar_turnover?: number | null
          ccc_days?: number | null
          created_at?: string
          current_assets?: number | null
          current_liabilities?: number | null
          dio_days?: number | null
          dpo_days?: number | null
          dso_days?: number | null
          id?: string
          inventory_turnover?: number | null
          inventory_value?: number | null
          metric_date: string
          net_working_capital?: number | null
          potential_cash_release?: number | null
          target_dio?: number | null
          target_dpo?: number | null
          target_dso?: number | null
          tenant_id: string
        }
        Update: {
          accounts_payable?: number | null
          accounts_receivable?: number | null
          ap_turnover?: number | null
          ar_turnover?: number | null
          ccc_days?: number | null
          created_at?: string
          current_assets?: number | null
          current_liabilities?: number | null
          dio_days?: number | null
          dpo_days?: number | null
          dso_days?: number | null
          id?: string
          inventory_turnover?: number | null
          inventory_value?: number | null
          metric_date?: string
          net_working_capital?: number | null
          potential_cash_release?: number | null
          target_dio?: number | null
          target_dpo?: number | null
          target_dso?: number | null
          tenant_id?: string
        }
        Relationships: [
          {
            foreignKeyName: "working_capital_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "working_capital_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "working_capital_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "working_capital_metrics_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      working_capital_targets: {
        Row: {
          ccc_benchmark: number
          ccc_good_multiplier: number
          ccc_warning_multiplier: number
          created_at: string
          dio_target: number
          dpo_target: number
          dso_target: number
          id: string
          tenant_id: string
          updated_at: string
        }
        Insert: {
          ccc_benchmark?: number
          ccc_good_multiplier?: number
          ccc_warning_multiplier?: number
          created_at?: string
          dio_target?: number
          dpo_target?: number
          dso_target?: number
          id?: string
          tenant_id: string
          updated_at?: string
        }
        Update: {
          ccc_benchmark?: number
          ccc_good_multiplier?: number
          ccc_warning_multiplier?: number
          created_at?: string
          dio_target?: number
          dpo_target?: number
          dso_target?: number
          id?: string
          tenant_id?: string
          updated_at?: string
        }
        Relationships: [
          {
            foreignKeyName: "working_capital_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "working_capital_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "working_capital_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "working_capital_targets_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
    }
    Views: {
      ap_aging: {
        Row: {
          aging_bucket: string | null
          balance_due: number | null
          bill_date: string | null
          bill_id: string | null
          bill_number: string | null
          days_overdue: number | null
          due_date: string | null
          paid_amount: number | null
          status: string | null
          tenant_id: string | null
          total_amount: number | null
          vendor_id: string | null
          vendor_name: string | null
        }
        Insert: {
          aging_bucket?: never
          balance_due?: never
          bill_date?: string | null
          bill_id?: string | null
          bill_number?: string | null
          days_overdue?: never
          due_date?: string | null
          paid_amount?: never
          status?: string | null
          tenant_id?: string | null
          total_amount?: number | null
          vendor_id?: string | null
          vendor_name?: string | null
        }
        Update: {
          aging_bucket?: never
          balance_due?: never
          bill_date?: string | null
          bill_id?: string | null
          bill_number?: string | null
          days_overdue?: never
          due_date?: string | null
          paid_amount?: never
          status?: string | null
          tenant_id?: string | null
          total_amount?: number | null
          vendor_id?: string | null
          vendor_name?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bills_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bills_vendor_id_fkey"
            columns: ["vendor_id"]
            isOneToOne: false
            referencedRelation: "vendors"
            referencedColumns: ["id"]
          },
        ]
      }
      ar_aging: {
        Row: {
          aging_bucket: string | null
          balance_due: number | null
          customer_id: string | null
          customer_name: string | null
          days_overdue: number | null
          due_date: string | null
          invoice_id: string | null
          invoice_number: string | null
          issue_date: string | null
          paid_amount: number | null
          status: string | null
          tenant_id: string | null
          total_amount: number | null
        }
        Relationships: [
          {
            foreignKeyName: "invoices_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      cash_position: {
        Row: {
          account_number: string | null
          ap_outstanding: number | null
          ar_outstanding: number | null
          bank_account_id: string | null
          bank_name: string | null
          currency: string | null
          current_balance: number | null
          last_sync_at: string | null
          tenant_id: string | null
        }
        Insert: {
          account_number?: string | null
          ap_outstanding?: never
          ar_outstanding?: never
          bank_account_id?: string | null
          bank_name?: string | null
          currency?: string | null
          current_balance?: number | null
          last_sync_at?: string | null
          tenant_id?: string | null
        }
        Update: {
          account_number?: string | null
          ap_outstanding?: never
          ar_outstanding?: never
          bank_account_id?: string | null
          bank_name?: string | null
          currency?: string | null
          current_balance?: number | null
          last_sync_at?: string | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_accounts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      credit_notes_view: {
        Row: {
          applied_amount: number | null
          approved_at: string | null
          approved_by: string | null
          created_at: string | null
          created_by: string | null
          currency: string | null
          description: string | null
          direction: string | null
          discount_amount: number | null
          due_date: string | null
          exchange_rate: number | null
          gl_account_id: string | null
          id: string | null
          metadata: Json | null
          note_date: string | null
          note_number: string | null
          note_type: string | null
          notes: string | null
          original_bill_id: string | null
          original_invoice_id: string | null
          original_order_id: string | null
          party_address: string | null
          party_email: string | null
          party_id: string | null
          party_name: string | null
          party_tax_code: string | null
          reason: string | null
          reference_number: string | null
          remaining_amount: number | null
          status: string | null
          subtotal: number | null
          tax_amount: number | null
          tenant_id: string | null
          terms: string | null
          total_amount: number | null
          updated_at: string | null
        }
        Insert: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string | null
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction?: string | null
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string | null
          metadata?: Json | null
          note_date?: string | null
          note_number?: string | null
          note_type?: string | null
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id?: string | null
          terms?: string | null
          total_amount?: number | null
          updated_at?: string | null
        }
        Update: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string | null
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction?: string | null
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string | null
          metadata?: Json | null
          note_date?: string | null
          note_number?: string | null
          note_type?: string | null
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id?: string | null
          terms?: string | null
          total_amount?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "adjustment_notes_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      debit_notes_view: {
        Row: {
          applied_amount: number | null
          approved_at: string | null
          approved_by: string | null
          created_at: string | null
          created_by: string | null
          currency: string | null
          description: string | null
          direction: string | null
          discount_amount: number | null
          due_date: string | null
          exchange_rate: number | null
          gl_account_id: string | null
          id: string | null
          metadata: Json | null
          note_date: string | null
          note_number: string | null
          note_type: string | null
          notes: string | null
          original_bill_id: string | null
          original_invoice_id: string | null
          original_order_id: string | null
          party_address: string | null
          party_email: string | null
          party_id: string | null
          party_name: string | null
          party_tax_code: string | null
          reason: string | null
          reference_number: string | null
          remaining_amount: number | null
          status: string | null
          subtotal: number | null
          tax_amount: number | null
          tenant_id: string | null
          terms: string | null
          total_amount: number | null
          updated_at: string | null
        }
        Insert: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string | null
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction?: string | null
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string | null
          metadata?: Json | null
          note_date?: string | null
          note_number?: string | null
          note_type?: string | null
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id?: string | null
          terms?: string | null
          total_amount?: number | null
          updated_at?: string | null
        }
        Update: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string | null
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction?: string | null
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string | null
          metadata?: Json | null
          note_date?: string | null
          note_number?: string | null
          note_type?: string | null
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id?: string | null
          terms?: string | null
          total_amount?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "adjustment_notes_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      decisions_pending_followup: {
        Row: {
          card_type: string | null
          decided_at: string | null
          entity_id: string | null
          entity_label: string | null
          entity_type: string | null
          expected_impact_amount: number | null
          expected_outcome: string | null
          follow_up_date: string | null
          follow_up_status: string | null
          id: string | null
          original_impact: number | null
          outcome_count: number | null
          selected_action_label: string | null
          selected_action_type: string | null
          tenant_id: string | null
          urgency: string | null
        }
        Insert: {
          card_type?: string | null
          decided_at?: string | null
          entity_id?: string | null
          entity_label?: string | null
          entity_type?: string | null
          expected_impact_amount?: number | null
          expected_outcome?: string | null
          follow_up_date?: string | null
          follow_up_status?: string | null
          id?: string | null
          original_impact?: number | null
          outcome_count?: never
          selected_action_label?: string | null
          selected_action_type?: string | null
          tenant_id?: string | null
          urgency?: never
        }
        Update: {
          card_type?: string | null
          decided_at?: string | null
          entity_id?: string | null
          entity_label?: string | null
          entity_type?: string | null
          expected_impact_amount?: number | null
          expected_outcome?: string | null
          follow_up_date?: string | null
          follow_up_status?: string | null
          id?: string | null
          original_impact?: number | null
          outcome_count?: never
          selected_action_label?: string | null
          selected_action_type?: string | null
          tenant_id?: string | null
          urgency?: never
        }
        Relationships: [
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      fdp_sku_summary: {
        Row: {
          avg_unit_cogs: number | null
          avg_unit_price: number | null
          category: string | null
          gross_profit: number | null
          margin_percent: number | null
          order_count: number | null
          product_name: string | null
          sku: string | null
          tenant_id: string | null
          total_cogs: number | null
          total_quantity: number | null
          total_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_audit_approval_evidence: {
        Row: {
          action: string | null
          approval_request_id: string | null
          current_approvals: number | null
          decided_at: string | null
          decided_by: string | null
          decision: string | null
          decision_comment: string | null
          decision_id: string | null
          policy_id: string | null
          requested_at: string | null
          requested_by: string | null
          required_approvals: number | null
          resolved_at: string | null
          resource_data: Json | null
          resource_id: string | null
          resource_type: string | null
          status: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "approval_requests_policy_id_fkey"
            columns: ["policy_id"]
            isOneToOne: false
            referencedRelation: "enterprise_policies"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_board_summary: {
        Row: {
          allocations_count: number | null
          auto_actions: number | null
          bank_txns_used: number | null
          cash_settled: number | null
          invoices_settled: number | null
          open_exceptions: number | null
          period_end: string | null
          period_start: string | null
          tenant_id: string | null
          total_exceptions: number | null
        }
        Relationships: []
      }
      mv_cdp_basket_structure_60d_vs_prev60d: {
        Row: {
          aov_base: number | null
          aov_change_ratio: number | null
          aov_cur: number | null
          avg_cat_base: number | null
          avg_cat_cur: number | null
          avg_cat_delta: number | null
          cross_rate_base: number | null
          cross_rate_cur: number | null
          cross_rate_delta: number | null
          orders_base: number | null
          orders_cur: number | null
          tenant_id: string | null
        }
        Relationships: []
      }
      mv_cdp_basket_structure_daily: {
        Row: {
          avg_categories_per_order: number | null
          avg_order_amount: number | null
          cross_category_rate: number | null
          order_date: string | null
          tenant_id: string | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_category_share_60d_vs_prev60d: {
        Row: {
          category: string | null
          customers_base: number | null
          customers_cur: number | null
          margin_base: number | null
          margin_cur: number | null
          sales_base: number | null
          sales_change_ratio: number | null
          sales_cur: number | null
          share_base: number | null
          share_cur: number | null
          share_delta: number | null
          tenant_id: string | null
        }
        Relationships: []
      }
      mv_cdp_category_spend_daily: {
        Row: {
          category: string | null
          customers: number | null
          gross_margin: number | null
          gross_sales: number | null
          order_date: string | null
          orders: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_category_substitution_matrix_60d: {
        Row: {
          base_category: string | null
          cur_category: string | null
          customers_shifted: number | null
          tenant_id: string | null
        }
        Relationships: []
      }
      mv_cdp_cohort_metrics_rolling: {
        Row: {
          as_of_date: string | null
          bundle_order_share: number | null
          cod_order_share: number | null
          cohort_id: string | null
          cohort_key: string | null
          cohort_type: string | null
          discounted_order_share: number | null
          gross_margin_per_customer: number | null
          iqr_inter_purchase_days: number | null
          median_aov: number | null
          median_inter_purchase_days: number | null
          n_customers: number | null
          net_revenue_per_customer: number | null
          orders_per_customer: number | null
          p25_aov: number | null
          p25_inter_purchase_days: number | null
          p75_aov: number | null
          p75_inter_purchase_days: number | null
          refund_rate: number | null
          repeat_rate: number | null
          sum_gross_margin: number | null
          sum_net_revenue: number | null
          sum_refund_amount: number | null
          tenant_id: string | null
          window_days: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_cohort_membership_daily_cohort_id_fkey"
            columns: ["cohort_id"]
            isOneToOne: false
            referencedRelation: "cdp_cohorts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_cohort_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_customer_primary_category_baseline_current: {
        Row: {
          base_category: string | null
          base_last_date: string | null
          cur_category: string | null
          cur_last_date: string | null
          customer_id: string | null
          tenant_id: string | null
        }
        Relationships: []
      }
      mv_cdp_customer_rolling_windows: {
        Row: {
          aov: number | null
          as_of_date: string | null
          bundle_order_share: number | null
          cod_order_share: number | null
          customer_id: string | null
          discount_share: number | null
          discounted_order_share: number | null
          gross_margin: number | null
          inter_purchase_days: number | null
          net_revenue: number | null
          orders_count: number | null
          refund_amount: number | null
          return_rate: number | null
          tenant_id: string | null
          window_days: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_data_quality_daily: {
        Row: {
          as_of_date: string | null
          cogs_coverage: number | null
          diagnostics: Json | null
          identity_coverage: number | null
          refund_customer_mapping_coverage: number | null
          refund_order_mapping_coverage: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_order_items_enriched: {
        Row: {
          category: string | null
          channel: string | null
          customer_id: string | null
          item_amount: number | null
          item_margin: number | null
          order_date: string | null
          order_id: string | null
          quantity: number | null
          sku: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_percentile_value_tiers: {
        Row: {
          as_of_date: string | null
          customer_id: string | null
          net_revenue: number | null
          tenant_id: string | null
          tier_label: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_segment_metrics_rolling: {
        Row: {
          as_of_date: string | null
          bundle_order_share: number | null
          cod_order_share: number | null
          discounted_order_share: number | null
          gross_margin_per_customer: number | null
          iqr_inter_purchase_days: number | null
          median_aov: number | null
          median_inter_purchase_days: number | null
          median_items_per_order: number | null
          median_net_revenue: number | null
          median_unit_price: number | null
          n_customers: number | null
          net_revenue_per_customer: number | null
          orders_per_customer: number | null
          p25_aov: number | null
          p25_inter_purchase_days: number | null
          p25_net_revenue: number | null
          p75_aov: number | null
          p75_inter_purchase_days: number | null
          p75_net_revenue: number | null
          refund_rate: number | null
          repeat_rate: number | null
          segment_id: string | null
          segment_version: number | null
          sum_gross_margin: number | null
          sum_net_revenue: number | null
          sum_refund_amount: number | null
          tenant_id: string | null
          window_days: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_segment_membership_daily_segment_id_fkey"
            columns: ["segment_id"]
            isOneToOne: false
            referencedRelation: "cdp_segments"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_segment_membership_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      mv_cdp_value_tier_metrics_rolling: {
        Row: {
          as_of_date: string | null
          churn_risk_index: number | null
          gross_margin_per_customer: number | null
          median_aov: number | null
          median_inter_purchase_days: number | null
          n_customers: number | null
          net_revenue_per_customer: number | null
          p25_aov: number | null
          p75_aov: number | null
          repeat_rate: number | null
          spend_stddev: number | null
          sum_gross_margin: number | null
          sum_net_revenue: number | null
          sum_refund_amount: number | null
          tenant_id: string | null
          tier_label: string | null
          window_days: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_metrics_rolling_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_active_alerts_hierarchy: {
        Row: {
          acceleration: number | null
          acknowledged_at: string | null
          acknowledged_by: string | null
          action_url: string | null
          alert_class: string | null
          breach_threshold: number | null
          child_count: number | null
          confidence_factors: Json | null
          confidence_level: string | null
          confidence_score: number | null
          created_at: string | null
          current_value: number | null
          days_to_breach: number | null
          decision_framing: Json | null
          dimension_key: string | null
          display_status: string | null
          estimated_breach_date: string | null
          expires_at: string | null
          exposure_amount: number | null
          exposure_currency: string | null
          hierarchy_category: string | null
          hierarchy_level: number | null
          id: string | null
          impact_description: string | null
          is_parent: boolean | null
          message: string | null
          metadata: Json | null
          metric_code: string | null
          parent_alert_id: string | null
          priority: number | null
          r_squared: number | null
          resolution_notes: string | null
          resolved_at: string | null
          resolved_by: string | null
          root_cause_explanation: string | null
          root_cause_metric: string | null
          rule_id: string | null
          severity: string | null
          slope: number | null
          status: string | null
          suggested_action: string | null
          suppressed_children: Json | null
          tenant_id: string | null
          title: string | null
          trajectory: Json | null
          updated_at: string | null
        }
        Insert: {
          acceleration?: number | null
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          action_url?: string | null
          alert_class?: string | null
          breach_threshold?: number | null
          child_count?: number | null
          confidence_factors?: Json | null
          confidence_level?: string | null
          confidence_score?: number | null
          created_at?: string | null
          current_value?: number | null
          days_to_breach?: number | null
          decision_framing?: Json | null
          dimension_key?: string | null
          display_status?: never
          estimated_breach_date?: string | null
          expires_at?: string | null
          exposure_amount?: number | null
          exposure_currency?: string | null
          hierarchy_category?: never
          hierarchy_level?: number | null
          id?: string | null
          impact_description?: string | null
          is_parent?: boolean | null
          message?: string | null
          metadata?: Json | null
          metric_code?: string | null
          parent_alert_id?: string | null
          priority?: number | null
          r_squared?: number | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          root_cause_explanation?: string | null
          root_cause_metric?: string | null
          rule_id?: string | null
          severity?: string | null
          slope?: number | null
          status?: string | null
          suggested_action?: string | null
          suppressed_children?: Json | null
          tenant_id?: string | null
          title?: string | null
          trajectory?: Json | null
          updated_at?: string | null
        }
        Update: {
          acceleration?: number | null
          acknowledged_at?: string | null
          acknowledged_by?: string | null
          action_url?: string | null
          alert_class?: string | null
          breach_threshold?: number | null
          child_count?: number | null
          confidence_factors?: Json | null
          confidence_level?: string | null
          confidence_score?: number | null
          created_at?: string | null
          current_value?: number | null
          days_to_breach?: number | null
          decision_framing?: Json | null
          dimension_key?: string | null
          display_status?: never
          estimated_breach_date?: string | null
          expires_at?: string | null
          exposure_amount?: number | null
          exposure_currency?: string | null
          hierarchy_category?: never
          hierarchy_level?: number | null
          id?: string | null
          impact_description?: string | null
          is_parent?: boolean | null
          message?: string | null
          metadata?: Json | null
          metric_code?: string | null
          parent_alert_id?: string | null
          priority?: number | null
          r_squared?: number | null
          resolution_notes?: string | null
          resolved_at?: string | null
          resolved_by?: string | null
          root_cause_explanation?: string | null
          root_cause_metric?: string | null
          rule_id?: string | null
          severity?: string | null
          slope?: number | null
          status?: string | null
          suggested_action?: string | null
          suppressed_children?: Json | null
          tenant_id?: string | null
          title?: string | null
          trajectory?: Json | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "early_warning_alerts_parent_alert_id_fkey"
            columns: ["parent_alert_id"]
            isOneToOne: false
            referencedRelation: "early_warning_alerts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_parent_alert_id_fkey"
            columns: ["parent_alert_id"]
            isOneToOne: false
            referencedRelation: "v_active_alerts_hierarchy"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_rule_id_fkey"
            columns: ["rule_id"]
            isOneToOne: false
            referencedRelation: "predictive_alert_rules"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "early_warning_alerts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_active_risk_appetite: {
        Row: {
          active_breaches: number | null
          approved_at: string | null
          approved_by: string | null
          defined_by: string | null
          description: string | null
          effective_from: string | null
          effective_to: string | null
          id: string | null
          name: string | null
          rule_count: number | null
          tenant_id: string | null
          version: number | null
        }
        Insert: {
          active_breaches?: never
          approved_at?: string | null
          approved_by?: string | null
          defined_by?: string | null
          description?: string | null
          effective_from?: string | null
          effective_to?: string | null
          id?: string | null
          name?: string | null
          rule_count?: never
          tenant_id?: string | null
          version?: number | null
        }
        Update: {
          active_breaches?: never
          approved_at?: string | null
          approved_by?: string | null
          defined_by?: string | null
          description?: string | null
          effective_from?: string | null
          effective_to?: string | null
          id?: string | null
          name?: string | null
          rule_count?: never
          tenant_id?: string | null
          version?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_appetites_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_ai_advisor_active: {
        Row: {
          action_target: string | null
          action_verb: string | null
          actioned_at: string | null
          alert_id: string | null
          based_on_pattern_id: string | null
          based_on_samples: number | null
          confidence_score: number | null
          created_at: string | null
          decision_type: string | null
          display_text: string | null
          id: string | null
          is_silent: boolean | null
          metric_code: string | null
          outcome_measured: boolean | null
          recommendation: string | null
          surfaced_at: string | null
          tenant_id: string | null
        }
        Insert: {
          action_target?: string | null
          action_verb?: string | null
          actioned_at?: string | null
          alert_id?: string | null
          based_on_pattern_id?: string | null
          based_on_samples?: number | null
          confidence_score?: number | null
          created_at?: string | null
          decision_type?: string | null
          display_text?: never
          id?: string | null
          is_silent?: boolean | null
          metric_code?: string | null
          outcome_measured?: boolean | null
          recommendation?: string | null
          surfaced_at?: string | null
          tenant_id?: string | null
        }
        Update: {
          action_target?: string | null
          action_verb?: string | null
          actioned_at?: string | null
          alert_id?: string | null
          based_on_pattern_id?: string | null
          based_on_samples?: number | null
          confidence_score?: number | null
          created_at?: string | null
          decision_type?: string | null
          display_text?: never
          id?: string | null
          is_silent?: boolean | null
          metric_code?: string | null
          outcome_measured?: boolean | null
          recommendation?: string | null
          surfaced_at?: string | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "ai_advisor_responses_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "early_warning_alerts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_alert_id_fkey"
            columns: ["alert_id"]
            isOneToOne: false
            referencedRelation: "v_active_alerts_hierarchy"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_based_on_pattern_id_fkey"
            columns: ["based_on_pattern_id"]
            isOneToOne: false
            referencedRelation: "decision_learning_patterns"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "ai_advisor_responses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_alerts_pending_escalation: {
        Row: {
          acknowledged_at: string | null
          age_hours: number | null
          assigned_to: string | null
          created_at: string | null
          deadline_at: string | null
          escalate_after_minutes: number | null
          escalate_to_role: string | null
          id: string | null
          is_escalated: boolean | null
          notify_channels: Json | null
          severity: string | null
          should_escalate: boolean | null
          status: string | null
          tenant_id: string | null
          title: string | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_alerts_with_resolution: {
        Row: {
          alert_status: string | null
          alert_type: string | null
          assigned_to: string | null
          created_at: string | null
          follow_up_date: string | null
          follow_up_required: boolean | null
          id: string | null
          impact_amount: number | null
          minutes_in_progress: number | null
          minutes_since_created: number | null
          resolution_id: string | null
          resolution_notes: string | null
          resolution_status: string | null
          resolution_type: string | null
          resolved_at: string | null
          root_cause: string | null
          severity: string | null
          started_at: string | null
          tenant_id: string | null
          time_to_resolve_minutes: number | null
          title: string | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_audience_customer_summary: {
        Row: {
          avg_order_value: number | null
          channel: string | null
          customer_id: string | null
          first_order_at: string | null
          last_order_at: string | null
          order_count: number | null
          tenant_id: string | null
          total_cogs: number | null
          total_margin: number | null
          total_net_revenue: number | null
          total_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_audience_rfm_summary: {
        Row: {
          at_risk: number | null
          avg_aov: number | null
          avg_frequency: number | null
          avg_ltv: number | null
          avg_recency_days: number | null
          champions: number | null
          hibernating: number | null
          loyal: number | null
          new_customers: number | null
          tenant_id: string | null
          total_customers: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_bank_txn_match_state: {
        Row: {
          bank_amount: number | null
          bank_transaction_id: string | null
          description: string | null
          link_count: number | null
          match_state: string | null
          matched_amount: number | null
          reference: string | null
          tenant_id: string | null
          transaction_date: string | null
          txn_abs_amount: number | null
          unmatched_amount: number | null
        }
        Relationships: [
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "bank_transactions_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_base_order_metrics: {
        Row: {
          avg_order_value: number | null
          gross_profit: number | null
          gross_revenue: number | null
          net_revenue: number | null
          tenant_id: string | null
          total_cogs: number | null
          total_discounts: number | null
          total_orders: number | null
          unique_customers: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_board_report_invoices: {
        Row: {
          customer_id: string | null
          due_date: string | null
          id: string | null
          issue_date: string | null
          paid_amount: number | null
          status: string | null
          tenant_id: string | null
          total_amount: number | null
        }
        Insert: {
          customer_id?: string | null
          due_date?: string | null
          id?: string | null
          issue_date?: string | null
          paid_amount?: number | null
          status?: string | null
          tenant_id?: string | null
          total_amount?: number | null
        }
        Update: {
          customer_id?: string | null
          due_date?: string | null
          id?: string | null
          issue_date?: string | null
          paid_amount?: number | null
          status?: string | null
          tenant_id?: string | null
          total_amount?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "invoices_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_customer_ar_summary"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_budget_reallocation_suggestions: {
        Row: {
          action_type: string | null
          attributed_revenue: number | null
          cac: number | null
          channel: string | null
          confidence_level: string | null
          current_spend: number | null
          new_customers: number | null
          period_end: string | null
          period_start: string | null
          profit_roas: number | null
          recommendation_reason: string | null
          recommended_budget_change: number | null
          roas: number | null
          suggested_budget: number | null
          tenant_id: string | null
        }
        Insert: {
          action_type?: never
          attributed_revenue?: number | null
          cac?: number | null
          channel?: string | null
          confidence_level?: never
          current_spend?: number | null
          new_customers?: number | null
          period_end?: string | null
          period_start?: string | null
          profit_roas?: number | null
          recommendation_reason?: string | null
          recommended_budget_change?: number | null
          roas?: number | null
          suggested_budget?: never
          tenant_id?: string | null
        }
        Update: {
          action_type?: never
          attributed_revenue?: number | null
          cac?: number | null
          channel?: string | null
          confidence_level?: never
          current_spend?: number | null
          new_customers?: number | null
          period_end?: string | null
          period_start?: string | null
          profit_roas?: number | null
          recommendation_reason?: string | null
          recommended_budget_change?: number | null
          roas?: number | null
          suggested_budget?: never
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "mdp_channel_roi_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cash_forecast_orders_weekly: {
        Row: {
          tenant_id: string | null
          week_start: string | null
          weekly_orders: number | null
          weekly_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_category_pl_summary: {
        Row: {
          category: string | null
          gross_profit: number | null
          margin_percent: number | null
          order_count: number | null
          period: string | null
          tenant_id: string | null
          total_cogs: number | null
          total_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_ccc_with_targets: {
        Row: {
          ccc: number | null
          ccc_benchmark: number | null
          ccc_improvement: number | null
          ccc_status: string | null
          dio: number | null
          dio_status: string | null
          dio_target: number | null
          dpo: number | null
          dpo_status: string | null
          dpo_target: number | null
          dso: number | null
          dso_status: string | null
          dso_target: number | null
          overdue_ar: number | null
          overdue_ar_percent: number | null
          snapshot_at: string | null
          tenant_id: string | null
          total_ar: number | null
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_category_conversion_stats: {
        Row: {
          avg_price: number | null
          category: string | null
          category_penetration_pct: number | null
          orders_per_buyer: number | null
          price_p25: number | null
          price_p50: number | null
          price_p75: number | null
          tenant_id: string | null
          total_active_customers: number | null
          total_orders: number | null
          unique_buyers: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_customer_audit: {
        Row: {
          anonymized_email: string | null
          anonymized_phone: string | null
          aov: number | null
          clv: number | null
          created_at: string | null
          days_since_last_purchase: number | null
          id: string | null
          internal_id: string | null
          merge_confidence: number | null
          merge_status: string | null
          order_count: number | null
          rfm_f: number | null
          rfm_m: number | null
          rfm_r: number | null
          source_count: number | null
          tenant_id: string | null
          total_spend: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_customer_category_affinity: {
        Row: {
          affinity_score: number | null
          avg_price_bought: number | null
          category: string | null
          category_last_purchase: string | null
          category_orders: number | null
          category_spend: number | null
          customer_id: string | null
          overall_last_purchase: string | null
          overall_spend: number | null
          price_tier: string | null
          recency_status: string | null
          tenant_id: string | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_customer_research: {
        Row: {
          anonymous_id: string | null
          aov: number | null
          behavior_status: string | null
          created_at: string | null
          id: string | null
          last_purchase: string | null
          margin_contribution: number | null
          order_count: number | null
          repurchase_cycle: number | null
          return_rate: number | null
          tenant_id: string | null
          total_spend: number | null
          trend: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_data_quality: {
        Row: {
          cogs_coverage: number | null
          confidence_level: string | null
          data_quality_score: number | null
          days_since_last_order: number | null
          identity_coverage: number | null
          is_reliable: boolean | null
          orders_missing_cogs: number | null
          orders_missing_customer: number | null
          orders_missing_revenue: number | null
          orders_with_identity: number | null
          tenant_id: string | null
          total_customers: number | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_decision_cards_detail: {
        Row: {
          affected_population: Json | null
          created_at: string | null
          decision: Json | null
          equity_impact: number | null
          id: string | null
          options: string[] | null
          owner: string | null
          population_size: number | null
          post_decision_review: string | null
          priority: string | null
          problem_statement: string | null
          review_deadline: string | null
          risks: Json | null
          severity: string | null
          source_equity: boolean | null
          source_insights: Json | null
          status: string | null
          tenant_id: string | null
          title: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_decision_evidence: {
        Row: {
          as_of_date: string | null
          confidence: number | null
          decision_id: string | null
          evidence: Json | null
          insight_code: string | null
          insight_event_id: string | null
          link_type: string | null
          metrics: Json | null
          narrative: string | null
          severity: string | null
          subject_key: string | null
          subject_type: string | null
          tenant_id: string | null
          title: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "cdp_decision_cards"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_cards_detail"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_decision_queue"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["linked_decision_card_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_pending_decisions"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_decision_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "v_decision_audit_trail"
            referencedColumns: ["decision_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_insight_links_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "cdp_insight_registry"
            referencedColumns: ["insight_code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_registry_summary"
            referencedColumns: ["code"]
          },
        ]
      }
      v_cdp_decision_queue: {
        Row: {
          baseline_days: number | null
          category: string | null
          created_at: string | null
          decision_due: string | null
          id: string | null
          latest_insight_date: string | null
          linked_insights: number | null
          owner_role: string | null
          population_ref: Json | null
          priority: string | null
          problem_statement: string | null
          review_by: string | null
          severity: string | null
          source_ref: Json | null
          source_type: string | null
          status: string | null
          summary: string | null
          tenant_id: string | null
          title: string | null
          updated_at: string | null
          window_days: number | null
        }
        Insert: {
          baseline_days?: number | null
          category?: string | null
          created_at?: string | null
          decision_due?: string | null
          id?: string | null
          latest_insight_date?: never
          linked_insights?: never
          owner_role?: string | null
          population_ref?: Json | null
          priority?: string | null
          problem_statement?: string | null
          review_by?: string | null
          severity?: string | null
          source_ref?: Json | null
          source_type?: string | null
          status?: string | null
          summary?: string | null
          tenant_id?: string | null
          title?: string | null
          updated_at?: string | null
          window_days?: number | null
        }
        Update: {
          baseline_days?: number | null
          category?: string | null
          created_at?: string | null
          decision_due?: string | null
          id?: string | null
          latest_insight_date?: never
          linked_insights?: never
          owner_role?: string | null
          population_ref?: Json | null
          priority?: string | null
          problem_statement?: string | null
          review_by?: string | null
          severity?: string | null
          source_ref?: Json | null
          source_type?: string | null
          status?: string | null
          summary?: string | null
          tenant_id?: string | null
          title?: string | null
          updated_at?: string | null
          window_days?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_demand_category_counts: {
        Row: {
          active_count: number | null
          category: string | null
          tenant_id: string | null
          total_count: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_demand_insights: {
        Row: {
          affected_customers: number | null
          business_meaning_vi: string | null
          category: string | null
          code: string | null
          description: string | null
          detected_at: string | null
          event_id: string | null
          name_vi: string | null
          product_group: string | null
          revenue_contribution: number | null
          risk_vi: string | null
          severity: string | null
          shift_direction: string | null
          shift_percent: number | null
          status: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["code"]
            isOneToOne: false
            referencedRelation: "cdp_insight_registry"
            referencedColumns: ["insight_code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_registry_summary"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_demand_insights_triggered: {
        Row: {
          affected_customers: number | null
          category: string | null
          insight_code: string | null
          product_group: string | null
          revenue_contribution_pct: number | null
          sales_base: number | null
          sales_cur: number | null
          severity: string | null
          shift_direction: string | null
          shift_percent: number | null
          tenant_id: string | null
          title_vi: string | null
        }
        Relationships: []
      }
      v_cdp_demographics_summary: {
        Row: {
          age_distribution: Json | null
          device_distribution: Json | null
          gender_distribution: Json | null
          geographic_distribution: Json | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_equity_distribution: {
        Row: {
          bucket: string | null
          customer_count: number | null
          equity_avg: number | null
          equity_sum: number | null
          estimated_count: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_equity_drivers: {
        Row: {
          description: string | null
          direction: string | null
          factor: string | null
          impact_percent: number | null
          tenant_id: string | null
        }
        Relationships: []
      }
      v_cdp_equity_evidence: {
        Row: {
          anonymized_id: string | null
          behavior_status: string | null
          customer_id: string | null
          data_confidence: number | null
          estimated_ltv: number | null
          last_purchase: string | null
          purchase_count: number | null
          segment: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_equity_overview: {
        Row: {
          as_of_date: string | null
          at_risk_percent: number | null
          at_risk_value: number | null
          avg_equity_12m: number | null
          change_direction: string | null
          customers_with_equity: number | null
          data_quality_summary: Json | null
          equity_change: number | null
          estimated_share: number | null
          last_updated: string | null
          tenant_id: string | null
          total_customers: number | null
          total_equity_12m: number | null
          total_equity_24m: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_equity_snapshot: {
        Row: {
          as_of_date: string | null
          at_risk_percent: number | null
          at_risk_value: number | null
          change_direction: string | null
          data_quality_summary: Json | null
          equity_change: number | null
          estimated_share: number | null
          last_updated: string | null
          tenant_id: string | null
          top_drivers: Json | null
          total_equity_12m: number | null
          total_equity_24m: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_evidence_sample_customers_by_category: {
        Row: {
          category: string | null
          customer_id: string | null
          rnk: number | null
          spend: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "external_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_highlight_signals: {
        Row: {
          as_of_date: string | null
          category: string | null
          change_percent: number | null
          created_at: string | null
          direction: string | null
          event_id: string | null
          headline: string | null
          insight_code: string | null
          insight_name: string | null
          n_customers: number | null
          population_ref: Json | null
          population_type: string | null
          revenue_impact: number | null
          severity: string | null
          tenant_id: string | null
          topic: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "cdp_insight_registry"
            referencedColumns: ["insight_code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_registry_summary"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insight_clusters_summary: {
        Row: {
          as_of_date: string | null
          cluster_key: string | null
          cluster_type: string | null
          confidence: number | null
          created_at: string | null
          evidence: Json | null
          id: string | null
          linked_decision_id: string | null
          member_count: number | null
          metrics: Json | null
          narrative: string | null
          severity: string | null
          tenant_id: string | null
          title: string | null
        }
        Insert: {
          as_of_date?: string | null
          cluster_key?: string | null
          cluster_type?: string | null
          confidence?: number | null
          created_at?: string | null
          evidence?: Json | null
          id?: string | null
          linked_decision_id?: never
          member_count?: never
          metrics?: Json | null
          narrative?: string | null
          severity?: string | null
          tenant_id?: string | null
          title?: string | null
        }
        Update: {
          as_of_date?: string | null
          cluster_key?: string | null
          cluster_type?: string | null
          confidence?: number | null
          created_at?: string | null
          evidence?: Json | null
          id?: string | null
          linked_decision_id?: never
          member_count?: never
          metrics?: Json | null
          narrative?: string | null
          severity?: string | null
          tenant_id?: string | null
          title?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_clusters_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insight_detail: {
        Row: {
          action_owner: string | null
          baseline_value: number | null
          business_implication: string | null
          change_direction: string | null
          change_percent: number | null
          code: string | null
          confidence: string | null
          cooldown_until: string | null
          current_value: number | null
          detected_at: string | null
          drivers: Json | null
          estimated_impact: number | null
          event_id: string | null
          impact_currency: string | null
          linked_decision_card_id: string | null
          linked_decision_card_status: string | null
          metric_name: string | null
          metric_unit: string | null
          period_baseline: string | null
          period_current: string | null
          population_name: string | null
          population_size: number | null
          recommended_action: string | null
          revenue_contribution: number | null
          sample_customers: Json | null
          severity: string | null
          snapshot_date: string | null
          status: string | null
          tenant_id: string | null
          title: string | null
          topic: string | null
          urgency: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insight_feed: {
        Row: {
          as_of_date: string | null
          change_direction: string | null
          change_percent: number | null
          code: string | null
          confidence: string | null
          cooldown_until: string | null
          detected_at: string | null
          event_id: string | null
          population_name: string | null
          population_size: number | null
          revenue_contribution: number | null
          severity: string | null
          status: string | null
          tenant_id: string | null
          title: string | null
          topic: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["code"]
            isOneToOne: false
            referencedRelation: "cdp_insight_registry"
            referencedColumns: ["insight_code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_registry_summary"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insight_quality_summary: {
        Row: {
          codes_tested: number | null
          failed_count: number | null
          last_check_at: string | null
          pass_rate: number | null
          passed_count: number | null
          tenant_id: string | null
          total_insights: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_audit_log_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insight_registry_stats: {
        Row: {
          enabled_count: number | null
          tenant_id: string | null
          topic_count: number | null
          total_insights: number | null
          triggered_count: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insight_registry_summary: {
        Row: {
          baseline_days: number | null
          category: string | null
          code: string | null
          cooldown_days: number | null
          description: string | null
          is_enabled: boolean | null
          is_triggered: boolean | null
          last_triggered_date: string | null
          name: string | null
          owners: string[] | null
          population_type: string | null
          tenant_id: string | null
          threshold: string | null
          topic: string | null
          triggered_count: number | null
          window_days: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insight_topic_counts: {
        Row: {
          active_count: number | null
          tenant_id: string | null
          topic: string | null
          total_count: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_insights_with_actions: {
        Row: {
          confidence: number | null
          cooldown_until: string | null
          created_at: string | null
          dismiss_reason: string | null
          dismissed_at: string | null
          display_status: string | null
          id: string | null
          insight_code: string | null
          is_actionable: boolean | null
          severity: string | null
          snooze_reason: string | null
          snooze_until: string | null
          status: string | null
          tenant_id: string | null
          title: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "cdp_insight_registry"
            referencedColumns: ["insight_code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_detail"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_insight_code_fkey"
            columns: ["insight_code"]
            isOneToOne: false
            referencedRelation: "v_cdp_insight_registry_summary"
            referencedColumns: ["code"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_ltv_audit_history: {
        Row: {
          action_description: string | null
          audit_id: string | null
          change_date: string | null
          model_name: string | null
          tenant_id: string | null
          user_name: string | null
        }
        Relationships: []
      }
      v_cdp_ltv_by_cohort: {
        Row: {
          avg_orders: number | null
          avg_profit: number | null
          avg_revenue: number | null
          cohort_month: string | null
          cohort_size: number | null
          estimated_ltv_12m: number | null
          estimated_ltv_24m: number | null
          ltv_trend_vs_prev: number | null
          quality_score: string | null
          retention_rate_12m: number | null
          retention_rate_3m: number | null
          retention_rate_6m: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_ltv_by_source: {
        Row: {
          acquisition_source: string | null
          avg_ltv_12m: number | null
          avg_ltv_24m: number | null
          avg_orders: number | null
          avg_profit: number | null
          avg_revenue: number | null
          customer_count: number | null
          estimated_cac: number | null
          ltv_cac_ratio: number | null
          payback_months: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_ltv_decay_alerts: {
        Row: {
          current_value: number | null
          decay_type: string | null
          decline_percent: number | null
          population_name: string | null
          previous_value: number | null
          recommendation: string | null
          revenue_at_risk: number | null
          severity: string | null
          tenant_id: string | null
        }
        Relationships: []
      }
      v_cdp_ltv_rules: {
        Row: {
          behavior: string | null
          confidence: string | null
          ltv_12m: number | null
          ltv_24m: number | null
          segment: string | null
          tenant_id: string | null
        }
        Relationships: []
      }
      v_cdp_ltv_summary: {
        Row: {
          at_risk_count: number | null
          at_risk_equity: number | null
          avg_ltv_12m: number | null
          avg_ltv_24m: number | null
          bronze_count: number | null
          gold_count: number | null
          median_ltv_12m: number | null
          median_ltv_24m: number | null
          platinum_count: number | null
          silver_count: number | null
          tenant_id: string | null
          total_customers: number | null
          total_equity_12m: number | null
          total_equity_24m: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customer_equity_computed_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_orders_stats: {
        Row: {
          first_order_at: string | null
          last_order_at: string | null
          order_count: number | null
          tenant_id: string | null
          total_gross_revenue: number | null
          total_net_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_pending_decisions: {
        Row: {
          assigned_to: string | null
          created_at: string | null
          days_open: number | null
          decision_due: string | null
          id: string | null
          insight_source: string | null
          risk_if_ignored: number | null
          severity: string | null
          status: string | null
          tenant_id: string | null
          title: string | null
        }
        Insert: {
          assigned_to?: string | null
          created_at?: string | null
          days_open?: never
          decision_due?: string | null
          id?: string | null
          insight_source?: never
          risk_if_ignored?: never
          severity?: string | null
          status?: string | null
          tenant_id?: string | null
          title?: string | null
        }
        Update: {
          assigned_to?: string | null
          created_at?: string | null
          days_open?: never
          decision_due?: string | null
          id?: string | null
          insight_source?: never
          risk_if_ignored?: never
          severity?: string | null
          status?: string | null
          tenant_id?: string | null
          title?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_population_catalog: {
        Row: {
          created_at: string | null
          customer_count: number | null
          definition: string | null
          insight_count: number | null
          name: string | null
          population_id: string | null
          population_type: string | null
          revenue_share: number | null
          stability: string | null
          status: string | null
          tenant_id: string | null
          total_revenue: number | null
          version: number | null
        }
        Relationships: []
      }
      v_cdp_population_changelog: {
        Row: {
          action: string | null
          changed_at: string | null
          changed_by: string | null
          changes: string | null
          id: string | null
          metadata: Json | null
          population_name: string | null
          purpose: string | null
          tenant_id: string | null
          version: string | null
        }
        Insert: {
          action?: string | null
          changed_at?: string | null
          changed_by?: string | null
          changes?: string | null
          id?: string | null
          metadata?: Json | null
          population_name?: string | null
          purpose?: string | null
          tenant_id?: string | null
          version?: string | null
        }
        Update: {
          action?: string | null
          changed_at?: string | null
          changed_by?: string | null
          changes?: string | null
          id?: string | null
          metadata?: Json | null
          population_name?: string | null
          purpose?: string | null
          tenant_id?: string | null
          version?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_population_changelog_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_population_comparison: {
        Row: {
          avg_aov: number | null
          avg_frequency: number | null
          avg_margin_percent: number | null
          avg_repurchase_cycle: number | null
          avg_return_rate: number | null
          customer_count: number | null
          population_id: string | null
          population_name: string | null
          population_type: string | null
          tenant_id: string | null
          total_revenue: number | null
        }
        Relationships: []
      }
      v_cdp_population_detail: {
        Row: {
          avg_order_value: number | null
          criteria_json: Json | null
          customer_count: number | null
          customer_share: number | null
          definition: string | null
          estimated_equity: number | null
          insight_count: number | null
          last_updated: string | null
          name: string | null
          natural_language_description: string | null
          population_id: string | null
          population_type: string | null
          purchase_cycle_days: number | null
          return_rate: number | null
          revenue_share: number | null
          stability: string | null
          tenant_id: string | null
          total_revenue: number | null
          version: number | null
        }
        Relationships: []
      }
      v_cdp_population_summary: {
        Row: {
          cohort_count: number | null
          segment_count: number | null
          tenant_id: string | null
          tier_count: number | null
          total_count: number | null
          total_insights: number | null
        }
        Relationships: []
      }
      v_cdp_product_benchmark: {
        Row: {
          avg_order_value: number | null
          avg_unit_price: number | null
          category: string | null
          existing_customers: number | null
          first_sale_date: string | null
          max_price: number | null
          min_price: number | null
          new_customer_pct: number | null
          new_customers: number | null
          price_tier: string | null
          product_id: string | null
          tenant_id: string | null
          total_orders: number | null
          total_revenue: number | null
          unique_customers: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_research_stats: {
        Row: {
          avg_return_rate: number | null
          customer_count: number | null
          median_aov: number | null
          median_repurchase_cycle: number | null
          promotion_dependency: number | null
          tenant_id: string | null
          total_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_rfm_segment_summary: {
        Row: {
          avg_frequency: number | null
          avg_recency: number | null
          avg_revenue: number | null
          color: string | null
          customer_count: number | null
          description: string | null
          percentage: number | null
          potential_value: number | null
          priority: string | null
          recommended_action: string | null
          risk_value: number | null
          segment_name: string | null
          tenant_id: string | null
          total_value: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_rfm_segments: {
        Row: {
          customer_id: string | null
          first_order_at: string | null
          frequency: number | null
          frequency_score: number | null
          last_order_at: string | null
          monetary: number | null
          monetary_score: number | null
          priority: string | null
          recency_days: number | null
          recency_score: number | null
          recommended_action: string | null
          rfm_total: number | null
          segment_description: string | null
          segment_name: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_saved_research_views: {
        Row: {
          created_at: string | null
          creator: string | null
          customer_count: number | null
          description: string | null
          filter_criteria: Json | null
          id: string | null
          is_active: boolean | null
          linked_decisions: number | null
          linked_insights: number | null
          name: string | null
          purpose: string | null
          revenue_share: number | null
          tenant_id: string | null
        }
        Insert: {
          created_at?: string | null
          creator?: string | null
          customer_count?: never
          description?: string | null
          filter_criteria?: Json | null
          id?: string | null
          is_active?: boolean | null
          linked_decisions?: never
          linked_insights?: never
          name?: string | null
          purpose?: never
          revenue_share?: never
          tenant_id?: string | null
        }
        Update: {
          created_at?: string | null
          creator?: string | null
          customer_count?: never
          description?: string | null
          filter_criteria?: Json | null
          id?: string | null
          is_active?: boolean | null
          linked_decisions?: never
          linked_insights?: never
          name?: string | null
          purpose?: never
          revenue_share?: never
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_saved_views_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_segment_summaries: {
        Row: {
          avg_orders_per_customer: number | null
          avg_revenue_per_customer: number | null
          customer_count: number | null
          segment: string | null
          segment_margin: number | null
          segment_revenue: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_summary_stats: {
        Row: {
          avg_frequency: number | null
          avg_order_value: number | null
          one_time_customers: number | null
          repeat_customers: number | null
          repeat_rate: number | null
          tenant_id: string | null
          total_customers: number | null
          total_orders: number | null
          total_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_topic_summaries: {
        Row: {
          category: string | null
          critical_count: number | null
          headline: string | null
          signal_count: number | null
          tenant_id: string | null
          topic: string | null
          trend_direction: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_insight_events_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_cdp_trend_insights: {
        Row: {
          aov_change_percent: number | null
          current_aov: number | null
          current_orders: number | null
          customer_id: string | null
          previous_aov: number | null
          previous_orders: number | null
          tenant_id: string | null
          trend_type: string | null
        }
        Relationships: []
      }
      v_cdp_truth_snapshot: {
        Row: {
          active_customers: number | null
          at_risk_customers: number | null
          at_risk_pct: number | null
          at_risk_value: number | null
          avg_ltv: number | null
          ltv_cac_ratio: number | null
          snapshot_at: string | null
          tenant_id: string | null
          total_customers: number | null
          total_equity_12m: number | null
          total_equity_24m: number | null
        }
        Relationships: []
      }
      v_cdp_value_distribution: {
        Row: {
          avg_order_value: number | null
          customer_id: string | null
          order_count: number | null
          p25: number | null
          p50: number | null
          p75: number | null
          p90: number | null
          p95: number | null
          tenant_id: string | null
          total_revenue: number | null
          value_tier: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "cdp_customers"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_audit"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_customer_id_fkey"
            columns: ["customer_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_customer_research"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_channel_analytics_total: {
        Row: {
          gross_revenue: number | null
          net_revenue: number | null
          tenant_id: string | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "channel_analytics_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: true
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_channel_daily_revenue: {
        Row: {
          avg_order_value: number | null
          channel: string | null
          cogs: number | null
          gross_margin: number | null
          gross_revenue: number | null
          net_revenue: number | null
          order_count: number | null
          revenue_date: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_channel_performance: {
        Row: {
          channel: string | null
          cogs: number | null
          gross_margin: number | null
          gross_revenue: number | null
          net_revenue: number | null
          order_count: number | null
          tenant_id: string | null
          total_fees: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_channel_pl_summary: {
        Row: {
          channel: string | null
          cm_percent: number | null
          cogs: number | null
          contribution_margin: number | null
          gross_margin: number | null
          gross_revenue: number | null
          marketing_spend: number | null
          net_revenue: number | null
          order_count: number | null
          period: string | null
          roas: number | null
          tenant_id: string | null
          unique_customers: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_compute_job_health: {
        Row: {
          avg_duration_ms_7d: number | null
          failed_24h: number | null
          health_status: string | null
          job_name: string | null
          last_failure_at: string | null
          last_success_at: string | null
          runs_24h: number | null
          success_24h: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "compute_job_runs_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_ct_truth_snapshot: {
        Row: {
          critical_open: number | null
          decisions_in_progress: number | null
          decisions_pending: number | null
          high_open: number | null
          medium_open: number | null
          overdue_count: number | null
          snapshot_at: string | null
          tenant_id: string | null
          total_impact_value: number | null
          total_open: number | null
        }
        Relationships: [
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "alert_instances_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_customer_ar_summary: {
        Row: {
          avg_payment_days: number | null
          email: string | null
          id: string | null
          last_invoice_date: string | null
          name: string | null
          open_invoice_count: number | null
          overdue_ar: number | null
          overdue_invoice_count: number | null
          payment_terms: number | null
          phone: string | null
          tenant_id: string | null
          total_ar: number | null
          total_invoice_count: number | null
        }
        Relationships: [
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "customers_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_decision_audit_trail: {
        Row: {
          audit_status: string | null
          category: string | null
          compute_function_name: string | null
          compute_function_version: string | null
          confidence_level: string | null
          data_quality_score: number | null
          decision_created_at: string | null
          decision_id: string | null
          input_row_counts: Json | null
          period_end: string | null
          period_start: string | null
          severity: string | null
          snapshot_computed_at: string | null
          status: string | null
          tenant_id: string | null
          title: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_decision_cards_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_decision_effectiveness: {
        Row: {
          avg_accuracy: number | null
          decision_type: string | null
          failed_count: number | null
          pending_count: number | null
          success_rate: number | null
          successful_count: number | null
          tenant_id: string | null
          total_actual_value: number | null
          total_decisions: number | null
          total_predicted_value: number | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_decision_latest: {
        Row: {
          as_of: string | null
          authority: string | null
          calculation_hash: string | null
          confidence: number | null
          created_at: string | null
          created_by: string | null
          currency: string | null
          derived_from: Json | null
          dimensions: Json | null
          entity_id: string | null
          entity_type: string | null
          id: string | null
          metric_code: string | null
          metric_version: number | null
          supersedes_id: string | null
          tenant_id: string | null
          truth_level: string | null
          value: number | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_snapshots_supersedes_id_fkey"
            columns: ["supersedes_id"]
            isOneToOne: false
            referencedRelation: "decision_snapshots"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_snapshots_supersedes_id_fkey"
            columns: ["supersedes_id"]
            isOneToOne: false
            referencedRelation: "v_decision_latest"
            referencedColumns: ["id"]
          },
        ]
      }
      v_decision_outcome_stats: {
        Row: {
          auto_measured_count: number | null
          avg_actual_impact: number | null
          decision_id: string | null
          latest_measurement: string | null
          measurement_count: number | null
          negative_count: number | null
          neutral_count: number | null
          outcome_status: string | null
          positive_count: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "decision_outcomes_decision_audit_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "decision_audit_log"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcomes_decision_audit_id_fkey"
            columns: ["decision_id"]
            isOneToOne: false
            referencedRelation: "decisions_pending_followup"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcomes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_decision_pending_followup: {
        Row: {
          days_until_due: number | null
          decided_at: string | null
          decision_id: string | null
          decision_title: string | null
          decision_type: string | null
          followup_due_date: string | null
          id: string | null
          outcome_verdict: string | null
          predicted_impact_amount: number | null
          tenant_id: string | null
          urgency_status: string | null
        }
        Insert: {
          days_until_due?: never
          decided_at?: string | null
          decision_id?: string | null
          decision_title?: string | null
          decision_type?: string | null
          followup_due_date?: string | null
          id?: string | null
          outcome_verdict?: string | null
          predicted_impact_amount?: number | null
          tenant_id?: string | null
          urgency_status?: never
        }
        Update: {
          days_until_due?: never
          decided_at?: string | null
          decision_id?: string | null
          decision_title?: string | null
          decision_type?: string | null
          followup_due_date?: string | null
          id?: string | null
          outcome_verdict?: string | null
          predicted_impact_amount?: number | null
          tenant_id?: string | null
          urgency_status?: never
        }
        Relationships: [
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "decision_outcome_records_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_executive_health_scores: {
        Row: {
          ccc: number | null
          critical_count: number | null
          dso: number | null
          ebitda_margin: number | null
          efficiency_score: number | null
          efficiency_status: string | null
          good_count: number | null
          gross_margin: number | null
          growth_score: number | null
          growth_status: string | null
          liquidity_score: number | null
          liquidity_status: string | null
          overall_score: number | null
          overall_status: string | null
          profitability_score: number | null
          profitability_status: string | null
          receivables_score: number | null
          receivables_status: string | null
          revenue_yoy: number | null
          runway_months: number | null
          snapshot_at: string | null
          stability_score: number | null
          stability_status: string | null
          tenant_id: string | null
          warning_count: number | null
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_expense_plan_summary: {
        Row: {
          data_completeness_percent: number | null
          fixed_baseline: number | null
          fixed_cost_items: number | null
          month: number | null
          tenant_id: string | null
          total_actual: number | null
          total_planned: number | null
          variable_actual: number | null
          variable_actual_items: number | null
          variable_estimate_items: number | null
          variable_estimated: number | null
          variance: number | null
          year: number | null
        }
        Relationships: []
      }
      v_expense_variance_alerts: {
        Row: {
          actual: number | null
          alert_month: string | null
          alert_status: string | null
          category: string | null
          estimated: number | null
          name: string | null
          tenant_id: string | null
          variance: number | null
          variance_percent: number | null
        }
        Relationships: [
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_expenses_by_category_monthly: {
        Row: {
          category: Database["public"]["Enums"]["expense_category"] | null
          expense_count: number | null
          expense_date: string | null
          is_recurring: boolean | null
          month_start: string | null
          tenant_id: string | null
          total_amount: number | null
        }
        Relationships: [
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_fdp_finance_summary: {
        Row: {
          avg_order_value: number | null
          cac: number | null
          contribution_margin: number | null
          contribution_margin_percent: number | null
          gross_profit: number | null
          gross_revenue: number | null
          net_revenue: number | null
          tenant_id: string | null
          total_cogs: number | null
          total_fees: number | null
          total_marketing_spend: number | null
          total_orders: number | null
          unique_customers: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_fdp_truth_snapshot: {
        Row: {
          accounts_payable: number | null
          accounts_receivable: number | null
          aov: number | null
          ap_overdue: number | null
          ar_overdue: number | null
          cash_conversion_cycle: number | null
          cash_forecast_7d: number | null
          cash_in_bank: number | null
          contribution_margin: number | null
          contribution_margin_pct: number | null
          dio: number | null
          dpo: number | null
          dso: number | null
          ebitda: number | null
          gross_margin_pct: number | null
          gross_profit: number | null
          locked_cash_ads: number | null
          locked_cash_inventory: number | null
          locked_cash_ops: number | null
          locked_cash_total: number | null
          net_revenue: number | null
          period_end: string | null
          period_start: string | null
          runway_months: number | null
          snapshot_at: string | null
          tenant_id: string | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_financial_insights: {
        Row: {
          ar_description: string | null
          ar_show: boolean | null
          ar_status: string | null
          ar_title: string | null
          cash_description: string | null
          cash_show: boolean | null
          cash_status: string | null
          cash_title: string | null
          dso_description: string | null
          dso_show: boolean | null
          dso_status: string | null
          dso_title: string | null
          gross_margin_description: string | null
          gross_margin_show: boolean | null
          gross_margin_status: string | null
          gross_margin_title: string | null
          net_margin_description: string | null
          net_margin_show: boolean | null
          net_margin_status: string | null
          net_margin_title: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_financial_ratios_with_targets: {
        Row: {
          actual_value: number | null
          comparison_type: string | null
          is_on_target: boolean | null
          progress_percent: number | null
          ratio_code: string | null
          ratio_name: string | null
          target_value: number | null
          tenant_id: string | null
          unit: string | null
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_financial_report_kpis: {
        Row: {
          cash_runway_months: number | null
          cash_today: number | null
          cash_today_m: number | null
          contribution_margin: number | null
          contribution_margin_percent: number | null
          dso: number | null
          ebitda: number | null
          ebitda_margin_percent: number | null
          gross_margin_percent: number | null
          gross_profit: number | null
          gross_profit_m: number | null
          net_margin_percent: number | null
          net_revenue: number | null
          net_revenue_m: number | null
          overdue_ar: number | null
          overdue_ar_percent: number | null
          snapshot_at: string | null
          tenant_id: string | null
          total_ar: number | null
          total_cost: number | null
          total_cost_m: number | null
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_governance_dashboard: {
        Row: {
          category: string | null
          critical_unresolved: number | null
          deprecated_metrics: number | null
          module: string | null
          total_metrics: number | null
          violations_7d: number | null
        }
        Relationships: []
      }
      v_invoice_settled_paid: {
        Row: {
          invoice_id: string | null
          paid_amount_settled: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_invoice_settled_status: {
        Row: {
          invoice_id: string | null
          invoice_number: string | null
          remaining_amount: number | null
          settled_paid_amount: number | null
          settled_status: string | null
          tenant_id: string | null
          total_amount: number | null
          truth_level: string | null
        }
        Relationships: [
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "invoices_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_latest_central_metrics: {
        Row: {
          ar_aging_30d: number | null
          ar_aging_60d: number | null
          ar_aging_90d: number | null
          ar_aging_current: number | null
          avg_order_value: number | null
          cac: number | null
          cash_7d_forecast: number | null
          cash_runway_months: number | null
          cash_today: number | null
          ccc: number | null
          computation_duration_ms: number | null
          computed_by: string | null
          contribution_margin: number | null
          contribution_margin_percent: number | null
          created_at: string | null
          dio: number | null
          dpo: number | null
          dso: number | null
          ebitda: number | null
          ebitda_margin_percent: number | null
          gross_margin_percent: number | null
          gross_profit: number | null
          id: string | null
          ltv: number | null
          ltv_cac_ratio: number | null
          marketing_roas: number | null
          net_revenue: number | null
          overdue_ap: number | null
          overdue_ar: number | null
          period_end: string | null
          period_start: string | null
          repeat_customer_rate: number | null
          slow_moving_inventory: number | null
          snapshot_at: string | null
          tenant_id: string | null
          total_ap: number | null
          total_ar: number | null
          total_customers: number | null
          total_inventory_value: number | null
          total_marketing_spend: number | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "central_metrics_snapshots_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_locked_cash_detail: {
        Row: {
          lock_type: string | null
          locked_amount: number | null
          product_name: string | null
          quantity: number | null
          reference_date: string | null
          sku: string | null
          status: string | null
          tenant_id: string | null
        }
        Relationships: []
      }
      v_mdp_campaign_attribution: {
        Row: {
          attributed_customers: number | null
          attributed_margin: number | null
          attributed_orders: number | null
          attributed_revenue: number | null
          cac: number | null
          channel: string | null
          clicks: number | null
          impressions: number | null
          period: string | null
          profit_roas: number | null
          roas: number | null
          spend: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_campaign_performance: {
        Row: {
          campaign_id: string | null
          campaign_name: string | null
          campaign_type: string | null
          channel: string | null
          clicks_estimated: number | null
          clicks_is_estimated: boolean | null
          conversion_rate: number | null
          cpa: number | null
          cpc: number | null
          ctr: number | null
          end_date: string | null
          impressions_estimated: number | null
          impressions_is_estimated: boolean | null
          leads_estimated: number | null
          leads_is_estimated: boolean | null
          orders: number | null
          revenue: number | null
          roas: number | null
          spend: number | null
          start_date: string | null
          status: string | null
          tenant_id: string | null
          total_revenue: number | null
          total_spend: number | null
        }
        Insert: {
          campaign_id?: string | null
          campaign_name?: string | null
          campaign_type?: string | null
          channel?: string | null
          clicks_estimated?: never
          clicks_is_estimated?: never
          conversion_rate?: never
          cpa?: never
          cpc?: never
          ctr?: never
          end_date?: string | null
          impressions_estimated?: never
          impressions_is_estimated?: never
          leads_estimated?: never
          leads_is_estimated?: never
          orders?: never
          revenue?: never
          roas?: never
          spend?: number | null
          start_date?: string | null
          status?: string | null
          tenant_id?: string | null
          total_revenue?: never
          total_spend?: number | null
        }
        Update: {
          campaign_id?: string | null
          campaign_name?: string | null
          campaign_type?: string | null
          channel?: string | null
          clicks_estimated?: never
          clicks_is_estimated?: never
          conversion_rate?: never
          cpa?: never
          cpc?: never
          ctr?: never
          end_date?: string | null
          impressions_estimated?: never
          impressions_is_estimated?: never
          leads_estimated?: never
          leads_is_estimated?: never
          orders?: never
          revenue?: never
          roas?: never
          spend?: number | null
          start_date?: string | null
          status?: string | null
          tenant_id?: string | null
          total_revenue?: never
          total_spend?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_ceo_snapshot: {
        Row: {
          cash_conversion_rate: number | null
          cash_locked: number | null
          cash_pending: number | null
          cash_received: number | null
          data_confidence: string | null
          immediate_actions: number | null
          is_creating_money: boolean | null
          last_updated: string | null
          margin_trend: string | null
          net_margin_position: number | null
          tenant_id: string | null
          today_actions: number | null
          total_actions: number | null
          total_cash_at_risk: number | null
          total_margin_created: number | null
          total_margin_destroyed: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_decision_signals: {
        Row: {
          ad_spend: number | null
          channel: string | null
          clicks: number | null
          computed_at: string | null
          contribution_margin: number | null
          contribution_margin_percent: number | null
          conversions: number | null
          decision_owner: string | null
          gross_revenue: number | null
          impressions: number | null
          net_revenue: number | null
          order_count: number | null
          profit_roas: number | null
          recommended_action: string | null
          tenant_id: string | null
          urgency: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_funnel_summary: {
        Row: {
          clicks: number | null
          clicks_cvr: number | null
          clicks_drop: number | null
          impressions: number | null
          impressions_cvr: number | null
          impressions_drop: number | null
          is_estimated: boolean | null
          leads: number | null
          leads_cvr: number | null
          leads_drop: number | null
          orders: number | null
          orders_cvr: number | null
          orders_drop: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_marketing_funnel: {
        Row: {
          atc_rate: number | null
          checkout_rate: number | null
          ctr: number | null
          cvr: number | null
          estimated_add_to_cart: number | null
          report_date: string | null
          tenant_id: string | null
          total_clicks: number | null
          total_impressions: number | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "marketing_expenses_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_mode_summary: {
        Row: {
          active_campaigns: number | null
          execution_alerts_count: number | null
          overall_conversion: number | null
          overall_cpa: number | null
          overall_ctr: number | null
          overall_roas: number | null
          tenant_id: string | null
          total_leads: number | null
          total_orders: number | null
          total_revenue: number | null
          total_spend: number | null
        }
        Relationships: [
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_order_items_summary: {
        Row: {
          line_cogs: number | null
          line_margin: number | null
          line_revenue: number | null
          order_id: string | null
          qty: number | null
          sku: string | null
          tenant_id: string | null
          unit_cogs: number | null
          unit_price: number | null
        }
        Insert: {
          line_cogs?: number | null
          line_margin?: number | null
          line_revenue?: number | null
          order_id?: string | null
          qty?: number | null
          sku?: string | null
          tenant_id?: string | null
          unit_cogs?: number | null
          unit_price?: number | null
        }
        Update: {
          line_cogs?: number | null
          line_margin?: number | null
          line_revenue?: number | null
          order_id?: string | null
          qty?: number | null
          sku?: string | null
          tenant_id?: string | null
          unit_cogs?: number | null
          unit_price?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_order_items_order_id_fkey"
            columns: ["order_id"]
            isOneToOne: false
            referencedRelation: "cdp_orders"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_order_items_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_platform_ads_summary: {
        Row: {
          acos: number | null
          add_to_cart: number | null
          atc_rate: number | null
          budget_month: number | null
          budget_utilization: number | null
          checkout_rate: number | null
          checkouts: number | null
          clicks: number | null
          cpa: number | null
          cpa_trend: number | null
          cpc: number | null
          cpm: number | null
          ctr: number | null
          cvr: number | null
          impressions: number | null
          is_active: boolean | null
          orders: number | null
          platform: string | null
          platform_icon: string | null
          quality_score: number | null
          reach: number | null
          relevance_score: number | null
          report_date: string | null
          revenue: number | null
          roas: number | null
          roas_trend: number | null
          spend_month: number | null
          spend_today: number | null
          spend_trend: number | null
          tenant_id: string | null
        }
        Insert: {
          acos?: number | null
          add_to_cart?: number | null
          atc_rate?: number | null
          budget_month?: number | null
          budget_utilization?: number | null
          checkout_rate?: number | null
          checkouts?: number | null
          clicks?: number | null
          cpa?: number | null
          cpa_trend?: number | null
          cpc?: number | null
          cpm?: number | null
          ctr?: number | null
          cvr?: number | null
          impressions?: number | null
          is_active?: never
          orders?: number | null
          platform?: string | null
          platform_icon?: string | null
          quality_score?: number | null
          reach?: number | null
          relevance_score?: number | null
          report_date?: string | null
          revenue?: number | null
          roas?: number | null
          roas_trend?: number | null
          spend_month?: number | null
          spend_today?: number | null
          spend_trend?: number | null
          tenant_id?: string | null
        }
        Update: {
          acos?: number | null
          add_to_cart?: number | null
          atc_rate?: number | null
          budget_month?: number | null
          budget_utilization?: number | null
          checkout_rate?: number | null
          checkouts?: number | null
          clicks?: number | null
          cpa?: number | null
          cpa_trend?: number | null
          cpc?: number | null
          cpm?: number | null
          ctr?: number | null
          cvr?: number | null
          impressions?: number | null
          is_active?: never
          orders?: number | null
          platform?: string | null
          platform_icon?: string | null
          quality_score?: number | null
          reach?: number | null
          relevance_score?: number | null
          report_date?: string | null
          revenue?: number | null
          roas?: number | null
          roas_trend?: number | null
          spend_month?: number | null
          spend_today?: number | null
          spend_trend?: number | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "platform_ads_daily_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_scale_opportunities: {
        Row: {
          ad_spend: number | null
          channel: string | null
          computed_at: string | null
          contribution_margin: number | null
          contribution_margin_percent: number | null
          gross_revenue: number | null
          is_scalable: boolean | null
          min_cash_conversion: number | null
          min_cm_percent: number | null
          net_revenue: number | null
          profit_roas: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_mdp_truth_snapshot: {
        Row: {
          blended_roas: number | null
          channel_breakdown: Json | null
          clicks: number | null
          cpa: number | null
          ctr_pct: number | null
          impressions: number | null
          revenue_attributed: number | null
          snapshot_at: string | null
          snapshot_date: string | null
          tenant_id: string | null
          total_ad_spend: number | null
          total_orders: number | null
        }
        Relationships: [
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "promotion_campaigns_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_metric_changelog: {
        Row: {
          business_context: string | null
          change_reason: string | null
          changed_by: string | null
          current_formula: string | null
          current_version: string | null
          effective_from: string | null
          history_effective_from: string | null
          history_effective_until: string | null
          history_formula: string | null
          history_version: string | null
          metric_code: string | null
          metric_name: string | null
          metric_name_vi: string | null
          module: string | null
          owner: string | null
        }
        Relationships: []
      }
      v_pending_approvals: {
        Row: {
          action: string | null
          approvals_remaining: number | null
          created_at: string | null
          current_approvals: number | null
          expires_at: string | null
          id: string | null
          policy_id: string | null
          policy_name: string | null
          policy_type: string | null
          requested_by: string | null
          requester_name: string | null
          required_approvals: number | null
          resource_data: Json | null
          resource_id: string | null
          resource_type: string | null
          status: string | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "approval_requests_policy_id_fkey"
            columns: ["policy_id"]
            isOneToOne: false
            referencedRelation: "enterprise_policies"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "approval_requests_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_pl_monthly_summary: {
        Row: {
          cogs: number | null
          cogs_m: number | null
          gross_margin_pct: number | null
          gross_profit: number | null
          gross_profit_m: number | null
          gross_sales: number | null
          net_income: number | null
          net_income_m: number | null
          net_margin_pct: number | null
          net_sales: number | null
          net_sales_m: number | null
          operating_income: number | null
          operating_margin_pct: number | null
          opex_m: number | null
          period_month: number | null
          period_year: number | null
          tenant_id: string | null
          total_opex: number | null
          year_month: string | null
        }
        Insert: {
          cogs?: never
          cogs_m?: never
          gross_margin_pct?: never
          gross_profit?: never
          gross_profit_m?: never
          gross_sales?: never
          net_income?: never
          net_income_m?: never
          net_margin_pct?: never
          net_sales?: never
          net_sales_m?: never
          operating_income?: never
          operating_margin_pct?: never
          opex_m?: never
          period_month?: number | null
          period_year?: number | null
          tenant_id?: string | null
          total_opex?: never
          year_month?: never
        }
        Update: {
          cogs?: never
          cogs_m?: never
          gross_margin_pct?: never
          gross_profit?: never
          gross_profit_m?: never
          gross_sales?: never
          net_income?: never
          net_income_m?: never
          net_margin_pct?: never
          net_sales?: never
          net_sales_m?: never
          operating_income?: never
          operating_margin_pct?: never
          opex_m?: never
          period_month?: number | null
          period_year?: number | null
          tenant_id?: string | null
          total_opex?: never
          year_month?: never
        }
        Relationships: [
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "pl_report_cache_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_retail_concentration_risk: {
        Row: {
          category_concentration: Json | null
          channel_concentration: Json | null
          customer_concentration: Json | null
          max_seasonality_index: number | null
          seasonal_pattern: Json | null
          sku_concentration: Json | null
          tenant_id: string | null
          top1_category_pct: number | null
          top1_channel_pct: number | null
          top10_customer_pct: number | null
          top5_sku_margin_pct: number | null
        }
        Relationships: []
      }
      v_revenue_channel_daily: {
        Row: {
          channel: string | null
          order_count: number | null
          order_date: string | null
          tenant_id: string | null
          total_gross_revenue: number | null
          total_net_revenue: number | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_risk_radar_summary: {
        Row: {
          calculation_details: Json | null
          credit_score: number | null
          credit_severity: string | null
          liquidity_score: number | null
          liquidity_severity: string | null
          market_score: number | null
          market_severity: string | null
          operational_score: number | null
          operational_severity: string | null
          overall_score: number | null
          score_date: string | null
          tenant_id: string | null
        }
        Insert: {
          calculation_details?: Json | null
          credit_score?: number | null
          credit_severity?: never
          liquidity_score?: number | null
          liquidity_severity?: never
          market_score?: number | null
          market_severity?: never
          operational_score?: number | null
          operational_severity?: never
          overall_score?: number | null
          score_date?: string | null
          tenant_id?: string | null
        }
        Update: {
          calculation_details?: Json | null
          credit_score?: number | null
          credit_severity?: never
          liquidity_score?: number | null
          liquidity_severity?: never
          market_score?: number | null
          market_severity?: never
          operational_score?: number | null
          operational_severity?: never
          overall_score?: number | null
          score_date?: string | null
          tenant_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "risk_scores_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_rolling_forecast_summary: {
        Row: {
          average_confidence: number | null
          by_month_data: Json | null
          expense_actual: number | null
          expense_budget: number | null
          expense_forecast: number | null
          forecast_accuracy: number | null
          revenue_actual: number | null
          revenue_budget: number | null
          revenue_forecast: number | null
          tenant_id: string | null
          total_actual: number | null
          total_budget: number | null
          total_forecast: number | null
          total_variance: number | null
        }
        Relationships: [
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "rolling_forecasts_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_upcoming_payment_alerts: {
        Row: {
          alert_level: string | null
          category: string | null
          days_until_due: number | null
          id: string | null
          monthly_amount: number | null
          name: string | null
          next_payment_date: string | null
          payment_due_day: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "expense_baselines_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_variance_orders_monthly: {
        Row: {
          month_start: string | null
          monthly_net_revenue: number | null
          monthly_orders: number | null
          monthly_revenue: number | null
          tenant_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "cdp_orders_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      v_variance_with_status: {
        Row: {
          action_taken: string | null
          actual_amount: number | null
          analysis_period: string | null
          budget_amount: number | null
          category: string | null
          channel: string | null
          created_at: string | null
          id: string | null
          is_favorable: boolean | null
          is_significant: boolean | null
          period_type: string | null
          prior_period_amount: number | null
          prior_year_amount: number | null
          requires_action: boolean | null
          subcategory: string | null
          tenant_id: string | null
          updated_at: string | null
          variance_drivers: Json | null
          variance_pct: number | null
          variance_pct_budget: number | null
          variance_to_budget: number | null
          variance_to_prior: number | null
          yoy_variance: number | null
          yoy_variance_pct: number | null
        }
        Insert: {
          action_taken?: string | null
          actual_amount?: number | null
          analysis_period?: string | null
          budget_amount?: number | null
          category?: string | null
          channel?: string | null
          created_at?: string | null
          id?: string | null
          is_favorable?: never
          is_significant?: boolean | null
          period_type?: string | null
          prior_period_amount?: number | null
          prior_year_amount?: number | null
          requires_action?: boolean | null
          subcategory?: string | null
          tenant_id?: string | null
          updated_at?: string | null
          variance_drivers?: Json | null
          variance_pct?: never
          variance_pct_budget?: number | null
          variance_to_budget?: number | null
          variance_to_prior?: number | null
          yoy_variance?: number | null
          yoy_variance_pct?: number | null
        }
        Update: {
          action_taken?: string | null
          actual_amount?: number | null
          analysis_period?: string | null
          budget_amount?: number | null
          category?: string | null
          channel?: string | null
          created_at?: string | null
          id?: string | null
          is_favorable?: never
          is_significant?: boolean | null
          period_type?: string | null
          prior_period_amount?: number | null
          prior_year_amount?: number | null
          requires_action?: boolean | null
          subcategory?: string | null
          tenant_id?: string | null
          updated_at?: string | null
          variance_drivers?: Json | null
          variance_pct?: never
          variance_pct_budget?: number | null
          variance_to_budget?: number | null
          variance_to_prior?: number | null
          yoy_variance?: number | null
          yoy_variance_pct?: number | null
        }
        Relationships: [
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "variance_analysis_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
      vendor_credit_notes_view: {
        Row: {
          applied_amount: number | null
          approved_at: string | null
          approved_by: string | null
          created_at: string | null
          created_by: string | null
          currency: string | null
          description: string | null
          direction: string | null
          discount_amount: number | null
          due_date: string | null
          exchange_rate: number | null
          gl_account_id: string | null
          id: string | null
          metadata: Json | null
          note_date: string | null
          note_number: string | null
          note_type: string | null
          notes: string | null
          original_bill_id: string | null
          original_invoice_id: string | null
          original_order_id: string | null
          party_address: string | null
          party_email: string | null
          party_id: string | null
          party_name: string | null
          party_tax_code: string | null
          reason: string | null
          reference_number: string | null
          remaining_amount: number | null
          status: string | null
          subtotal: number | null
          tax_amount: number | null
          tenant_id: string | null
          terms: string | null
          total_amount: number | null
          updated_at: string | null
        }
        Insert: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string | null
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction?: string | null
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string | null
          metadata?: Json | null
          note_date?: string | null
          note_number?: string | null
          note_type?: string | null
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id?: string | null
          terms?: string | null
          total_amount?: number | null
          updated_at?: string | null
        }
        Update: {
          applied_amount?: number | null
          approved_at?: string | null
          approved_by?: string | null
          created_at?: string | null
          created_by?: string | null
          currency?: string | null
          description?: string | null
          direction?: string | null
          discount_amount?: number | null
          due_date?: string | null
          exchange_rate?: number | null
          gl_account_id?: string | null
          id?: string | null
          metadata?: Json | null
          note_date?: string | null
          note_number?: string | null
          note_type?: string | null
          notes?: string | null
          original_bill_id?: string | null
          original_invoice_id?: string | null
          original_order_id?: string | null
          party_address?: string | null
          party_email?: string | null
          party_id?: string | null
          party_name?: string | null
          party_tax_code?: string | null
          reason?: string | null
          reference_number?: string | null
          remaining_amount?: number | null
          status?: string | null
          subtotal?: number | null
          tax_amount?: number | null
          tenant_id?: string | null
          terms?: string | null
          total_amount?: number | null
          updated_at?: string | null
        }
        Relationships: [
          {
            foreignKeyName: "adjustment_notes_gl_account_id_fkey"
            columns: ["gl_account_id"]
            isOneToOne: false
            referencedRelation: "gl_accounts"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "ap_aging"
            referencedColumns: ["bill_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_bill_id_fkey"
            columns: ["original_bill_id"]
            isOneToOne: false
            referencedRelation: "bills"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "ar_aging"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_board_report_invoices"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_paid"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_original_invoice_id_fkey"
            columns: ["original_invoice_id"]
            isOneToOne: false
            referencedRelation: "v_invoice_settled_status"
            referencedColumns: ["invoice_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "tenants"
            referencedColumns: ["id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_decay_alerts"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_cdp_ltv_rules"
            referencedColumns: ["tenant_id"]
          },
          {
            foreignKeyName: "adjustment_notes_tenant_id_fkey"
            columns: ["tenant_id"]
            isOneToOne: false
            referencedRelation: "v_retail_concentration_risk"
            referencedColumns: ["tenant_id"]
          },
        ]
      }
    }
    Functions: {
      apply_tenant_migration: {
        Args: {
          p_description?: string
          p_migration_name: string
          p_migration_sql: string
        }
        Returns: Json
      }
      attach_evidence_to_decision: {
        Args: {
          p_confidence?: string
          p_decision_id: string
          p_duration_ms?: number
          p_function_name: string
          p_function_version: string
          p_input_counts?: Json
          p_input_hash?: Json
          p_period_end: string
          p_period_start: string
          p_quality_score?: number
          p_snapshot_ids: string[]
          p_snapshot_table: string
          p_tenant_id: string
        }
        Returns: string
      }
      auto_escalate_alerts: { Args: never; Returns: undefined }
      auto_post_journal_entry: {
        Args: { p_entry_id: string }
        Returns: boolean
      }
      batch_recalculate_metrics: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      calculate_ap_aging_detail: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: {
          current_amount: number
          days_1_30: number
          days_31_60: number
          days_61_90: number
          over_90_days: number
          total_outstanding: number
          vendor_id: string
          vendor_name: string
        }[]
      }
      calculate_ar_aging_detail: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: {
          current_amount: number
          customer_id: string
          customer_name: string
          days_1_30: number
          days_31_60: number
          days_61_90: number
          over_90_days: number
          total_outstanding: number
        }[]
      }
      calculate_asset_depreciation: {
        Args: { p_asset_id: string }
        Returns: {
          accumulated_amount: number
          depreciation_amount: number
          period_date: string
          remaining_value: number
        }[]
      }
      calculate_decision_patterns: {
        Args: { p_tenant_id: string }
        Returns: Json
      }
      calculate_object_metrics: {
        Args: { p_object_id: string }
        Returns: undefined
      }
      calculate_tenant_health_score: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      calculate_trend_metrics: { Args: { p_values: number[] }; Returns: Json }
      cdp_attach_data_quality_to_insights: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_auto_decisions_from_clusters: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_auto_link_insights_to_decisions: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_build_cohort_membership: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_build_customer_equity: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: Json
      }
      cdp_build_customer_metrics_daily: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: number
      }
      cdp_build_customer_metrics_rolling: {
        Args: { p_as_of_date: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_build_evidence_pack_product_demand: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_build_product_demand_clusters: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_build_value_tiers: {
        Args: { p_as_of_date: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_calculate_customer_ltv: {
        Args: {
          p_horizon_months?: number
          p_model_id?: string
          p_tenant_id: string
        }
        Returns: {
          aov_factor: number
          base_value: number
          calculation_method: string
          confidence_score: number
          customer_id: string
          customer_name: string
          discount_factor: number
          first_order_date: string
          last_order_date: string
          ltv_12m: number
          ltv_24m: number
          ltv_36m: number
          order_count: number
          retention_factor: number
          risk_factor: number
        }[]
      }
      cdp_check_insight_cooldown: {
        Args: {
          p_as_of_date: string
          p_cooldown_days?: number
          p_insight_code: string
          p_population_ref: Json
          p_tenant_id: string
        }
        Returns: boolean
      }
      cdp_compare_ltv_scenarios: {
        Args: {
          p_base_model_id: string
          p_scenarios?: Json
          p_tenant_id: string
        }
        Returns: {
          avg_ltv_12m: number
          delta_percent_12m: number
          delta_vs_base_12m: number
          scenario_name: string
          total_customers: number
          total_equity_12m: number
          total_equity_24m: number
        }[]
      }
      cdp_compute_data_quality_daily: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_count_active_customers: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: number
      }
      cdp_create_decision_cards_from_insights: {
        Args: {
          p_as_of_date: string
          p_baseline_days?: number
          p_tenant_id: string
          p_window_days?: number
        }
        Returns: number
      }
      cdp_customer_channel_stats: {
        Args: { p_customer_id: string }
        Returns: {
          channel: string
          order_count: number
          total_value: number
        }[]
      }
      cdp_detect_ltv_decay: {
        Args: { p_tenant_id: string; p_threshold_percent?: number }
        Returns: {
          current_value: number
          decay_type: string
          decline_percent: number
          population_name: string
          previous_value: number
          recommendation: string
          revenue_at_risk: number
          severity: string
        }[]
      }
      cdp_detect_margin_drift: {
        Args: {
          p_baseline_days?: number
          p_tenant_id: string
          p_window_days?: number
        }
        Returns: {
          out_action_owner: string
          out_baseline_margin: number
          out_business_implication: string
          out_change_percent: number
          out_code: string
          out_current_margin: number
          out_customer_count: number
          out_detected: boolean
          out_drivers: Json
          out_estimated_impact: number
          out_margin_loss: number
          out_recommended_action: string
          out_revenue_contribution: number
          out_sample_customers: Json
          out_urgency: string
        }[]
      }
      cdp_evaluate_segments: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: {
          customer_count: number
          segment_id: string
          segment_name: string
        }[]
      }
      cdp_format_currency: { Args: { amount: number }; Returns: string }
      cdp_generate_churn_signals: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      cdp_get_actual_revenue_for_calibration: {
        Args: { p_month?: number; p_tenant_id: string; p_year?: number }
        Returns: {
          actual_margin: number
          actual_revenue: number
          confidence_level: string
          data_source: string
          forecast_variance_percent: number
          is_cross_module: boolean
          is_finalized: boolean
          period_month: number
          period_year: number
        }[]
      }
      cdp_get_customer_acquisition_source: {
        Args: { p_customer_id: string; p_tenant_id: string }
        Returns: {
          acquisition_channel: string
          acquisition_cost: number
          acquisition_date: string
          campaign_name: string
          confidence_level: string
          data_source: string
          is_cross_module: boolean
        }[]
      }
      cdp_insert_insight_event: {
        Args: {
          p_as_of_date: string
          p_cooldown_days: number
          p_headline: string
          p_impact_snapshot: Json
          p_insight_code: string
          p_metric_snapshot: Json
          p_n_customers: number
          p_population_ref: Json
          p_population_type: string
          p_run_id: string
          p_tenant_id: string
        }
        Returns: boolean
      }
      cdp_populate_customer_identities: {
        Args: { p_tenant_id: string }
        Returns: undefined
      }
      cdp_populate_rolling_metrics: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_push_revenue_to_fdp: {
        Args: {
          p_equity_12m: number
          p_fdp_scenario_id?: string
          p_quarterly_weights?: Json
          p_tenant_id: string
        }
        Returns: string
      }
      cdp_push_segment_ltv_to_mdp: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      cdp_refresh_demand_insights: { Args: never; Returns: undefined }
      cdp_refresh_mvs: { Args: never; Returns: undefined }
      cdp_run_daily: {
        Args: { p_as_of_date: string; p_tenant_id: string }
        Returns: undefined
      }
      cdp_run_daily_all: { Args: { p_as_of_date: string }; Returns: undefined }
      cdp_run_daily_build: {
        Args: { p_as_of_date: string; p_tenant_id: string }
        Returns: Json
      }
      cdp_run_full_daily_pipeline: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: Json
      }
      cdp_run_insight_detection: {
        Args: { p_tenant_id: string }
        Returns: {
          code: string
          details: string
          is_detected: boolean
        }[]
      }
      cdp_run_insights: {
        Args: {
          p_as_of_date: string
          p_baseline_days?: number
          p_tenant_id: string
          p_window_days?: number
        }
        Returns: string
      }
      cdp_run_product_demand_insights: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: number
      }
      cdp_run_product_demand_pipeline: {
        Args: { p_as_of_date?: string; p_tenant_id: string }
        Returns: Json
      }
      cdp_seed_product_demand_registry: {
        Args: { p_tenant_id: string }
        Returns: undefined
      }
      cdp_toggle_insight_enabled: {
        Args: { p_enabled: boolean; p_insight_code: string }
        Returns: undefined
      }
      cdp_validate_insight_accuracy: {
        Args: { p_insight_code?: string; p_tenant_id: string }
        Returns: {
          customer_match: boolean
          insight_code: string
          insight_event_id: string
          metric_match: boolean
          overall_passed: boolean
          reported_customer_count: number
          reported_metric_value: number
          source_customer_count: number
          source_metric_value: number
        }[]
      }
      check_alert_escalations: { Args: { p_tenant_id: string }; Returns: Json }
      check_and_create_cs_alerts: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      check_metric_consistency: {
        Args: { p_tenant_id: string }
        Returns: {
          deviation_percent: number
          metric_pair: string
          source_a: string
          source_b: string
          status: string
          value_a: number
          value_b: number
        }[]
      }
      check_policy_approval: {
        Args: { p_context: Json; p_policy_type: string; p_tenant_id: string }
        Returns: {
          approver_roles: string[]
          policy_id: string
          policy_name: string
          required_approvals: number
          requires_approval: boolean
        }[]
      }
      check_tenant_schema_status: {
        Args: { p_tenant_id: string }
        Returns: Json
      }
      cleanup_expired_evidence: { Args: never; Returns: number }
      close_financial_period: {
        Args: { p_period_id: string }
        Returns: boolean
      }
      cluster_related_alerts: {
        Args: { p_tenant_id: string }
        Returns: {
          alerts_clustered: number
          clusters_created: number
        }[]
      }
      collapse_alerts_to_parent: {
        Args: {
          p_child_metric: string
          p_parent_metric: string
          p_tenant_id: string
        }
        Returns: Json
      }
      complete_alert_resolution: {
        Args: {
          p_actions_taken?: Json
          p_alert_id: string
          p_resolution_notes?: string
          p_resolution_type: string
          p_root_cause?: string
          p_tenant_id: string
        }
        Returns: string
      }
      complete_compute_job: {
        Args: {
          p_error_code?: string
          p_error_message?: string
          p_job_id: string
          p_output_snapshot_id?: string
          p_output_summary?: Json
          p_output_table?: string
          p_rows_affected?: number
          p_rows_inserted?: number
          p_rows_updated?: number
          p_status?: string
        }
        Returns: boolean
      }
      compute_central_metric_facts: {
        Args: {
          p_period_end?: string
          p_period_start?: string
          p_tenant_id: string
        }
        Returns: number
      }
      compute_central_metrics_snapshot: {
        Args: {
          p_end_date?: string
          p_start_date?: string
          p_tenant_id: string
        }
        Returns: string
      }
      compute_estimated_actual_impact: {
        Args: {
          p_decision_date: string
          p_decision_type: string
          p_predicted_impact: number
          p_tenant_id: string
        }
        Returns: {
          after_value: number
          before_value: number
          calculation_method: string
          confidence_level: string
          data_source: string
          estimated_impact: number
          low_confidence_reason: string
          metric_name: string
          period_days: number
        }[]
      }
      compute_finance_expenses_daily: {
        Args: { p_tenant_id: string }
        Returns: undefined
      }
      compute_kpi_facts_daily: {
        Args: {
          p_end_date?: string
          p_start_date?: string
          p_tenant_id: string
        }
        Returns: Json
      }
      control_tower_aggregate_signals: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      copy_template_table: {
        Args: { p_table_name: string; p_target_schema: string }
        Returns: undefined
      }
      copy_template_type: {
        Args: { p_target_schema: string; p_type_name: string }
        Returns: undefined
      }
      create_evidence_pack: {
        Args: {
          p_quality_scores?: Json
          p_reconciliation_diffs?: Json
          p_row_counts?: Json
          p_tenant_id: string
          p_watermark?: Json
        }
        Returns: string
      }
      cross_module_run_daily_sync: {
        Args: { p_tenant_id?: string }
        Returns: {
          details: Json
          status: string
          step: string
        }[]
      }
      current_org_id: { Args: never; Returns: string }
      current_tenant_id: { Args: never; Returns: string }
      current_tenant_schema: { Args: never; Returns: string }
      detect_cross_domain_variance: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      detect_real_alerts: { Args: { p_tenant_id: string }; Returns: number }
      detect_threshold_breaches: {
        Args: { p_date?: string; p_tenant_id: string }
        Returns: Json
      }
      dismiss_insight: {
        Args: {
          p_insight_event_id: string
          p_reason?: string
          p_tenant_id: string
        }
        Returns: string
      }
      execute_readonly_query: {
        Args: { params: Json; query_text: string }
        Returns: Json
      }
      fdp_get_budget_recommendations: {
        Args: { p_lookback_days?: number; p_tenant_id: string }
        Returns: {
          attributed_revenue: number
          cac: number
          channel: string
          confidence_level: string
          current_spend: number
          data_source: string
          is_cross_module: boolean
          new_customers: number
          profit_roas: number
          recommendation_reason: string
          recommended_change: number
          roas: number
        }[]
      }
      fdp_get_seasonal_adjustments: {
        Args: { p_target_month: number; p_tenant_id: string }
        Returns: {
          confidence_level: string
          confidence_score: number
          data_source: string
          is_cross_module: boolean
          order_multiplier: number
          pattern_type: string
          period_key: string
          revenue_multiplier: number
        }[]
      }
      fdp_push_actual_revenue_to_cdp: {
        Args: {
          p_cogs?: number
          p_contribution_margin?: number
          p_customer_count?: number
          p_gross_revenue?: number
          p_month: number
          p_net_revenue: number
          p_order_count?: number
          p_tenant_id: string
          p_year: number
        }
        Returns: string
      }
      fdp_push_ar_to_cdp: { Args: { p_tenant_id: string }; Returns: number }
      generate_asset_code: {
        Args: { p_category: string; p_tenant_id: string }
        Returns: string
      }
      generate_bill_number: { Args: { p_tenant_id: string }; Returns: string }
      generate_cash_forecast: {
        Args: { p_days?: number; p_method?: string; p_tenant_id: string }
        Returns: Database["public"]["CompositeTypes"]["forecast_row"][]
        SetofOptions: {
          from: "*"
          to: "forecast_row"
          isOneToOne: false
          isSetofReturn: true
        }
      }
      generate_credit_note_number: {
        Args: { p_tenant_id: string }
        Returns: string
      }
      generate_debit_note_number: {
        Args: { p_tenant_id: string }
        Returns: string
      }
      generate_invoice_number: {
        Args: { p_tenant_id: string }
        Returns: string
      }
      generate_journal_entry_number: {
        Args: { p_tenant_id: string }
        Returns: string
      }
      generate_order_number: {
        Args: { p_source?: string; p_tenant_id: string }
        Returns: string
      }
      generate_payment_number: {
        Args: { p_tenant_id: string; p_type?: string }
        Returns: string
      }
      generate_trial_balance: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: {
          account_code: string
          account_id: string
          account_name: string
          account_type: string
          closing_credit: number
          closing_debit: number
          opening_credit: number
          opening_debit: number
          period_credit: number
          period_debit: number
        }[]
      }
      generate_vendor_credit_note_number: {
        Args: { p_tenant_id: string }
        Returns: string
      }
      get_active_tenant_id: { Args: never; Returns: string }
      get_ai_recommendation: {
        Args: {
          p_alert_id?: string
          p_decision_type?: string
          p_metric_code?: string
          p_tenant_id: string
        }
        Returns: Json
      }
      get_ai_usage_stats: {
        Args: { p_days?: number; p_tenant_id: string }
        Returns: Json
      }
      get_all_open_cs_alerts: {
        Args: {
          p_alert_type?: string
          p_limit?: number
          p_offset?: number
          p_severity?: string
        }
        Returns: {
          alert_type: string
          assigned_to: string
          created_at: string
          description: string
          id: string
          metadata: Json
          recommended_action: string
          severity: string
          status: string
          tenant_email: string
          tenant_id: string
          tenant_name: string
          title: string
          updated_at: string
        }[]
      }
      get_audit_log_stats: {
        Args: { p_tenant_id?: string }
        Returns: {
          critical_actions: number
          total_today: number
          unique_users: number
        }[]
      }
      get_category_pl_aggregated: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: {
          category: string
          cogs_m: number
          contribution_pct: number
          gross_profit: number
          margin_pct: number
          profit_m: number
          revenue_m: number
          total_cogs: number
          total_revenue: number
        }[]
      }
      get_control_tower_summary: {
        Args: {
          p_end_date?: string
          p_start_date?: string
          p_tenant_id: string
        }
        Returns: Json
      }
      get_cross_module_config: {
        Args: { p_config_key: string; p_tenant_id: string }
        Returns: Json
      }
      get_cs_alerts_summary: {
        Args: never
        Returns: {
          critical_count: number
          info_count: number
          oldest_unresolved: string
          tenant_id: string
          tenant_name: string
          total_alerts: number
          warning_count: number
        }[]
      }
      get_decision_audit_stats: { Args: { p_tenant_id: string }; Returns: Json }
      get_decision_evidence: {
        Args: { p_decision_id: string }
        Returns: {
          computed_at: string
          confidence: string
          decision_id: string
          decision_status: string
          decision_title: string
          duration_ms: number
          evidence_id: string
          function_name: string
          function_version: string
          input_counts: Json
          input_hash: Json
          period_end: string
          period_start: string
          quality_score: number
          snapshot_ids: string[]
          snapshot_table: string
        }[]
      }
      get_decision_insight: {
        Args: {
          p_decision_type: string
          p_metric_code: string
          p_tenant_id: string
        }
        Returns: string
      }
      get_exchange_rate: {
        Args: {
          p_date?: string
          p_from_currency: string
          p_tenant_id: string
          p_to_currency: string
        }
        Returns: number
      }
      get_expenses_daily: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: {
          cogs_amount: number
          day: string
          depreciation_amount: number
          expense_count: number
          interest_amount: number
          logistics_amount: number
          marketing_amount: number
          other_amount: number
          rent_amount: number
          salary_amount: number
          tax_amount: number
          total_amount: number
          utilities_amount: number
        }[]
      }
      get_facts_summary: {
        Args: { p_grain_type: string; p_tenant_id: string }
        Returns: {
          avg_margin_percent: number
          total_cost: number
          total_items: number
          total_orders: number
          total_profit: number
          total_quantity: number
          total_revenue: number
        }[]
      }
      get_fdp_period_summary: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: Json
      }
      get_forecast_historical_stats: {
        Args: { p_days?: number; p_tenant_id: string }
        Returns: {
          avg_daily_inflow: number
          avg_daily_outflow: number
          total_credit: number
          total_debit: number
          unique_days: number
        }[]
      }
      get_forecast_inputs_summary: {
        Args: { p_tenant_id: string }
        Returns: Json
      }
      get_latest_central_metrics: {
        Args: { p_max_age_minutes?: number; p_tenant_id: string }
        Returns: {
          ar_aging_30d: number
          ar_aging_60d: number
          ar_aging_90d: number
          ar_aging_current: number
          avg_order_value: number
          cac: number
          cash_7d_forecast: number
          cash_runway_months: number
          cash_today: number
          ccc: number
          computation_duration_ms: number | null
          compute_function: string | null
          compute_version: string | null
          computed_by: string | null
          contribution_margin: number
          contribution_margin_percent: number
          created_at: string
          dio: number
          dpo: number
          dso: number
          ebitda: number
          ebitda_margin_percent: number
          gross_margin_percent: number
          gross_profit: number
          id: string
          input_hash: string | null
          locked_cash_ads: number | null
          locked_cash_inventory: number | null
          locked_cash_ops: number | null
          locked_cash_platform: number | null
          locked_cash_total: number | null
          ltv: number
          ltv_cac_ratio: number
          marketing_roas: number
          net_revenue: number
          overdue_ap: number
          overdue_ar: number
          period_end: string
          period_start: string
          repeat_customer_rate: number
          slow_moving_inventory: number
          snapshot_at: string
          tenant_id: string
          total_ap: number
          total_ar: number
          total_customers: number
          total_inventory_value: number
          total_marketing_spend: number
          total_orders: number
        }
        SetofOptions: {
          from: "*"
          to: "central_metrics_snapshots"
          isOneToOne: true
          isSetofReturn: false
        }
      }
      get_metric_value: {
        Args: { p_date?: string; p_metric_code: string; p_tenant_id: string }
        Returns: number
      }
      get_pl_aggregated: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: {
          cogs: number
          cogs_m: number
          gross_margin_pct: number
          gross_profit: number
          gross_profit_m: number
          gross_sales: number
          net_income: number
          net_income_m: number
          net_margin_pct: number
          net_sales: number
          net_sales_m: number
          operating_income: number
          operating_margin_pct: number
          opex_m: number
          total_opex: number
        }[]
      }
      get_pl_comparison: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: {
          change_pct: number
          current_value: number
          metric: string
          previous_value: number
        }[]
      }
      get_sku_cost_breakdown: {
        Args: {
          p_end_date: string
          p_sku: string
          p_start_date: string
          p_tenant_id: string
        }
        Returns: {
          allocated_other_fees: number
          allocated_platform_fee: number
          allocated_shipping_fee: number
          channel: string
          gross_profit: number
          line_cogs: number
          line_margin: number
          line_revenue: number
          margin_percent: number
          net_profit: number
          order_at: string
          order_gross_revenue: number
          order_id: string
          order_key: string
          order_other_fees: number
          order_platform_fee: number
          order_shipping_fee: number
          quantity: number
          revenue_share_pct: number
          unit_price: number
        }[]
      }
      get_sku_master_unit_cost: {
        Args: { p_sku: string; p_tenant_id: string }
        Returns: number
      }
      get_sku_profitability_by_date_range: {
        Args: {
          p_end_date: string
          p_limit?: number
          p_start_date: string
          p_tenant_id: string
        }
        Returns: {
          channel: string
          gross_profit: number
          margin_percent: number
          order_count: number
          product_name: string
          sku: string
          total_cogs: number
          total_quantity: number
          total_revenue: number
        }[]
      }
      get_tenant_activity_summary: {
        Args: { p_days?: number; p_tenant_id: string }
        Returns: Json
      }
      get_tenant_health: { Args: { p_tenant_id: string }; Returns: Json }
      get_tenant_ltv_assumptions: {
        Args: { p_tenant_id: string }
        Returns: Json
      }
      get_tenant_schema: { Args: never; Returns: string }
      get_tenant_schema_stats: { Args: { p_tenant_id: string }; Returns: Json }
      get_tenant_table_list: {
        Args: never
        Returns: {
          table_name: string
        }[]
      }
      get_tenant_view_list: {
        Args: never
        Returns: {
          view_definition: string
          view_name: string
        }[]
      }
      get_user_tenant_ids: { Args: { _user_id: string }; Returns: string[] }
      get_working_capital_daily: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: {
          cash_balance: number
          ccc: number
          day: string
          dio: number
          dpo: number
          dso: number
          inventory: number
          net_working_capital: number
          overdue_ap: number
          overdue_ar: number
          total_ap: number
          total_ar: number
        }[]
      }
      has_role: {
        Args: {
          _role: Database["public"]["Enums"]["app_role"]
          _user_id: string
        }
        Returns: boolean
      }
      has_tenant_access: { Args: { _tenant_id: string }; Returns: boolean }
      has_tenant_role: {
        Args: {
          _role: Database["public"]["Enums"]["tenant_role"]
          _tenant_id: string
        }
        Returns: boolean
      }
      init_tenant_session: { Args: { p_tenant_id: string }; Returns: Json }
      is_authenticated: { Args: never; Returns: boolean }
      is_super_admin: { Args: never; Returns: boolean }
      is_tenant_admin: { Args: { _tenant_id: string }; Returns: boolean }
      is_tenant_schema_provisioned: {
        Args: { p_tenant_id: string }
        Returns: boolean
      }
      link_orders_batch: {
        Args: { p_batch_size?: number; p_tenant_id: string }
        Returns: number
      }
      link_orders_to_customers: { Args: { p_tenant_id: string }; Returns: Json }
      log_audit_event: {
        Args: {
          p_action: string
          p_actor_id: string
          p_actor_role: string
          p_actor_type: string
          p_after_state?: Json
          p_before_state?: Json
          p_decision_context?: string
          p_reason_code?: string
          p_reason_detail?: string
          p_resource_id: string
          p_resource_type: string
          p_tenant_id: string
        }
        Returns: string
      }
      mark_alert_false_positive: {
        Args: { p_alert_id: string; p_reason: string; p_tenant_id: string }
        Returns: string
      }
      mdp_get_churn_signals: {
        Args: { p_min_urgency?: string; p_tenant_id: string }
        Returns: {
          churn_probability: number
          customer_id: string
          customer_segment: string
          days_inactive: number
          ltv_at_risk: number
          recommended_action: string
          signal_id: string
          urgency_level: string
        }[]
      }
      mdp_get_costs_for_roas: {
        Args: { p_month?: number; p_tenant_id: string; p_year?: number }
        Returns: {
          cogs_percent: number
          confidence_level: string
          data_source: string
          fee_percent: number
          is_cross_module: boolean
        }[]
      }
      mdp_get_segment_ltv: {
        Args: { p_segment_type?: string; p_tenant_id: string }
        Returns: {
          avg_ltv: number
          confidence_level: string
          customer_count: number
          data_source: string
          is_cross_module: boolean
          priority_score: number
          recommended_cac_ceiling: number
          segment_name: string
          segment_type: string
          total_equity: number
        }[]
      }
      mdp_push_acquisition_to_cdp: {
        Args: {
          p_acquisition_cost?: number
          p_acquisition_date?: string
          p_campaign_id?: string
          p_campaign_name?: string
          p_channel: string
          p_customer_id: string
          p_tenant_id: string
        }
        Returns: string
      }
      mdp_push_channel_roi_to_fdp: {
        Args: {
          p_attributed_orders: number
          p_attributed_revenue: number
          p_channel: string
          p_contribution_margin?: number
          p_new_customers: number
          p_period_end: string
          p_period_start: string
          p_profit_roas?: number
          p_tenant_id: string
          p_total_spend: number
        }
        Returns: string
      }
      mdp_push_seasonal_to_fdp: {
        Args: {
          p_confidence_score?: number
          p_order_multiplier?: number
          p_pattern_type: string
          p_period_key: string
          p_revenue_multiplier: number
          p_sample_size?: number
          p_tenant_id: string
        }
        Returns: string
      }
      merge_duplicate_customers: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      migrate_tenant_data: {
        Args: { p_table_name: string; p_tenant_id: string }
        Returns: Json
      }
      populate_central_metric_facts: {
        Args: {
          p_period_end?: string
          p_period_start?: string
          p_tenant_id: string
        }
        Returns: number
      }
      populate_finance_monthly_summary: {
        Args: { p_tenant_id: string; p_year_month?: string }
        Returns: number
      }
      post_journal_entry: { Args: { p_entry_id: string }; Returns: boolean }
      provision_tenant_by_tier: {
        Args: {
          p_slug: string
          p_tenant_id: string
          p_tier?: Database["public"]["Enums"]["tenant_tier"]
        }
        Returns: Json
      }
      provision_tenant_from_template: {
        Args: { p_slug: string; p_tenant_id: string }
        Returns: Json
      }
      provision_tenant_schema: {
        Args: { p_slug: string; p_tenant_id: string }
        Returns: Json
      }
      reactivate_insight: {
        Args: { p_insight_event_id: string; p_tenant_id: string }
        Returns: boolean
      }
      recalculate_product_metrics: {
        Args: { p_days_back?: number; p_sku?: string; p_tenant_id: string }
        Returns: number
      }
      refresh_central_metrics_cache: {
        Args: { p_end_date: string; p_start_date: string; p_tenant_id: string }
        Returns: undefined
      }
      refresh_channel_analytics_cache: {
        Args: { p_tenant_id: string }
        Returns: undefined
      }
      refresh_dashboard_kpi_cache:
        | { Args: never; Returns: undefined }
        | {
            Args: { p_date_range?: number; p_tenant_id: string }
            Returns: undefined
          }
      refresh_pl_cache: {
        Args: { p_month?: number; p_tenant_id: string; p_year: number }
        Returns: undefined
      }
      refresh_whatif_metrics_cache: {
        Args: { p_tenant_id: string }
        Returns: undefined
      }
      reverse_journal_entry: {
        Args: { p_entry_id: string; p_reversal_date?: string }
        Returns: string
      }
      run_cs_alert_checks: {
        Args: never
        Returns: {
          alerts_created: number
          tenant_id: string
        }[]
      }
      run_retention_cleanup: {
        Args: never
        Returns: {
          rows_deleted: number
          table_name: string
        }[]
      }
      seed_cross_module_config_defaults: {
        Args: { p_tenant_id: string }
        Returns: undefined
      }
      seed_mdp_config_defaults: {
        Args: { p_tenant_id: string }
        Returns: undefined
      }
      set_cross_module_config: {
        Args: {
          p_config_key: string
          p_config_value: Json
          p_tenant_id: string
        }
        Returns: boolean
      }
      set_current_org: { Args: { p_org_id: string }; Returns: undefined }
      set_tenant_schema: { Args: { p_tenant_id: string }; Returns: undefined }
      snooze_insight: {
        Args: {
          p_insight_event_id: string
          p_reason?: string
          p_snooze_days?: number
          p_tenant_id: string
        }
        Returns: string
      }
      start_alert_resolution: {
        Args: {
          p_alert_id: string
          p_assigned_to?: string
          p_tenant_id: string
        }
        Returns: string
      }
      start_compute_job: {
        Args: {
          p_function_version?: string
          p_input_params?: Json
          p_job_name: string
          p_snapshot_date?: string
          p_snapshot_type?: string
          p_tenant_id: string
          p_trigger?: string
        }
        Returns: string
      }
      sync_budget_actuals: { Args: never; Returns: undefined }
      track_tenant_event: {
        Args: {
          p_duration_ms?: number
          p_event_name: string
          p_event_type: string
          p_metadata?: Json
          p_module?: string
          p_route?: string
          p_session_id?: string
          p_tenant_id: string
        }
        Returns: string
      }
      update_metric_formula: {
        Args: {
          p_change_reason: string
          p_changed_by?: string
          p_metric_code: string
          p_new_formula: string
        }
        Returns: boolean
      }
      update_order_items_cogs: {
        Args: { p_tenant_id: string }
        Returns: number
      }
      validate_period_date: {
        Args: { p_date: string; p_tenant_id: string }
        Returns: string
      }
      void_journal_entry: {
        Args: { p_entry_id: string; p_reason: string }
        Returns: boolean
      }
    }
    Enums: {
      app_role: "admin" | "accountant" | "viewer"
      connector_type:
        | "haravan"
        | "sapo"
        | "kiotviet"
        | "nhanh"
        | "shopee"
        | "lazada"
        | "tiki"
        | "tiktok_shop"
        | "sendo"
        | "shopify"
        | "woocommerce"
        | "misa"
        | "fast"
        | "sap"
        | "bank_api"
        | "manual"
        | "bigquery"
      expense_category:
        | "cogs"
        | "salary"
        | "rent"
        | "utilities"
        | "marketing"
        | "logistics"
        | "depreciation"
        | "interest"
        | "tax"
        | "other"
      order_status:
        | "pending"
        | "confirmed"
        | "processing"
        | "shipping"
        | "delivered"
        | "cancelled"
        | "returned"
        | "refunded"
      revenue_source: "manual" | "integrated"
      revenue_type: "one_time" | "recurring"
      settlement_status: "pending" | "processing" | "completed" | "disputed"
      sync_status: "pending" | "running" | "completed" | "failed" | "cancelled"
      tenant_role: "owner" | "admin" | "member" | "viewer"
      tenant_tier: "smb" | "midmarket" | "enterprise"
    }
    CompositeTypes: {
      forecast_row: {
        forecast_date: string | null
        display_date: string | null
        balance: number | null
        inflow: number | null
        outflow: number | null
        net_flow: number | null
        upper_bound: number | null
        lower_bound: number | null
        is_actual: boolean | null
      }
    }
  }
}

type DatabaseWithoutInternals = Omit<Database, "__InternalSupabase">

type DefaultSchema = DatabaseWithoutInternals[Extract<keyof Database, "public">]

export type Tables<
  DefaultSchemaTableNameOrOptions extends
    | keyof (DefaultSchema["Tables"] & DefaultSchema["Views"])
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof (DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Tables"] &
        DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Views"])
    : never = never,
> = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? (DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Tables"] &
      DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Views"])[TableName] extends {
      Row: infer R
    }
    ? R
    : never
  : DefaultSchemaTableNameOrOptions extends keyof (DefaultSchema["Tables"] &
        DefaultSchema["Views"])
    ? (DefaultSchema["Tables"] &
        DefaultSchema["Views"])[DefaultSchemaTableNameOrOptions] extends {
        Row: infer R
      }
      ? R
      : never
    : never

export type TablesInsert<
  DefaultSchemaTableNameOrOptions extends
    | keyof DefaultSchema["Tables"]
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Tables"]
    : never = never,
> = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Tables"][TableName] extends {
      Insert: infer I
    }
    ? I
    : never
  : DefaultSchemaTableNameOrOptions extends keyof DefaultSchema["Tables"]
    ? DefaultSchema["Tables"][DefaultSchemaTableNameOrOptions] extends {
        Insert: infer I
      }
      ? I
      : never
    : never

export type TablesUpdate<
  DefaultSchemaTableNameOrOptions extends
    | keyof DefaultSchema["Tables"]
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Tables"]
    : never = never,
> = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions["schema"]]["Tables"][TableName] extends {
      Update: infer U
    }
    ? U
    : never
  : DefaultSchemaTableNameOrOptions extends keyof DefaultSchema["Tables"]
    ? DefaultSchema["Tables"][DefaultSchemaTableNameOrOptions] extends {
        Update: infer U
      }
      ? U
      : never
    : never

export type Enums<
  DefaultSchemaEnumNameOrOptions extends
    | keyof DefaultSchema["Enums"]
    | { schema: keyof DatabaseWithoutInternals },
  EnumName extends DefaultSchemaEnumNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaEnumNameOrOptions["schema"]]["Enums"]
    : never = never,
> = DefaultSchemaEnumNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaEnumNameOrOptions["schema"]]["Enums"][EnumName]
  : DefaultSchemaEnumNameOrOptions extends keyof DefaultSchema["Enums"]
    ? DefaultSchema["Enums"][DefaultSchemaEnumNameOrOptions]
    : never

export type CompositeTypes<
  PublicCompositeTypeNameOrOptions extends
    | keyof DefaultSchema["CompositeTypes"]
    | { schema: keyof DatabaseWithoutInternals },
  CompositeTypeName extends PublicCompositeTypeNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[PublicCompositeTypeNameOrOptions["schema"]]["CompositeTypes"]
    : never = never,
> = PublicCompositeTypeNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[PublicCompositeTypeNameOrOptions["schema"]]["CompositeTypes"][CompositeTypeName]
  : PublicCompositeTypeNameOrOptions extends keyof DefaultSchema["CompositeTypes"]
    ? DefaultSchema["CompositeTypes"][PublicCompositeTypeNameOrOptions]
    : never

export const Constants = {
  public: {
    Enums: {
      app_role: ["admin", "accountant", "viewer"],
      connector_type: [
        "haravan",
        "sapo",
        "kiotviet",
        "nhanh",
        "shopee",
        "lazada",
        "tiki",
        "tiktok_shop",
        "sendo",
        "shopify",
        "woocommerce",
        "misa",
        "fast",
        "sap",
        "bank_api",
        "manual",
        "bigquery",
      ],
      expense_category: [
        "cogs",
        "salary",
        "rent",
        "utilities",
        "marketing",
        "logistics",
        "depreciation",
        "interest",
        "tax",
        "other",
      ],
      order_status: [
        "pending",
        "confirmed",
        "processing",
        "shipping",
        "delivered",
        "cancelled",
        "returned",
        "refunded",
      ],
      revenue_source: ["manual", "integrated"],
      revenue_type: ["one_time", "recurring"],
      settlement_status: ["pending", "processing", "completed", "disputed"],
      sync_status: ["pending", "running", "completed", "failed", "cancelled"],
      tenant_role: ["owner", "admin", "member", "viewer"],
      tenant_tier: ["smb", "midmarket", "enterprise"],
    },
  },
} as const
